"use strict";if(typeof PDFJS==="undefined"){(typeof window!=="undefined"?window:this).PDFJS={}}(function checkTypedArrayCompatibility(){if(typeof Uint8Array!=="undefined"){if(typeof Uint8Array.prototype.subarray==="undefined"){Uint8Array.prototype.subarray=function subarray(start,end){return new Uint8Array(this.slice(start,end))};Float32Array.prototype.subarray=function subarray(start,end){return new Float32Array(this.slice(start,end))}}if(typeof Float64Array==="undefined"){window.Float64Array=Float32Array}return}function subarray(start,end){return new TypedArray(this.slice(start,end))}function setArrayOffset(array,offset){if(arguments.length<2){offset=0}for(var i=0,n=array.length;i<n;++i,++offset){this[offset]=array[i]&255}}function TypedArray(arg1){var result,i,n;if(typeof arg1==="number"){result=[];for(i=0;i<arg1;++i){result[i]=0}}else if("slice"in arg1){result=arg1.slice(0)}else{result=[];for(i=0,n=arg1.length;i<n;++i){result[i]=arg1[i]}}result.subarray=subarray;result.buffer=result;result.byteLength=result.length;result.set=setArrayOffset;if(typeof arg1==="object"&&arg1.buffer){result.buffer=arg1.buffer}return result}window.Uint8Array=TypedArray;window.Int8Array=TypedArray;window.Uint32Array=TypedArray;window.Int32Array=TypedArray;window.Uint16Array=TypedArray;window.Float32Array=TypedArray;window.Float64Array=TypedArray})();(function normalizeURLObject(){if(!window.URL){window.URL=window.webkitURL}})();(function checkObjectDefinePropertyCompatibility(){if(typeof Object.defineProperty!=="undefined"){var definePropertyPossible=true;try{Object.defineProperty(new Image,"id",{value:"test"});var Test=function Test(){};Test.prototype={get id(){}};Object.defineProperty(new Test,"id",{value:"",configurable:true,enumerable:true,writable:false})}catch(e){definePropertyPossible=false}if(definePropertyPossible){return}}Object.defineProperty=function objectDefineProperty(obj,name,def){delete obj[name];if("get"in def){obj.__defineGetter__(name,def["get"])}if("set"in def){obj.__defineSetter__(name,def["set"])}if("value"in def){obj.__defineSetter__(name,function objectDefinePropertySetter(value){this.__defineGetter__(name,function objectDefinePropertyGetter(){return value});return value});obj[name]=def.value}}})();(function checkXMLHttpRequestResponseCompatibility(){var xhrPrototype=XMLHttpRequest.prototype;var xhr=new XMLHttpRequest;if(!("overrideMimeType"in xhr)){Object.defineProperty(xhrPrototype,"overrideMimeType",{value:function xmlHttpRequestOverrideMimeType(mimeType){}})}if("responseType"in xhr){return}PDFJS.disableWorker=true;Object.defineProperty(xhrPrototype,"responseType",{get:function xmlHttpRequestGetResponseType(){return this._responseType||"text"},set:function xmlHttpRequestSetResponseType(value){if(value==="text"||value==="arraybuffer"){this._responseType=value;if(value==="arraybuffer"&&typeof this.overrideMimeType==="function"){this.overrideMimeType("text/plain; charset=x-user-defined")}}}});if(typeof VBArray!=="undefined"){Object.defineProperty(xhrPrototype,"response",{get:function xmlHttpRequestResponseGet(){if(this.responseType==="arraybuffer"){return new Uint8Array(new VBArray(this.responseBody).toArray())}else{return this.responseText}}});return}Object.defineProperty(xhrPrototype,"response",{get:function xmlHttpRequestResponseGet(){if(this.responseType!=="arraybuffer"){return this.responseText}var text=this.responseText;var i,n=text.length;var result=new Uint8Array(n);for(i=0;i<n;++i){result[i]=text.charCodeAt(i)&255}return result.buffer}})})();(function checkWindowBtoaCompatibility(){if("btoa"in window){return}var digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.btoa=function windowBtoa(chars){var buffer="";var i,n;for(i=0,n=chars.length;i<n;i+=3){var b1=chars.charCodeAt(i)&255;var b2=chars.charCodeAt(i+1)&255;var b3=chars.charCodeAt(i+2)&255;var d1=b1>>2,d2=(b1&3)<<4|b2>>4;var d3=i+1<n?(b2&15)<<2|b3>>6:64;var d4=i+2<n?b3&63:64;buffer+=digits.charAt(d1)+digits.charAt(d2)+digits.charAt(d3)+digits.charAt(d4)}return buffer}})();(function checkWindowAtobCompatibility(){if("atob"in window){return}var digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.atob=function(input){input=input.replace(/=+$/,"");if(input.length%4===1){throw new Error("bad atob input")}for(var bc=0,bs,buffer,idx=0,output="";buffer=input.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=digits.indexOf(buffer)}return output}})();(function checkFunctionPrototypeBindCompatibility(){if(typeof Function.prototype.bind!=="undefined"){return}Function.prototype.bind=function functionPrototypeBind(obj){var fn=this,headArgs=Array.prototype.slice.call(arguments,1);var bound=function functionPrototypeBindBound(){var args=headArgs.concat(Array.prototype.slice.call(arguments));return fn.apply(obj,args)};return bound}})();(function checkDatasetProperty(){var div=document.createElement("div");if("dataset"in div){return}Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset){return this._dataset}var dataset={};for(var j=0,jj=this.attributes.length;j<jj;j++){var attribute=this.attributes[j];if(attribute.name.substring(0,5)!=="data-"){continue}var key=attribute.name.substring(5).replace(/\-([a-z])/g,function(all,ch){return ch.toUpperCase()});dataset[key]=attribute.value}Object.defineProperty(this,"_dataset",{value:dataset,writable:false,enumerable:false});return dataset},enumerable:true})})();(function checkClassListProperty(){var div=document.createElement("div");if("classList"in div){return}function changeList(element,itemName,add,remove){var s=element.className||"";var list=s.split(/\s+/g);if(list[0]===""){list.shift()}var index=list.indexOf(itemName);if(index<0&&add){list.push(itemName)}if(index>=0&&remove){list.splice(index,1)}element.className=list.join(" ");return index>=0}var classListPrototype={add:function(name){changeList(this.element,name,true,false)},contains:function(name){return changeList(this.element,name,false,false)},remove:function(name){changeList(this.element,name,false,true)},toggle:function(name){changeList(this.element,name,true,true)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList){return this._classList}var classList=Object.create(classListPrototype,{element:{value:this,writable:false,enumerable:true}});Object.defineProperty(this,"_classList",{value:classList,writable:false,enumerable:false});return classList},enumerable:true})})();(function checkConsoleCompatibility(){if(!("console"in window)){window.console={log:function(){},error:function(){},warn:function(){}}}else if(!("bind"in console.log)){console.log=function(fn){return function(msg){return fn(msg)}}(console.log);console.error=function(fn){return function(msg){return fn(msg)}}(console.error);console.warn=function(fn){return function(msg){return fn(msg)}}(console.warn)}})();(function checkOnClickCompatibility(){function ignoreIfTargetDisabled(event){if(isDisabled(event.target)){event.stopPropagation()}}function isDisabled(node){return node.disabled||node.parentNode&&isDisabled(node.parentNode)}if(navigator.userAgent.indexOf("Opera")!==-1){document.addEventListener("click",ignoreIfTargetDisabled,true)}})();(function checkOnBlobSupport(){if(navigator.userAgent.indexOf("Trident")>=0){PDFJS.disableCreateObjectURL=true}})();(function checkNavigatorLanguage(){if("language"in navigator){return}PDFJS.locale=navigator.userLanguage||"en-US"})();(function checkRangeRequests(){var isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0;var regex=/Android\s[0-2][^\d]/;var isOldAndroid=regex.test(navigator.userAgent);var isChromeWithRangeBug=/Chrome\/(39|40)\./.test(navigator.userAgent);if(isSafari||isOldAndroid||isChromeWithRangeBug){PDFJS.disableRange=true;PDFJS.disableStream=true}})();(function checkHistoryManipulation(){if(!history.pushState||navigator.userAgent.indexOf("Android 2.")>=0){PDFJS.disableHistory=true}})();(function checkSetPresenceInImageData(){if(window.CanvasPixelArray){if(typeof window.CanvasPixelArray.prototype.set!=="function"){window.CanvasPixelArray.prototype.set=function(arr){for(var i=0,ii=this.length;i<ii;i++){this[i]=arr[i]}}}}else{var polyfill=false,versionMatch;if(navigator.userAgent.indexOf("Chrom")>=0){versionMatch=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);polyfill=versionMatch&&parseInt(versionMatch[2])<21}else if(navigator.userAgent.indexOf("Android")>=0){polyfill=/Android\s[0-4][^\d]/g.test(navigator.userAgent)}else if(navigator.userAgent.indexOf("Safari")>=0){versionMatch=navigator.userAgent.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//);polyfill=versionMatch&&parseInt(versionMatch[1])<6}if(polyfill){var contextPrototype=window.CanvasRenderingContext2D.prototype;var createImageData=contextPrototype.createImageData;contextPrototype.createImageData=function(w,h){var imageData=createImageData.call(this,w,h);imageData.data.set=function(arr){for(var i=0,ii=this.length;i<ii;i++){this[i]=arr[i]}};return imageData};contextPrototype=null}}})();(function checkRequestAnimationFrame(){function fakeRequestAnimationFrame(callback){window.setTimeout(callback,20)}var isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);if(isIOS){window.requestAnimationFrame=fakeRequestAnimationFrame;return}if("requestAnimationFrame"in window){return}window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||fakeRequestAnimationFrame})();(function checkCanvasSizeLimitation(){var isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);var isAndroid=/Android/g.test(navigator.userAgent);if(isIOS||isAndroid){PDFJS.maxCanvasPixels=5242880}})();(function checkFullscreenSupport(){var isEmbeddedIE=navigator.userAgent.indexOf("Trident")>=0&&window.parent!==window;if(isEmbeddedIE){PDFJS.disableFullscreen=true}})();(function checkCurrentScript(){if("currentScript"in document){return}Object.defineProperty(document,"currentScript",{get:function(){var scripts=document.getElementsByTagName("script");return scripts[scripts.length-1]},enumerable:true,configurable:true})})();"use strict";document.webL10n=function(window,document,undefined){var gL10nData={};var gTextData="";var gTextProp="textContent";var gLanguage="";var gMacros={};var gReadyState="loading";var gAsyncResourceLoading=true;function getL10nResourceLinks(){return document.querySelectorAll('link[type="application/l10n"]')}function getL10nDictionary(){var script=document.querySelector('script[type="application/l10n"]');return script?JSON.parse(script.innerHTML):null}function getTranslatableChildren(element){return element?element.querySelectorAll("*[data-l10n-id]"):[]}function getL10nAttributes(element){if(!element)return{};var l10nId=element.getAttribute("data-l10n-id");var l10nArgs=element.getAttribute("data-l10n-args");var args={};if(l10nArgs){try{args=JSON.parse(l10nArgs)}catch(e){console.warn("could not parse arguments for #"+l10nId)}}return{id:l10nId,args:args}}function fireL10nReadyEvent(lang){var evtObject=document.createEvent("Event");evtObject.initEvent("localized",true,false);evtObject.language=lang;document.dispatchEvent(evtObject)}function xhrLoadText(url,onSuccess,onFailure){onSuccess=onSuccess||function _onSuccess(data){};onFailure=onFailure||function _onFailure(){console.warn(url+" not found.")};var xhr=new XMLHttpRequest;xhr.open("GET",url,gAsyncResourceLoading);if(xhr.overrideMimeType){xhr.overrideMimeType("text/plain; charset=utf-8")}xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status==200||xhr.status===0){onSuccess(xhr.responseText)}else{onFailure()}}};xhr.onerror=onFailure;xhr.ontimeout=onFailure;try{xhr.send(null)}catch(e){onFailure()}}function parseResource(href,lang,successCallback,failureCallback){var baseURL=href.replace(/[^\/]*$/,"")||"./";function evalString(text){if(text.lastIndexOf("\\")<0)return text;return text.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function parseProperties(text,parsedPropertiesCallback){var dictionary={};var reBlank=/^\s*|\s*$/;var reComment=/^\s*#|^\s*$/;var reSection=/^\s*\[(.*)\]\s*$/;var reImport=/^\s*@import\s+url\((.*)\)\s*$/i;var reSplit=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(rawText,extendedSyntax,parsedRawLinesCallback){var entries=rawText.replace(reBlank,"").split(/[\r\n]+/);var currentLang="*";var genericLang=lang.split("-",1)[0];var skipLang=false;var match="";function nextEntry(){while(true){if(!entries.length){parsedRawLinesCallback();return}var line=entries.shift();if(reComment.test(line))continue;if(extendedSyntax){match=reSection.exec(line);if(match){currentLang=match[1].toLowerCase();skipLang=currentLang!=="*"&&currentLang!==lang&&currentLang!==genericLang;continue}else if(skipLang){continue}match=reImport.exec(line);if(match){loadImport(baseURL+match[1],nextEntry);return}}var tmp=line.match(reSplit);if(tmp&&tmp.length==3){dictionary[tmp[1]]=evalString(tmp[2])}}}nextEntry()}function loadImport(url,callback){xhrLoadText(url,function(content){parseRawLines(content,false,callback)},null)}parseRawLines(text,true,function(){parsedPropertiesCallback(dictionary)})}xhrLoadText(href,function(response){gTextData+=response;parseProperties(response,function(data){for(var key in data){var id,prop,index=key.lastIndexOf(".");if(index>0){id=key.substring(0,index);prop=key.substr(index+1)}else{id=key;prop=gTextProp}if(!gL10nData[id]){gL10nData[id]={}}gL10nData[id][prop]=data[key]}if(successCallback){successCallback()}})},failureCallback)}function loadLocale(lang,callback){if(lang){lang=lang.toLowerCase()}callback=callback||function _callback(){};clear();gLanguage=lang;var langLinks=getL10nResourceLinks();var langCount=langLinks.length;if(langCount===0){var dict=getL10nDictionary();if(dict&&dict.locales&&dict.default_locale){console.log("using the embedded JSON directory, early way out");gL10nData=dict.locales[lang];if(!gL10nData){var defaultLocale=dict.default_locale.toLowerCase();for(var anyCaseLang in dict.locales){anyCaseLang=anyCaseLang.toLowerCase();if(anyCaseLang===lang){gL10nData=dict.locales[lang];break}else if(anyCaseLang===defaultLocale){gL10nData=dict.locales[defaultLocale]}}}callback()}else{console.log("no resource to load, early way out")}fireL10nReadyEvent(lang);gReadyState="complete";return}var onResourceLoaded=null;var gResourceCount=0;onResourceLoaded=function(){gResourceCount++;if(gResourceCount>=langCount){callback();fireL10nReadyEvent(lang);gReadyState="complete"}};function L10nResourceLink(link){var href=link.href;this.load=function(lang,callback){parseResource(href,lang,callback,function(){console.warn(href+" not found.");console.warn('"'+lang+'" resource not found');gLanguage="";callback()})}}for(var i=0;i<langCount;i++){var resource=new L10nResourceLink(langLinks[i]);resource.load(lang,onResourceLoaded)}}function clear(){gL10nData={};gTextData="";gLanguage=""}function getPluralRules(lang){var locales2rules={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function isIn(n,list){return list.indexOf(n)!==-1}function isBetween(n,start,end){return start<=n&&n<=end}var pluralRules={0:function(n){return"other"},1:function(n){if(isBetween(n%100,3,10))return"few";if(n===0)return"zero";if(isBetween(n%100,11,99))return"many";if(n==2)return"two";if(n==1)return"one";return"other"},2:function(n){if(n!==0&&n%10===0)return"many";if(n==2)return"two";if(n==1)return"one";return"other"},3:function(n){if(n==1)return"one";return"other"},4:function(n){if(isBetween(n,0,1))return"one";return"other"},5:function(n){if(isBetween(n,0,2)&&n!=2)return"one";return"other"},6:function(n){if(n===0)return"zero";if(n%10==1&&n%100!=11)return"one";return"other"},7:function(n){if(n==2)return"two";if(n==1)return"one";return"other"},8:function(n){if(isBetween(n,3,6))return"few";if(isBetween(n,7,10))return"many";if(n==2)return"two";if(n==1)return"one";return"other"},9:function(n){if(n===0||n!=1&&isBetween(n%100,1,19))return"few";if(n==1)return"one";return"other"},10:function(n){if(isBetween(n%10,2,9)&&!isBetween(n%100,11,19))return"few";if(n%10==1&&!isBetween(n%100,11,19))return"one";return"other"},11:function(n){if(isBetween(n%10,2,4)&&!isBetween(n%100,12,14))return"few";if(n%10===0||isBetween(n%10,5,9)||isBetween(n%100,11,14))return"many";if(n%10==1&&n%100!=11)return"one";return"other"},12:function(n){if(isBetween(n,2,4))return"few";if(n==1)return"one";return"other"},13:function(n){if(isBetween(n%10,2,4)&&!isBetween(n%100,12,14))return"few";if(n!=1&&isBetween(n%10,0,1)||isBetween(n%10,5,9)||isBetween(n%100,12,14))return"many";if(n==1)return"one";return"other"},14:function(n){if(isBetween(n%100,3,4))return"few";if(n%100==2)return"two";if(n%100==1)return"one";return"other"},15:function(n){if(n===0||isBetween(n%100,2,10))return"few";if(isBetween(n%100,11,19))return"many";if(n==1)return"one";return"other"},16:function(n){if(n%10==1&&n!=11)return"one";return"other"},17:function(n){if(n==3)return"few";if(n===0)return"zero";if(n==6)return"many";if(n==2)return"two";if(n==1)return"one";return"other"},18:function(n){if(n===0)return"zero";if(isBetween(n,0,2)&&n!==0&&n!=2)return"one";return"other"},19:function(n){if(isBetween(n,2,10))return"few";if(isBetween(n,0,1))return"one";return"other"},20:function(n){if((isBetween(n%10,3,4)||n%10==9)&&!(isBetween(n%100,10,19)||isBetween(n%100,70,79)||isBetween(n%100,90,99)))return"few";if(n%1e6===0&&n!==0)return"many";if(n%10==2&&!isIn(n%100,[12,72,92]))return"two";if(n%10==1&&!isIn(n%100,[11,71,91]))return"one";return"other"},21:function(n){if(n===0)return"zero";if(n==1)return"one";return"other"},22:function(n){if(isBetween(n,0,1)||isBetween(n,11,99))return"one";return"other"},23:function(n){if(isBetween(n%10,1,2)||n%20===0)return"one";return"other"},24:function(n){if(isBetween(n,3,10)||isBetween(n,13,19))return"few";if(isIn(n,[2,12]))return"two";if(isIn(n,[1,11]))return"one";return"other"}};var index=locales2rules[lang.replace(/-.*$/,"")];if(!(index in pluralRules)){console.warn("plural form unknown for ["+lang+"]");return function(){return"other"}}return pluralRules[index]}gMacros.plural=function(str,param,key,prop){var n=parseFloat(param);if(isNaN(n))return str;if(prop!=gTextProp)return str;if(!gMacros._pluralRules){gMacros._pluralRules=getPluralRules(gLanguage)}var index="["+gMacros._pluralRules(n)+"]";if(n===0&&key+"[zero]"in gL10nData){str=gL10nData[key+"[zero]"][prop]}else if(n==1&&key+"[one]"in gL10nData){str=gL10nData[key+"[one]"][prop]}else if(n==2&&key+"[two]"in gL10nData){str=gL10nData[key+"[two]"][prop]}else if(key+index in gL10nData){str=gL10nData[key+index][prop]}else if(key+"[other]"in gL10nData){str=gL10nData[key+"[other]"][prop]}return str};function getL10nData(key,args,fallback){var data=gL10nData[key];if(!data){console.warn("#"+key+" is undefined.");if(!fallback){return null}data=fallback}var rv={};for(var prop in data){var str=data[prop];str=substIndexes(str,args,key,prop);str=substArguments(str,args,key);rv[prop]=str}return rv}function substIndexes(str,args,key,prop){var reIndex=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/;var reMatch=reIndex.exec(str);if(!reMatch||!reMatch.length)return str;var macroName=reMatch[1];var paramName=reMatch[2];var param;if(args&&paramName in args){param=args[paramName]}else if(paramName in gL10nData){param=gL10nData[paramName]}if(macroName in gMacros){var macro=gMacros[macroName];str=macro(str,param,key,prop)}return str}function substArguments(str,args,key){var reArgs=/\{\{\s*(.+?)\s*\}\}/g;return str.replace(reArgs,function(matched_text,arg){if(args&&arg in args){return args[arg]}if(arg in gL10nData){return gL10nData[arg]}console.log("argument {{"+arg+"}} for #"+key+" is undefined.");return matched_text})}function translateElement(element){var l10n=getL10nAttributes(element);if(!l10n.id)return;var data=getL10nData(l10n.id,l10n.args);if(!data){console.warn("#"+l10n.id+" is undefined.");return}if(data[gTextProp]){if(getChildElementCount(element)===0){element[gTextProp]=data[gTextProp]}else{var children=element.childNodes;var found=false;for(var i=0,l=children.length;i<l;i++){if(children[i].nodeType===3&&/\S/.test(children[i].nodeValue)){if(found){children[i].nodeValue=""}else{children[i].nodeValue=data[gTextProp];found=true}}}if(!found){var textNode=document.createTextNode(data[gTextProp]);element.insertBefore(textNode,element.firstChild)}}delete data[gTextProp]}for(var k in data){element[k]=data[k]}}function getChildElementCount(element){if(element.children){return element.children.length}if(typeof element.childElementCount!=="undefined"){return element.childElementCount}var count=0;for(var i=0;i<element.childNodes.length;i++){count+=element.nodeType===1?1:0}return count}function translateFragment(element){element=element||document.documentElement;var children=getTranslatableChildren(element);var elementCount=children.length;for(var i=0;i<elementCount;i++){translateElement(children[i])}translateElement(element)}return{get:function(key,args,fallbackString){var index=key.lastIndexOf(".");var prop=gTextProp;if(index>0){prop=key.substr(index+1);key=key.substring(0,index)}var fallback;if(fallbackString){fallback={};fallback[prop]=fallbackString}var data=getL10nData(key,args,fallback);if(data&&prop in data){return data[prop]}return"{{"+key+"}}"},getData:function(){return gL10nData},getText:function(){return gTextData},getLanguage:function(){return gLanguage},setLanguage:function(lang,callback){loadLocale(lang,function(){if(callback)callback();translateFragment()})},getDirection:function(){var rtlList=["ar","he","fa","ps","ur"];var shortCode=gLanguage.split("-",1)[0];return rtlList.indexOf(shortCode)>=0?"rtl":"ltr"},translate:translateFragment,getReadyState:function(){return gReadyState},ready:function(callback){if(!callback){return}else if(gReadyState=="complete"||gReadyState=="interactive"){window.setTimeout(function(){callback()})}else if(document.addEventListener){document.addEventListener("localized",function once(){document.removeEventListener("localized",once);callback()})}}}}(window,document);(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define("pdfjs-dist/build/pdf",["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.pdfjsDistBuildPdf={})}})(this,function(exports){"use strict";var pdfjsVersion="1.3.179";var pdfjsBuild="38645f5";var pdfjsFilePath=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:null;var pdfjsLibs={};(function pdfjsWrapper(){(function(root,factory){{factory(root.pdfjsSharedGlobal={})}})(this,function(exports){var globalScope=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:this;var isWorker=typeof window==="undefined";if(!globalScope.PDFJS){globalScope.PDFJS={}}if(typeof pdfjsVersion!=="undefined"){globalScope.PDFJS.version=pdfjsVersion}if(typeof pdfjsVersion!=="undefined"){globalScope.PDFJS.build=pdfjsBuild}globalScope.PDFJS.pdfBug=false;exports.globalScope=globalScope;exports.isWorker=isWorker;exports.PDFJS=globalScope.PDFJS});(function(root,factory){{factory(root.pdfjsDisplayDOMUtils={},root.pdfjsSharedGlobal)}})(this,function(exports,sharedGlobal){var PDFJS=sharedGlobal.PDFJS;var CustomStyle=function CustomStyleClosure(){var prefixes=["ms","Moz","Webkit","O"];var _cache={};function CustomStyle(){}CustomStyle.getProp=function get(propName,element){if(arguments.length===1&&typeof _cache[propName]==="string"){return _cache[propName]}element=element||document.documentElement;var style=element.style,prefixed,uPropName;if(typeof style[propName]==="string"){return _cache[propName]=propName}uPropName=propName.charAt(0).toUpperCase()+propName.slice(1);for(var i=0,l=prefixes.length;i<l;i++){prefixed=prefixes[i]+uPropName;if(typeof style[prefixed]==="string"){return _cache[propName]=prefixed}}return _cache[propName]="undefined"};CustomStyle.setProp=function set(propName,element,str){var prop=this.getProp(propName);if(prop!=="undefined"){element.style[prop]=str}};return CustomStyle}();PDFJS.CustomStyle=CustomStyle;exports.CustomStyle=CustomStyle});(function(root,factory){{factory(root.pdfjsSharedUtil={},root.pdfjsSharedGlobal)}})(this,function(exports,sharedGlobal){var PDFJS=sharedGlobal.PDFJS;var globalScope=sharedGlobal.globalScope;var FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];var TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};var ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};var AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};var AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9};var FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};var OPS=PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};function info(msg){if(PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos){console.log("Info: "+msg)}}function warn(msg){if(PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings){console.log("Warning: "+msg)}}function deprecated(details){warn("Deprecated API usage: "+details)}function error(msg){if(PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.errors){console.log("Error: "+msg);console.log(backtrace())}throw new Error(msg)}function backtrace(){try{throw new Error}catch(e){return e.stack?e.stack.split("\n").slice(2).join("\n"):""}}function assert(cond,msg){if(!cond){error(msg)}}var UNSUPPORTED_FEATURES=PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};function combineUrl(baseUrl,url){if(!url){return baseUrl}if(/^[a-z][a-z0-9+\-.]*:/i.test(url)){return url}var i;if(url.charAt(0)==="/"){i=baseUrl.indexOf("://");if(url.charAt(1)==="/"){++i}else{i=baseUrl.indexOf("/",i+3)}return baseUrl.substring(0,i)+url}else{var pathLength=baseUrl.length;i=baseUrl.lastIndexOf("#");pathLength=i>=0?i:pathLength;i=baseUrl.lastIndexOf("?",pathLength);pathLength=i>=0?i:pathLength;var prefixLength=baseUrl.lastIndexOf("/",pathLength);return baseUrl.substring(0,prefixLength+1)+url}}function isValidUrl(url,allowRelative){if(!url){return false}var protocol=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(url);if(!protocol){return allowRelative}protocol=protocol[0].toLowerCase();switch(protocol){case"http":case"https":case"ftp":case"mailto":case"tel":return true;default:return false}}PDFJS.isValidUrl=isValidUrl;function shadow(obj,prop,value){Object.defineProperty(obj,prop,{value:value,enumerable:true,configurable:true,writable:false});return value}PDFJS.shadow=shadow;var LinkTarget=PDFJS.LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};var LinkTargetStringMap=["","_self","_blank","_parent","_top"];function isExternalLinkTargetSet(){if(PDFJS.openExternalLinksInNewWindow){deprecated("PDFJS.openExternalLinksInNewWindow, please use "+'"PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.');if(PDFJS.externalLinkTarget===LinkTarget.NONE){PDFJS.externalLinkTarget=LinkTarget.BLANK}PDFJS.openExternalLinksInNewWindow=false}switch(PDFJS.externalLinkTarget){case LinkTarget.NONE:return false;case LinkTarget.SELF:case LinkTarget.BLANK:case LinkTarget.PARENT:case LinkTarget.TOP:return true}warn("PDFJS.externalLinkTarget is invalid: "+PDFJS.externalLinkTarget);PDFJS.externalLinkTarget=LinkTarget.NONE;return false}PDFJS.isExternalLinkTargetSet=isExternalLinkTargetSet;var PasswordResponses=PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var PasswordException=function PasswordExceptionClosure(){function PasswordException(msg,code){this.name="PasswordException";this.message=msg;this.code=code}PasswordException.prototype=new Error;PasswordException.constructor=PasswordException;return PasswordException}();PDFJS.PasswordException=PasswordException;var UnknownErrorException=function UnknownErrorExceptionClosure(){function UnknownErrorException(msg,details){this.name="UnknownErrorException";this.message=msg;this.details=details}UnknownErrorException.prototype=new Error;UnknownErrorException.constructor=UnknownErrorException;return UnknownErrorException}();PDFJS.UnknownErrorException=UnknownErrorException;var InvalidPDFException=function InvalidPDFExceptionClosure(){function InvalidPDFException(msg){this.name="InvalidPDFException";this.message=msg}InvalidPDFException.prototype=new Error;InvalidPDFException.constructor=InvalidPDFException;return InvalidPDFException}();PDFJS.InvalidPDFException=InvalidPDFException;var MissingPDFException=function MissingPDFExceptionClosure(){function MissingPDFException(msg){this.name="MissingPDFException";this.message=msg}MissingPDFException.prototype=new Error;MissingPDFException.constructor=MissingPDFException;return MissingPDFException}();PDFJS.MissingPDFException=MissingPDFException;var UnexpectedResponseException=function UnexpectedResponseExceptionClosure(){function UnexpectedResponseException(msg,status){this.name="UnexpectedResponseException";

this.message=msg;this.status=status}UnexpectedResponseException.prototype=new Error;UnexpectedResponseException.constructor=UnexpectedResponseException;return UnexpectedResponseException}();PDFJS.UnexpectedResponseException=UnexpectedResponseException;var NotImplementedException=function NotImplementedExceptionClosure(){function NotImplementedException(msg){this.message=msg}NotImplementedException.prototype=new Error;NotImplementedException.prototype.name="NotImplementedException";NotImplementedException.constructor=NotImplementedException;return NotImplementedException}();var MissingDataException=function MissingDataExceptionClosure(){function MissingDataException(begin,end){this.begin=begin;this.end=end;this.message="Missing data ["+begin+", "+end+")"}MissingDataException.prototype=new Error;MissingDataException.prototype.name="MissingDataException";MissingDataException.constructor=MissingDataException;return MissingDataException}();var XRefParseException=function XRefParseExceptionClosure(){function XRefParseException(msg){this.message=msg}XRefParseException.prototype=new Error;XRefParseException.prototype.name="XRefParseException";XRefParseException.constructor=XRefParseException;return XRefParseException}();var NullCharactersRegExp=/\x00/g;function removeNullCharacters(str){if(typeof str!=="string"){warn("The argument for removeNullCharacters must be a string.");return str}return str.replace(NullCharactersRegExp,"")}PDFJS.removeNullCharacters=removeNullCharacters;function bytesToString(bytes){assert(bytes!==null&&typeof bytes==="object"&&bytes.length!==undefined,"Invalid argument for bytesToString");var length=bytes.length;var MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes)}var strBuf=[];for(var i=0;i<length;i+=MAX_ARGUMENT_COUNT){var chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);var chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")}function stringToBytes(str){assert(typeof str==="string","Invalid argument for stringToBytes");var length=str.length;var bytes=new Uint8Array(length);for(var i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&255}return bytes}function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,value&255)}function log2(x){var n=1,i=0;while(x>n){n<<=1;i++}return i}function readInt8(data,start){return data[start]<<24>>24}function readUint16(data,offset){return data[offset]<<8|data[offset+1]}function readUint32(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0}function isLittleEndian(){var buffer8=new Uint8Array(2);buffer8[0]=1;var buffer16=new Uint16Array(buffer8.buffer);return buffer16[0]===1}Object.defineProperty(PDFJS,"isLittleEndian",{configurable:true,get:function PDFJS_isLittleEndian(){return shadow(PDFJS,"isLittleEndian",isLittleEndian())}});function hasCanvasTypedArrays(){var canvas=document.createElement("canvas");canvas.width=canvas.height=1;var ctx=canvas.getContext("2d");var imageData=ctx.createImageData(1,1);return typeof imageData.data.buffer!=="undefined"}Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:true,get:function PDFJS_hasCanvasTypedArrays(){return shadow(PDFJS,"hasCanvasTypedArrays",hasCanvasTypedArrays())}});var Uint32ArrayView=function Uint32ArrayViewClosure(){function Uint32ArrayView(buffer,length){this.buffer=buffer;this.byteLength=buffer.length;this.length=length===undefined?this.byteLength>>2:length;ensureUint32ArrayViewProps(this.length)}Uint32ArrayView.prototype=Object.create(null);var uint32ArrayViewSetters=0;function createUint32ArrayProp(index){return{get:function(){var buffer=this.buffer,offset=index<<2;return(buffer[offset]|buffer[offset+1]<<8|buffer[offset+2]<<16|buffer[offset+3]<<24)>>>0},set:function(value){var buffer=this.buffer,offset=index<<2;buffer[offset]=value&255;buffer[offset+1]=value>>8&255;buffer[offset+2]=value>>16&255;buffer[offset+3]=value>>>24&255}}}function ensureUint32ArrayViewProps(length){while(uint32ArrayViewSetters<length){Object.defineProperty(Uint32ArrayView.prototype,uint32ArrayViewSetters,createUint32ArrayProp(uint32ArrayViewSetters));uint32ArrayViewSetters++}}return Uint32ArrayView}();exports.Uint32ArrayView=Uint32ArrayView;var IDENTITY_MATRIX=[1,0,0,1,0,0];var Util=PDFJS.Util=function UtilClosure(){function Util(){}var rgbBuf=["rgb(",0,",",0,",",0,")"];Util.makeCssRgb=function Util_makeCssRgb(r,g,b){rgbBuf[1]=r;rgbBuf[3]=g;rgbBuf[5]=b;return rgbBuf.join("")};Util.transform=function Util_transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]};Util.applyTransform=function Util_applyTransform(p,m){var xt=p[0]*m[0]+p[1]*m[2]+m[4];var yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt]};Util.applyInverseTransform=function Util_applyInverseTransform(p,m){var d=m[0]*m[3]-m[1]*m[2];var xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;var yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt]};Util.getAxialAlignedBoundingBox=function Util_getAxialAlignedBoundingBox(r,m){var p1=Util.applyTransform(r,m);var p2=Util.applyTransform(r.slice(2,4),m);var p3=Util.applyTransform([r[0],r[3]],m);var p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]};Util.inverseTransform=function Util_inverseTransform(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]};Util.apply3dTransform=function Util_apply3dTransform(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]};Util.singularValueDecompose2dScale=function Util_singularValueDecompose2dScale(m){var transpose=[m[0],m[2],m[1],m[3]];var a=m[0]*transpose[0]+m[1]*transpose[2];var b=m[0]*transpose[1]+m[1]*transpose[3];var c=m[2]*transpose[0]+m[3]*transpose[2];var d=m[2]*transpose[1]+m[3]*transpose[3];var first=(a+d)/2;var second=Math.sqrt((a+d)*(a+d)-4*(a*d-c*b))/2;var sx=first+second||1;var sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]};Util.normalizeRect=function Util_normalizeRect(rect){var r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0]}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1]}return r};Util.intersect=function Util_intersect(rect1,rect2){function compare(a,b){return a-b}var orderedX=[rect1[0],rect1[2],rect2[0],rect2[2]].sort(compare),orderedY=[rect1[1],rect1[3],rect2[1],rect2[3]].sort(compare),result=[];rect1=Util.normalizeRect(rect1);rect2=Util.normalizeRect(rect2);if(orderedX[0]===rect1[0]&&orderedX[1]===rect2[0]||orderedX[0]===rect2[0]&&orderedX[1]===rect1[0]){result[0]=orderedX[1];result[2]=orderedX[2]}else{return false}if(orderedY[0]===rect1[1]&&orderedY[1]===rect2[1]||orderedY[0]===rect2[1]&&orderedY[1]===rect1[1]){result[1]=orderedY[1];result[3]=orderedY[2]}else{return false}return result};Util.sign=function Util_sign(num){return num<0?-1:1};Util.appendToArray=function Util_appendToArray(arr1,arr2){Array.prototype.push.apply(arr1,arr2)};Util.prependToArray=function Util_prependToArray(arr1,arr2){Array.prototype.unshift.apply(arr1,arr2)};Util.extendObj=function extendObj(obj1,obj2){for(var key in obj2){obj1[key]=obj2[key]}};Util.getInheritableProperty=function Util_getInheritableProperty(dict,name){while(dict&&!dict.has(name)){dict=dict.get("Parent")}if(!dict){return null}return dict.get(name)};Util.inherit=function Util_inherit(sub,base,prototype){sub.prototype=Object.create(base.prototype);sub.prototype.constructor=sub;for(var prop in prototype){sub.prototype[prop]=prototype[prop]}};Util.loadScript=function Util_loadScript(src,callback){var script=document.createElement("script");var loaded=false;script.setAttribute("src",src);if(callback){script.onload=function(){if(!loaded){callback()}loaded=true}}document.getElementsByTagName("head")[0].appendChild(script)};return Util}();var PageViewport=PDFJS.PageViewport=function PageViewportClosure(){function PageViewport(viewBox,scale,rotation,offsetX,offsetY,dontFlip){this.viewBox=viewBox;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;var centerX=(viewBox[2]+viewBox[0])/2;var centerY=(viewBox[3]+viewBox[1])/2;var rotateA,rotateB,rotateC,rotateD;rotation=rotation%360;rotation=rotation<0?rotation+360:rotation;switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;default:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break}if(dontFlip){rotateC=-rotateC;rotateD=-rotateD}var offsetCanvasX,offsetCanvasY;var width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=Math.abs(viewBox[3]-viewBox[1])*scale;height=Math.abs(viewBox[2]-viewBox[0])*scale}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=Math.abs(viewBox[2]-viewBox[0])*scale;height=Math.abs(viewBox[3]-viewBox[1])*scale}this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;this.fontScale=scale}PageViewport.prototype={clone:function PageViewPort_clone(args){args=args||{};var scale="scale"in args?args.scale:this.scale;var rotation="rotation"in args?args.rotation:this.rotation;return new PageViewport(this.viewBox.slice(),scale,rotation,this.offsetX,this.offsetY,args.dontFlip)},convertToViewportPoint:function PageViewport_convertToViewportPoint(x,y){return Util.applyTransform([x,y],this.transform)},convertToViewportRectangle:function PageViewport_convertToViewportRectangle(rect){var tl=Util.applyTransform([rect[0],rect[1]],this.transform);var br=Util.applyTransform([rect[2],rect[3]],this.transform);return[tl[0],tl[1],br[0],br[1]]},convertToPdfPoint:function PageViewport_convertToPdfPoint(x,y){return Util.applyInverseTransform([x,y],this.transform)}};return PageViewport}();var PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToPDFString(str){var i,n=str.length,strBuf=[];if(str[0]==="þ"&&str[1]==="ÿ"){for(i=2;i<n;i+=2){strBuf.push(String.fromCharCode(str.charCodeAt(i)<<8|str.charCodeAt(i+1)))}}else{for(i=0;i<n;++i){var code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i))}}return strBuf.join("")}function stringToUTF8String(str){return decodeURIComponent(escape(str))}function utf8StringToString(str){return unescape(encodeURIComponent(str))}function isEmptyObj(obj){for(var key in obj){return false}return true}function isBool(v){return typeof v==="boolean"}function isInt(v){return typeof v==="number"&&(v|0)===v}function isNum(v){return typeof v==="number"}function isString(v){return typeof v==="string"}function isArray(v){return v instanceof Array}function isArrayBuffer(v){return typeof v==="object"&&v!==null&&v.byteLength!==undefined}function createPromiseCapability(){var capability={};capability.promise=new Promise(function(resolve,reject){capability.resolve=resolve;capability.reject=reject});return capability}PDFJS.createPromiseCapability=createPromiseCapability;(function PromiseClosure(){if(globalScope.Promise){if(typeof globalScope.Promise.all!=="function"){globalScope.Promise.all=function(iterable){var count=0,results=[],resolve,reject;var promise=new globalScope.Promise(function(resolve_,reject_){resolve=resolve_;reject=reject_});iterable.forEach(function(p,i){count++;p.then(function(result){results[i]=result;count--;if(count===0){resolve(results)}},reject)});if(count===0){resolve(results)}return promise}}if(typeof globalScope.Promise.resolve!=="function"){globalScope.Promise.resolve=function(value){return new globalScope.Promise(function(resolve){resolve(value)})}}if(typeof globalScope.Promise.reject!=="function"){globalScope.Promise.reject=function(reason){return new globalScope.Promise(function(resolve,reject){reject(reason)})}}if(typeof globalScope.Promise.prototype.catch!=="function"){globalScope.Promise.prototype.catch=function(onReject){return globalScope.Promise.prototype.then(undefined,onReject)}}return}var STATUS_PENDING=0;var STATUS_RESOLVED=1;var STATUS_REJECTED=2;var REJECTION_TIMEOUT=500;var HandlerManager={handlers:[],running:false,unhandledRejections:[],pendingRejectionCheck:false,scheduleHandlers:function scheduleHandlers(promise){if(promise._status===STATUS_PENDING){return}this.handlers=this.handlers.concat(promise._handlers);promise._handlers=[];if(this.running){return}this.running=true;setTimeout(this.runHandlers.bind(this),0)},runHandlers:function runHandlers(){var RUN_TIMEOUT=1;var timeoutAt=Date.now()+RUN_TIMEOUT;while(this.handlers.length>0){var handler=this.handlers.shift();var nextStatus=handler.thisPromise._status;var nextValue=handler.thisPromise._value;try{if(nextStatus===STATUS_RESOLVED){if(typeof handler.onResolve==="function"){nextValue=handler.onResolve(nextValue)}}else if(typeof handler.onReject==="function"){nextValue=handler.onReject(nextValue);nextStatus=STATUS_RESOLVED;if(handler.thisPromise._unhandledRejection){this.removeUnhandeledRejection(handler.thisPromise)}}}catch(ex){nextStatus=STATUS_REJECTED;nextValue=ex}handler.nextPromise._updateStatus(nextStatus,nextValue);if(Date.now()>=timeoutAt){break}}if(this.handlers.length>0){setTimeout(this.runHandlers.bind(this),0);return}this.running=false},addUnhandledRejection:function addUnhandledRejection(promise){this.unhandledRejections.push({promise:promise,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function removeUnhandeledRejection(promise){promise._unhandledRejection=false;for(var i=0;i<this.unhandledRejections.length;i++){if(this.unhandledRejections[i].promise===promise){this.unhandledRejections.splice(i);i--}}},scheduleRejectionCheck:function scheduleRejectionCheck(){if(this.pendingRejectionCheck){return}this.pendingRejectionCheck=true;setTimeout(function rejectionCheck(){this.pendingRejectionCheck=false;var now=Date.now();for(var i=0;i<this.unhandledRejections.length;i++){if(now-this.unhandledRejections[i].time>REJECTION_TIMEOUT){var unhandled=this.unhandledRejections[i].promise._value;var msg="Unhandled rejection: "+unhandled;if(unhandled.stack){msg+="\n"+unhandled.stack}warn(msg);this.unhandledRejections.splice(i);i--}}if(this.unhandledRejections.length){this.scheduleRejectionCheck()}}.bind(this),REJECTION_TIMEOUT)}};function Promise(resolver){this._status=STATUS_PENDING;this._handlers=[];try{resolver.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(e){this._reject(e)}}Promise.all=function Promise_all(promises){var resolveAll,rejectAll;var deferred=new Promise(function(resolve,reject){resolveAll=resolve;rejectAll=reject});var unresolved=promises.length;var results=[];if(unresolved===0){resolveAll(results);return deferred}function reject(reason){if(deferred._status===STATUS_REJECTED){return}results=[];rejectAll(reason)}for(var i=0,ii=promises.length;i<ii;++i){var promise=promises[i];var resolve=function(i){return function(value){if(deferred._status===STATUS_REJECTED){return}results[i]=value;unresolved--;if(unresolved===0){resolveAll(results)}}}(i);if(Promise.isPromise(promise)){promise.then(resolve,reject)}else{resolve(promise)}}return deferred};Promise.isPromise=function Promise_isPromise(value){return value&&typeof value.then==="function"};Promise.resolve=function Promise_resolve(value){return new Promise(function(resolve){resolve(value)})};Promise.reject=function Promise_reject(reason){return new Promise(function(resolve,reject){reject(reason)})};Promise.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function Promise__updateStatus(status,value){if(this._status===STATUS_RESOLVED||this._status===STATUS_REJECTED){return}if(status===STATUS_RESOLVED&&Promise.isPromise(value)){value.then(this._updateStatus.bind(this,STATUS_RESOLVED),this._updateStatus.bind(this,STATUS_REJECTED));return}this._status=status;this._value=value;if(status===STATUS_REJECTED&&this._handlers.length===0){this._unhandledRejection=true;HandlerManager.addUnhandledRejection(this)}HandlerManager.scheduleHandlers(this)},_resolve:function Promise_resolve(value){this._updateStatus(STATUS_RESOLVED,value)},_reject:function Promise_reject(reason){this._updateStatus(STATUS_REJECTED,reason)},then:function Promise_then(onResolve,onReject){var nextPromise=new Promise(function(resolve,reject){this.resolve=resolve;this.reject=reject});this._handlers.push({thisPromise:this,onResolve:onResolve,onReject:onReject,nextPromise:nextPromise});HandlerManager.scheduleHandlers(this);return nextPromise},"catch":function Promise_catch(onReject){return this.then(undefined,onReject)}};globalScope.Promise=Promise})();var StatTimer=function StatTimerClosure(){function rpad(str,pad,length){while(str.length<length){str+=pad}return str}function StatTimer(){this.started={};this.times=[];this.enabled=true}StatTimer.prototype={time:function StatTimer_time(name){if(!this.enabled){return}if(name in this.started){warn("Timer is already running for "+name)}this.started[name]=Date.now()},timeEnd:function StatTimer_timeEnd(name){if(!this.enabled){return}if(!(name in this.started)){warn("Timer has not been started for "+name)}this.times.push({name:name,start:this.started[name],end:Date.now()});delete this.started[name]},toString:function StatTimer_toString(){var i,ii;var times=this.times;var out="";var longest=0;for(i=0,ii=times.length;i<ii;++i){var name=times[i]["name"];if(name.length>longest){longest=name.length}}for(i=0,ii=times.length;i<ii;++i){var span=times[i];var duration=span.end-span.start;out+=rpad(span["name"]," ",longest)+" "+duration+"ms\n"}return out}};return StatTimer}();PDFJS.createBlob=function createBlob(data,contentType){if(typeof Blob!=="undefined"){return new Blob([data],{type:contentType})}var bb=new MozBlobBuilder;bb.append(data);return bb.getBlob(contentType)};PDFJS.createObjectURL=function createObjectURLClosure(){var digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function createObjectURL(data,contentType){if(!PDFJS.disableCreateObjectURL&&typeof URL!=="undefined"&&URL.createObjectURL){var blob=PDFJS.createBlob(data,contentType);return URL.createObjectURL(blob)}var buffer="data:"+contentType+";base64,";for(var i=0,ii=data.length;i<ii;i+=3){var b1=data[i]&255;var b2=data[i+1]&255;var b3=data[i+2]&255;var d1=b1>>2,d2=(b1&3)<<4|b2>>4;var d3=i+1<ii?(b2&15)<<2|b3>>6:64;var d4=i+2<ii?b3&63:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer}}();function MessageHandler(sourceName,targetName,comObj){this.sourceName=sourceName;this.targetName=targetName;this.comObj=comObj;this.callbackIndex=1;this.postMessageTransfers=true;var callbacksCapabilities=this.callbacksCapabilities={};var ah=this.actionHandler={};this._onComObjOnMessage=function messageHandlerComObjOnMessage(event){var data=event.data;if(data.targetName!==this.sourceName){return}if(data.isReply){var callbackId=data.callbackId;if(data.callbackId in callbacksCapabilities){var callback=callbacksCapabilities[callbackId];delete callbacksCapabilities[callbackId];if("error"in data){callback.reject(data.error)}else{callback.resolve(data.data)}}else{error("Cannot resolve callback "+callbackId)}}else if(data.action in ah){var action=ah[data.action];if(data.callbackId){var sourceName=this.sourceName;var targetName=data.sourceName;Promise.resolve().then(function(){return action[0].call(action[1],data.data)}).then(function(result){comObj.postMessage({sourceName:sourceName,targetName:targetName,isReply:true,callbackId:data.callbackId,data:result})},function(reason){if(reason instanceof Error){reason=reason+""}comObj.postMessage({sourceName:sourceName,targetName:targetName,isReply:true,callbackId:data.callbackId,error:reason})})}else{action[0].call(action[1],data.data)}}else{error("Unknown action from worker: "+data.action)}}.bind(this);comObj.addEventListener("message",this._onComObjOnMessage)}MessageHandler.prototype={on:function messageHandlerOn(actionName,handler,scope){var ah=this.actionHandler;if(ah[actionName]){error('There is already an actionName called "'+actionName+'"')}ah[actionName]=[handler,scope]},send:function messageHandlerSend(actionName,data,transfers){var message={sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data};this.postMessage(message,transfers)},sendWithPromise:function messageHandlerSendWithPromise(actionName,data,transfers){var callbackId=this.callbackIndex++;var message={sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data,callbackId:callbackId};var capability=createPromiseCapability();this.callbacksCapabilities[callbackId]=capability;try{this.postMessage(message,transfers)}catch(e){capability.reject(e)}return capability.promise},postMessage:function(message,transfers){if(transfers&&this.postMessageTransfers){this.comObj.postMessage(message,transfers)}else{this.comObj.postMessage(message)}},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};function loadJpegStream(id,imageUrl,objs){var img=new Image;img.onload=function loadJpegStream_onloadClosure(){objs.resolve(id,img)};img.onerror=function loadJpegStream_onerrorClosure(){objs.resolve(id,null);warn("Error during JPEG image loading")};img.src=imageUrl}exports.FONT_IDENTITY_MATRIX=FONT_IDENTITY_MATRIX;exports.IDENTITY_MATRIX=IDENTITY_MATRIX;exports.OPS=OPS;exports.UNSUPPORTED_FEATURES=UNSUPPORTED_FEATURES;exports.AnnotationBorderStyleType=AnnotationBorderStyleType;exports.AnnotationFlag=AnnotationFlag;exports.AnnotationType=AnnotationType;exports.FontType=FontType;exports.ImageKind=ImageKind;exports.InvalidPDFException=InvalidPDFException;exports.LinkTarget=LinkTarget;exports.LinkTargetStringMap=LinkTargetStringMap;exports.MessageHandler=MessageHandler;exports.MissingDataException=MissingDataException;exports.MissingPDFException=MissingPDFException;exports.NotImplementedException=NotImplementedException;exports.PasswordException=PasswordException;exports.PasswordResponses=PasswordResponses;exports.StatTimer=StatTimer;exports.StreamType=StreamType;exports.TextRenderingMode=TextRenderingMode;exports.UnexpectedResponseException=UnexpectedResponseException;exports.UnknownErrorException=UnknownErrorException;exports.Util=Util;exports.XRefParseException=XRefParseException;exports.assert=assert;exports.bytesToString=bytesToString;exports.combineUrl=combineUrl;exports.createPromiseCapability=createPromiseCapability;exports.deprecated=deprecated;exports.error=error;exports.info=info;exports.isArray=isArray;exports.isArrayBuffer=isArrayBuffer;exports.isBool=isBool;exports.isEmptyObj=isEmptyObj;exports.isExternalLinkTargetSet=isExternalLinkTargetSet;exports.isInt=isInt;exports.isNum=isNum;exports.isString=isString;exports.isValidUrl=isValidUrl;exports.loadJpegStream=loadJpegStream;exports.log2=log2;exports.readInt8=readInt8;exports.readUint16=readUint16;exports.readUint32=readUint32;exports.removeNullCharacters=removeNullCharacters;exports.shadow=shadow;exports.string32=string32;exports.stringToBytes=stringToBytes;exports.stringToPDFString=stringToPDFString;exports.stringToUTF8String=stringToUTF8String;exports.utf8StringToString=utf8StringToString;exports.warn=warn});(function(root,factory){{factory(root.pdfjsDisplayAnnotationLayer={},root.pdfjsSharedUtil,root.pdfjsDisplayDOMUtils)}})(this,function(exports,sharedUtil,displayDOMUtils){var AnnotationBorderStyleType=sharedUtil.AnnotationBorderStyleType;var AnnotationType=sharedUtil.AnnotationType;var Util=sharedUtil.Util;var isExternalLinkTargetSet=sharedUtil.isExternalLinkTargetSet;var LinkTargetStringMap=sharedUtil.LinkTargetStringMap;var removeNullCharacters=sharedUtil.removeNullCharacters;var warn=sharedUtil.warn;var CustomStyle=displayDOMUtils.CustomStyle;function AnnotationElementFactory(){}AnnotationElementFactory.prototype={create:function AnnotationElementFactory_create(parameters){var subtype=parameters.data.annotationType;switch(subtype){case AnnotationType.LINK:return new LinkAnnotationElement(parameters);case AnnotationType.TEXT:return new TextAnnotationElement(parameters);case AnnotationType.WIDGET:return new WidgetAnnotationElement(parameters);case AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);default:throw new Error('Unimplemented annotation type "'+subtype+'"')}}};var AnnotationElement=function AnnotationElementClosure(){function AnnotationElement(parameters){this.data=parameters.data;this.layer=parameters.layer;this.page=parameters.page;this.viewport=parameters.viewport;this.linkService=parameters.linkService;this.container=this._createContainer()}AnnotationElement.prototype={_createContainer:function AnnotationElement_createContainer(){var data=this.data,page=this.page,viewport=this.viewport;var container=document.createElement("section");var width=data.rect[2]-data.rect[0];var height=data.rect[3]-data.rect[1];container.setAttribute("data-annotation-id",data.id);var rect=Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);CustomStyle.setProp("transform",container,"matrix("+viewport.transform.join(",")+")");CustomStyle.setProp("transformOrigin",container,-rect[0]+"px "+-rect[1]+"px");if(data.borderStyle.width>0){container.style.borderWidth=data.borderStyle.width+"px";if(data.borderStyle.style!==AnnotationBorderStyleType.UNDERLINE){width=width-2*data.borderStyle.width;height=height-2*data.borderStyle.width}var horizontalRadius=data.borderStyle.horizontalCornerRadius;var verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){var radius=horizontalRadius+"px / "+verticalRadius+"px";CustomStyle.setProp("borderRadius",container,radius)}switch(data.borderStyle.style){case AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid";break;default:break}if(data.color){container.style.borderColor=Util.makeCssRgb(data.color[0]|0,data.color[1]|0,data.color[2]|0)}else{container.style.borderWidth=0}}container.style.left=rect[0]+"px";container.style.top=rect[1]+"px";container.style.width=width+"px";container.style.height=height+"px";return container},render:function AnnotationElement_render(){throw new Error("Abstract method AnnotationElement.render called")}};return AnnotationElement}();var LinkAnnotationElement=function LinkAnnotationElementClosure(){function LinkAnnotationElement(parameters){AnnotationElement.call(this,parameters)}Util.inherit(LinkAnnotationElement,AnnotationElement,{render:function LinkAnnotationElement_render(){this.container.className="linkAnnotation";var link=document.createElement("a");link.href=link.title=this.data.url?removeNullCharacters(this.data.url):"";if(this.data.url&&isExternalLinkTargetSet()){link.target=LinkTargetStringMap[PDFJS.externalLinkTarget]}if(this.data.url){link.rel=PDFJS.externalLinkRel}if(!this.data.url){if(this.data.action){this._bindNamedAction(link,this.data.action)}else{this._bindLink(link,"dest"in this.data?this.data.dest:null)}}this.container.appendChild(link);return this.container},_bindLink:function LinkAnnotationElement_bindLink(link,destination){var self=this;link.href=this.linkService.getDestinationHash(destination);link.onclick=function(){if(destination){self.linkService.navigateTo(destination)}return false};if(destination){link.className="internalLink"}},_bindNamedAction:function LinkAnnotationElement_bindNamedAction(link,action){var self=this;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){self.linkService.executeNamedAction(action);return false};link.className="internalLink"}});return LinkAnnotationElement}();var TextAnnotationElement=function TextAnnotationElementClosure(){function TextAnnotationElement(parameters){AnnotationElement.call(this,parameters)}Util.inherit(TextAnnotationElement,AnnotationElement,{render:function TextAnnotationElement_render(){this.container.className="textAnnotation";var image=document.createElement("img");image.style.height=this.container.style.height;image.style.width=this.container.style.width;image.src=PDFJS.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";image.alt="[{{type}} Annotation]";image.dataset.l10nId="text_annotation_type";image.dataset.l10nArgs=JSON.stringify({type:this.data.name});if(!this.data.hasPopup){var popupElement=new PopupElement({container:this.container,trigger:image,color:this.data.color,title:this.data.title,contents:this.data.contents,hideWrapper:true});var popup=popupElement.render();popup.style.left=image.style.width;this.container.appendChild(popup)}this.container.appendChild(image);return this.container}});return TextAnnotationElement}();var WidgetAnnotationElement=function WidgetAnnotationElementClosure(){function WidgetAnnotationElement(parameters){AnnotationElement.call(this,parameters)}Util.inherit(WidgetAnnotationElement,AnnotationElement,{render:function WidgetAnnotationElement_render(){var content=document.createElement("div");content.textContent=this.data.fieldValue;var textAlignment=this.data.textAlignment;content.style.textAlign=["left","center","right"][textAlignment];content.style.verticalAlign="middle";content.style.display="table-cell";var font=this.data.fontRefName?this.page.commonObjs.getData(this.data.fontRefName):null;this._setTextStyle(content,font);this.container.appendChild(content);return this.container},_setTextStyle:function WidgetAnnotationElement_setTextStyle(element,font){var style=element.style;style.fontSize=this.data.fontSize+"px";style.direction=this.data.fontDirection<0?"rtl":"ltr";if(!font){return}style.fontWeight=font.black?font.bold?"900":"bold":font.bold?"bold":"normal";style.fontStyle=font.italic?"italic":"normal";var fontFamily=font.loadedName?'"'+font.loadedName+'", ':"";var fallbackName=font.fallbackName||"Helvetica, sans-serif";style.fontFamily=fontFamily+fallbackName}});return WidgetAnnotationElement}();var PopupAnnotationElement=function PopupAnnotationElementClosure(){function PopupAnnotationElement(parameters){AnnotationElement.call(this,parameters)}Util.inherit(PopupAnnotationElement,AnnotationElement,{render:function PopupAnnotationElement_render(){this.container.className="popupAnnotation";var selector='[data-annotation-id="'+this.data.parentId+'"]';var parentElement=this.layer.querySelector(selector);if(!parentElement){return this.container}var popup=new PopupElement({container:this.container,trigger:parentElement,color:this.data.color,title:this.data.title,contents:this.data.contents});var parentLeft=parseFloat(parentElement.style.left);var parentWidth=parseFloat(parentElement.style.width);CustomStyle.setProp("transformOrigin",this.container,-(parentLeft+parentWidth)+"px -"+parentElement.style.top);

this.container.style.left=parentLeft+parentWidth+"px";this.container.appendChild(popup.render());return this.container}});return PopupAnnotationElement}();var PopupElement=function PopupElementClosure(){var BACKGROUND_ENLIGHT=.7;function PopupElement(parameters){this.container=parameters.container;this.trigger=parameters.trigger;this.color=parameters.color;this.title=parameters.title;this.contents=parameters.contents;this.hideWrapper=parameters.hideWrapper||false;this.pinned=false}PopupElement.prototype={render:function PopupElement_render(){var wrapper=document.createElement("div");wrapper.className="popupWrapper";this.hideElement=this.hideWrapper?wrapper:this.container;this.hideElement.setAttribute("hidden",true);var popup=document.createElement("div");popup.className="popup";var color=this.color;if(color){var r=BACKGROUND_ENLIGHT*(255-color[0])+color[0];var g=BACKGROUND_ENLIGHT*(255-color[1])+color[1];var b=BACKGROUND_ENLIGHT*(255-color[2])+color[2];popup.style.backgroundColor=Util.makeCssRgb(r|0,g|0,b|0)}var contents=this._formatContents(this.contents);var title=document.createElement("h1");title.textContent=this.title;this.trigger.addEventListener("click",this._toggle.bind(this));this.trigger.addEventListener("mouseover",this._show.bind(this,false));this.trigger.addEventListener("mouseout",this._hide.bind(this,false));popup.addEventListener("click",this._hide.bind(this,true));popup.appendChild(title);popup.appendChild(contents);wrapper.appendChild(popup);return wrapper},_formatContents:function PopupElement_formatContents(contents){var p=document.createElement("p");var lines=contents.split(/(?:\r\n?|\n)/);for(var i=0,ii=lines.length;i<ii;++i){var line=lines[i];p.appendChild(document.createTextNode(line));if(i<ii-1){p.appendChild(document.createElement("br"))}}return p},_toggle:function PopupElement_toggle(){if(this.pinned){this._hide(true)}else{this._show(true)}},_show:function PopupElement_show(pin){if(pin){this.pinned=true}if(this.hideElement.hasAttribute("hidden")){this.hideElement.removeAttribute("hidden");this.container.style.zIndex+=1}},_hide:function PopupElement_hide(unpin){if(unpin){this.pinned=false}if(!this.hideElement.hasAttribute("hidden")&&!this.pinned){this.hideElement.setAttribute("hidden",true);this.container.style.zIndex-=1}}};return PopupElement}();var HighlightAnnotationElement=function HighlightAnnotationElementClosure(){function HighlightAnnotationElement(parameters){AnnotationElement.call(this,parameters)}Util.inherit(HighlightAnnotationElement,AnnotationElement,{render:function HighlightAnnotationElement_render(){this.container.className="highlightAnnotation";return this.container}});return HighlightAnnotationElement}();var UnderlineAnnotationElement=function UnderlineAnnotationElementClosure(){function UnderlineAnnotationElement(parameters){AnnotationElement.call(this,parameters)}Util.inherit(UnderlineAnnotationElement,AnnotationElement,{render:function UnderlineAnnotationElement_render(){this.container.className="underlineAnnotation";return this.container}});return UnderlineAnnotationElement}();var SquigglyAnnotationElement=function SquigglyAnnotationElementClosure(){function SquigglyAnnotationElement(parameters){AnnotationElement.call(this,parameters)}Util.inherit(SquigglyAnnotationElement,AnnotationElement,{render:function SquigglyAnnotationElement_render(){this.container.className="squigglyAnnotation";return this.container}});return SquigglyAnnotationElement}();var StrikeOutAnnotationElement=function StrikeOutAnnotationElementClosure(){function StrikeOutAnnotationElement(parameters){AnnotationElement.call(this,parameters)}Util.inherit(StrikeOutAnnotationElement,AnnotationElement,{render:function StrikeOutAnnotationElement_render(){this.container.className="strikeoutAnnotation";return this.container}});return StrikeOutAnnotationElement}();var AnnotationLayer=function AnnotationLayerClosure(){return{render:function AnnotationLayer_render(parameters){var annotationElementFactory=new AnnotationElementFactory;for(var i=0,ii=parameters.annotations.length;i<ii;i++){var data=parameters.annotations[i];if(!data||!data.hasHtml){continue}var properties={data:data,layer:parameters.div,page:parameters.page,viewport:parameters.viewport,linkService:parameters.linkService};var element=annotationElementFactory.create(properties);parameters.div.appendChild(element.render())}},update:function AnnotationLayer_update(parameters){for(var i=0,ii=parameters.annotations.length;i<ii;i++){var data=parameters.annotations[i];var element=parameters.div.querySelector('[data-annotation-id="'+data.id+'"]');if(element){CustomStyle.setProp("transform",element,"matrix("+parameters.viewport.transform.join(",")+")")}}parameters.div.removeAttribute("hidden")}}}();PDFJS.AnnotationLayer=AnnotationLayer;exports.AnnotationLayer=AnnotationLayer});(function(root,factory){{factory(root.pdfjsDisplayFontLoader={},root.pdfjsSharedUtil,root.pdfjsSharedGlobal)}})(this,function(exports,sharedUtil,sharedGlobal){var assert=sharedUtil.assert;var bytesToString=sharedUtil.bytesToString;var string32=sharedUtil.string32;var shadow=sharedUtil.shadow;var warn=sharedUtil.warn;var PDFJS=sharedGlobal.PDFJS;var globalScope=sharedGlobal.globalScope;var isWorker=sharedGlobal.isWorker;function FontLoader(docId){this.docId=docId;this.styleElement=null;this.nativeFontFaces=[];this.loadTestFontId=0;this.loadingContext={requests:[],nextRequestId:0}}FontLoader.prototype={insertRule:function fontLoaderInsertRule(rule){var styleElement=this.styleElement;if(!styleElement){styleElement=this.styleElement=document.createElement("style");styleElement.id="PDFJS_FONT_STYLE_TAG_"+this.docId;document.documentElement.getElementsByTagName("head")[0].appendChild(styleElement)}var styleSheet=styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)},clear:function fontLoaderClear(){var styleElement=this.styleElement;if(styleElement){styleElement.parentNode.removeChild(styleElement);styleElement=this.styleElement=null}this.nativeFontFaces.forEach(function(nativeFontFace){document.fonts.delete(nativeFontFace)});this.nativeFontFaces.length=0},get loadTestFont(){return shadow(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQ"+"AABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwA"+"AAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbm"+"FtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAA"+"AADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6A"+"ABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAA"+"MQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAA"+"AAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAA"+"AAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQ"+"AAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMA"+"AQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAA"+"EAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAA"+"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAA"+"AAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgc"+"A/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWF"+"hYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQA"+"AAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAg"+"ABAAAAAAAAAAAD6AAAAAAAAA=="))},addNativeFontFace:function fontLoader_addNativeFontFace(nativeFontFace){this.nativeFontFaces.push(nativeFontFace);document.fonts.add(nativeFontFace)},bind:function fontLoaderBind(fonts,callback){assert(!isWorker,"bind() shall be called from main thread");var rules=[];var fontsToLoad=[];var fontLoadPromises=[];var getNativeFontPromise=function(nativeFontFace){return nativeFontFace.loaded.catch(function(e){warn('Failed to load font "'+nativeFontFace.family+'": '+e)})};for(var i=0,ii=fonts.length;i<ii;i++){var font=fonts[i];if(font.attached||font.loading===false){continue}font.attached=true;if(FontLoader.isFontLoadingAPISupported){var nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);fontLoadPromises.push(getNativeFontPromise(nativeFontFace))}}else{var rule=font.createFontFaceRule();if(rule){this.insertRule(rule);rules.push(rule);fontsToLoad.push(font)}}}var request=this.queueLoadingCallback(callback);if(FontLoader.isFontLoadingAPISupported){Promise.all(fontLoadPromises).then(function(){request.complete()})}else if(rules.length>0&&!FontLoader.isSyncFontLoadingSupported){this.prepareFontLoadEvent(rules,fontsToLoad,request)}else{request.complete()}},queueLoadingCallback:function FontLoader_queueLoadingCallback(callback){function LoadLoader_completeRequest(){assert(!request.end,"completeRequest() cannot be called twice");request.end=Date.now();while(context.requests.length>0&&context.requests[0].end){var otherRequest=context.requests.shift();setTimeout(otherRequest.callback,0)}}var context=this.loadingContext;var requestId="pdfjs-font-loading-"+context.nextRequestId++;var request={id:requestId,complete:LoadLoader_completeRequest,callback:callback,started:Date.now()};context.requests.push(request);return request},prepareFontLoadEvent:function fontLoaderPrepareFontLoadEvent(rules,fonts,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&255}function spliceString(s,offset,remove,insert){var chunk1=s.substr(0,offset);var chunk2=s.substr(offset+remove);return chunk1+insert+chunk2}var i,ii;var canvas=document.createElement("canvas");canvas.width=1;canvas.height=1;var ctx=canvas.getContext("2d");var called=0;function isFontReady(name,callback){called++;if(called>30){warn("Load test font never loaded.");callback();return}ctx.font="30px "+name;ctx.fillText(".",0,20);var imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return}setTimeout(isFontReady.bind(null,name,callback))}var loadTestFontId="lt"+Date.now()+this.loadTestFontId++;var data=this.loadTestFont;var COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);var CFF_CHECKSUM_OFFSET=16;var XXXX_VALUE=1482184792;var checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0}if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+"XXX",i)|0}data=spliceString(data,CFF_CHECKSUM_OFFSET,4,string32(checksum));var url="url(data:font/opentype;base64,"+btoa(data)+");";var rule='@font-face { font-family:"'+loadTestFontId+'";src:'+url+"}";this.insertRule(rule);var names=[];for(i=0,ii=fonts.length;i<ii;i++){names.push(fonts[i].loadedName)}names.push(loadTestFontId);var div=document.createElement("div");div.setAttribute("style","visibility: hidden;"+"width: 10px; height: 10px;"+"position: absolute; top: 0px; left: 0px;");for(i=0,ii=names.length;i<ii;++i){var span=document.createElement("span");span.textContent="Hi";span.style.fontFamily=names[i];div.appendChild(span)}document.body.appendChild(div);isFontReady(loadTestFontId,function(){document.body.removeChild(div);request.complete()})}};FontLoader.isFontLoadingAPISupported=!isWorker&&typeof document!=="undefined"&&!!document.fonts;Object.defineProperty(FontLoader,"isSyncFontLoadingSupported",{get:function(){var supported=false;var userAgent=window.navigator.userAgent;var m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(userAgent);if(m&&m[1]>=14){supported=true}if(userAgent==="node"){supported=true}return shadow(FontLoader,"isSyncFontLoadingSupported",supported)},enumerable:true,configurable:true});var FontFaceObject=function FontFaceObjectClosure(){function FontFaceObject(translatedData){this.compiledGlyphs={};for(var i in translatedData){this[i]=translatedData[i]}}Object.defineProperty(FontFaceObject,"isEvalSupported",{get:function(){var evalSupport=false;if(PDFJS.isEvalSupported){try{new Function("");evalSupport=true}catch(e){}}return shadow(this,"isEvalSupported",evalSupport)},enumerable:true,configurable:true});FontFaceObject.prototype={createNativeFontFace:function FontFaceObject_createNativeFontFace(){if(!this.data){return null}if(PDFJS.disableFontFace){this.disableFontFace=true;return null}var nativeFontFace=new FontFace(this.loadedName,this.data,{});if(PDFJS.pdfBug&&"FontInspector"in globalScope&&globalScope["FontInspector"].enabled){globalScope["FontInspector"].fontAdded(this)}return nativeFontFace},createFontFaceRule:function FontFaceObject_createFontFaceRule(){if(!this.data){return null}if(PDFJS.disableFontFace){this.disableFontFace=true;return null}var data=bytesToString(new Uint8Array(this.data));var fontName=this.loadedName;var url="url(data:"+this.mimetype+";base64,"+window.btoa(data)+");";var rule='@font-face { font-family:"'+fontName+'";src:'+url+"}";if(PDFJS.pdfBug&&"FontInspector"in globalScope&&globalScope["FontInspector"].enabled){globalScope["FontInspector"].fontAdded(this,url)}return rule},getPathGenerator:function FontFaceObject_getPathGenerator(objs,character){if(!(character in this.compiledGlyphs)){var cmds=objs.get(this.loadedName+"_path_"+character);var current,i,len;if(FontFaceObject.isEvalSupported){var args,js="";for(i=0,len=cmds.length;i<len;i++){current=cmds[i];if(current.args!==undefined){args=current.args.join(",")}else{args=""}js+="c."+current.cmd+"("+args+");\n"}this.compiledGlyphs[character]=new Function("c","size",js)}else{this.compiledGlyphs[character]=function(c,size){for(i=0,len=cmds.length;i<len;i++){current=cmds[i];if(current.cmd==="scale"){current.args=[size,-size]}c[current.cmd].apply(c,current.args)}}}}return this.compiledGlyphs[character]}};return FontFaceObject}();exports.FontFaceObject=FontFaceObject;exports.FontLoader=FontLoader});(function(root,factory){{factory(root.pdfjsDisplayMetadata={},root.pdfjsSharedUtil)}})(this,function(exports,sharedUtil){var error=sharedUtil.error;var Metadata=PDFJS.Metadata=function MetadataClosure(){function fixMetadata(meta){return meta.replace(/>\\376\\377([^<]+)/g,function(all,codes){var bytes=codes.replace(/\\([0-3])([0-7])([0-7])/g,function(code,d1,d2,d3){return String.fromCharCode(d1*64+d2*8+d3*1)});var chars="";for(var i=0;i<bytes.length;i+=2){var code=bytes.charCodeAt(i)*256+bytes.charCodeAt(i+1);chars+=code>=32&&code<127&&code!==60&&code!==62&&code!==38&&false?String.fromCharCode(code):"&#x"+(65536+code).toString(16).substring(1)+";"}return">"+chars})}function Metadata(meta){if(typeof meta==="string"){meta=fixMetadata(meta);var parser=new DOMParser;meta=parser.parseFromString(meta,"application/xml")}else if(!(meta instanceof Document)){error("Metadata: Invalid metadata object")}this.metaDocument=meta;this.metadata={};this.parse()}Metadata.prototype={parse:function Metadata_parse(){var doc=this.metaDocument;var rdf=doc.documentElement;if(rdf.nodeName.toLowerCase()!=="rdf:rdf"){rdf=rdf.firstChild;while(rdf&&rdf.nodeName.toLowerCase()!=="rdf:rdf"){rdf=rdf.nextSibling}}var nodeName=rdf?rdf.nodeName.toLowerCase():null;if(!rdf||nodeName!=="rdf:rdf"||!rdf.hasChildNodes()){return}var children=rdf.childNodes,desc,entry,name,i,ii,length,iLength;for(i=0,length=children.length;i<length;i++){desc=children[i];if(desc.nodeName.toLowerCase()!=="rdf:description"){continue}for(ii=0,iLength=desc.childNodes.length;ii<iLength;ii++){if(desc.childNodes[ii].nodeName.toLowerCase()!=="#text"){entry=desc.childNodes[ii];name=entry.nodeName.toLowerCase();this.metadata[name]=entry.textContent.trim()}}}},get:function Metadata_get(name){return this.metadata[name]||null},has:function Metadata_has(name){return typeof this.metadata[name]!=="undefined"}};return Metadata}();exports.Metadata=Metadata});(function(root,factory){{factory(root.pdfjsDisplaySVG={},root.pdfjsSharedUtil)}})(this,function(exports,sharedUtil){var FONT_IDENTITY_MATRIX=sharedUtil.FONT_IDENTITY_MATRIX;var IDENTITY_MATRIX=sharedUtil.IDENTITY_MATRIX;var ImageKind=sharedUtil.ImageKind;var OPS=sharedUtil.OPS;var Util=sharedUtil.Util;var isNum=sharedUtil.isNum;var isArray=sharedUtil.isArray;var warn=sharedUtil.warn;var SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"};var convertImgDataToPng=function convertImgDataToPngClosure(){var PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]);var CHUNK_WRAPPER_SIZE=12;var crcTable=new Int32Array(256);for(var i=0;i<256;i++){var c=i;for(var h=0;h<8;h++){if(c&1){c=3988292384^c>>1&2147483647}else{c=c>>1&2147483647}}crcTable[i]=c}function crc32(data,start,end){var crc=-1;for(var i=start;i<end;i++){var a=(crc^data[i])&255;var b=crcTable[a];crc=crc>>>8^b}return crc^-1}function writePngChunk(type,body,data,offset){var p=offset;var len=body.length;data[p]=len>>24&255;data[p+1]=len>>16&255;data[p+2]=len>>8&255;data[p+3]=len&255;p+=4;data[p]=type.charCodeAt(0)&255;data[p+1]=type.charCodeAt(1)&255;data[p+2]=type.charCodeAt(2)&255;data[p+3]=type.charCodeAt(3)&255;p+=4;data.set(body,p);p+=body.length;var crc=crc32(data,offset+4,p);data[p]=crc>>24&255;data[p+1]=crc>>16&255;data[p+2]=crc>>8&255;data[p+3]=crc&255}function adler32(data,start,end){var a=1;var b=0;for(var i=start;i<end;++i){a=(a+(data[i]&255))%65521;b=(b+a)%65521}return b<<16|a}function encode(imgData,kind){var width=imgData.width;var height=imgData.height;var bitDepth,colorType,lineSize;var bytes=imgData.data;switch(kind){case ImageKind.GRAYSCALE_1BPP:colorType=0;bitDepth=1;lineSize=width+7>>3;break;case ImageKind.RGB_24BPP:colorType=2;bitDepth=8;lineSize=width*3;break;case ImageKind.RGBA_32BPP:colorType=6;bitDepth=8;lineSize=width*4;break;default:throw new Error("invalid format")}var literals=new Uint8Array((1+lineSize)*height);var offsetLiterals=0,offsetBytes=0;var y,i;for(y=0;y<height;++y){literals[offsetLiterals++]=0;literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals);offsetBytes+=lineSize;offsetLiterals+=lineSize}if(kind===ImageKind.GRAYSCALE_1BPP){offsetLiterals=0;for(y=0;y<height;y++){offsetLiterals++;for(i=0;i<lineSize;i++){literals[offsetLiterals++]^=255}}}var ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,width&255,height>>24&255,height>>16&255,height>>8&255,height&255,bitDepth,colorType,0,0,0]);var len=literals.length;var maxBlockLength=65535;var deflateBlocks=Math.ceil(len/maxBlockLength);var idat=new Uint8Array(2+len+deflateBlocks*5+4);var pi=0;idat[pi++]=120;idat[pi++]=156;var pos=0;while(len>maxBlockLength){idat[pi++]=0;idat[pi++]=255;idat[pi++]=255;idat[pi++]=0;idat[pi++]=0;idat.set(literals.subarray(pos,pos+maxBlockLength),pi);pi+=maxBlockLength;pos+=maxBlockLength;len-=maxBlockLength}idat[pi++]=1;idat[pi++]=len&255;idat[pi++]=len>>8&255;idat[pi++]=~len&65535&255;idat[pi++]=(~len&65535)>>8&255;idat.set(literals.subarray(pos),pi);pi+=literals.length-pos;var adler=adler32(literals,0,literals.length);idat[pi++]=adler>>24&255;idat[pi++]=adler>>16&255;idat[pi++]=adler>>8&255;idat[pi++]=adler&255;var pngLength=PNG_HEADER.length+CHUNK_WRAPPER_SIZE*3+ihdr.length+idat.length;var data=new Uint8Array(pngLength);var offset=0;data.set(PNG_HEADER,offset);offset+=PNG_HEADER.length;writePngChunk("IHDR",ihdr,data,offset);offset+=CHUNK_WRAPPER_SIZE+ihdr.length;writePngChunk("IDATA",idat,data,offset);offset+=CHUNK_WRAPPER_SIZE+idat.length;writePngChunk("IEND",new Uint8Array(0),data,offset);return PDFJS.createObjectURL(data,"image/png")}return function convertImgDataToPng(imgData){var kind=imgData.kind===undefined?ImageKind.GRAYSCALE_1BPP:imgData.kind;return encode(imgData,kind)}}();var SVGExtraState=function SVGExtraStateClosure(){function SVGExtraState(){this.fontSizeScale=1;this.fontWeight=SVG_DEFAULTS.fontWeight;this.fontSize=0;this.textMatrix=IDENTITY_MATRIX;this.fontMatrix=FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=SVG_DEFAULTS.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.clipId="";this.pendingClip=false;this.maskId=""}SVGExtraState.prototype={clone:function SVGExtraState_clone(){return Object.create(this)},setCurrentPoint:function SVGExtraState_setCurrentPoint(x,y){this.x=x;this.y=y}};return SVGExtraState}();var SVGGraphics=function SVGGraphicsClosure(){function createScratchSVG(width,height){var NS="http://www.w3.org/2000/svg";var svg=document.createElementNS(NS,"svg:svg");svg.setAttributeNS(null,"version","1.1");svg.setAttributeNS(null,"width",width+"px");svg.setAttributeNS(null,"height",height+"px");svg.setAttributeNS(null,"viewBox","0 0 "+width+" "+height);return svg}function opListToTree(opList){var opTree=[];var tmp=[];var opListLen=opList.length;for(var x=0;x<opListLen;x++){if(opList[x].fn==="save"){opTree.push({fnId:92,fn:"group",items:[]});tmp.push(opTree);opTree=opTree[opTree.length-1].items;continue}if(opList[x].fn==="restore"){opTree=tmp.pop()}else{opTree.push(opList[x])}}return opTree}function pf(value){if(value===(value|0)){return value.toString()}var s=value.toFixed(10);var i=s.length-1;if(s[i]!=="0"){return s}do{i--}while(s[i]==="0");return s.substr(0,s[i]==="."?i:i+1)}function pm(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0){if(m[0]===1&&m[3]===1){return""}return"scale("+pf(m[0])+" "+pf(m[3])+")"}if(m[0]===m[3]&&m[1]===-m[2]){var a=Math.acos(m[0])*180/Math.PI;return"rotate("+pf(a)+")"}}else{if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1){return"translate("+pf(m[4])+" "+pf(m[5])+")"}}return"matrix("+pf(m[0])+" "+pf(m[1])+" "+pf(m[2])+" "+pf(m[3])+" "+pf(m[4])+" "+pf(m[5])+")"}function SVGGraphics(commonObjs,objs){this.current=new SVGExtraState;this.transformMatrix=IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=commonObjs;this.objs=objs;this.pendingEOFill=false;this.embedFonts=false;this.embeddedFonts={};this.cssStyle=null}var NS="http://www.w3.org/2000/svg";var XML_NS="http://www.w3.org/XML/1998/namespace";var XLINK_NS="http://www.w3.org/1999/xlink";var LINE_CAP_STYLES=["butt","round","square"];var LINE_JOIN_STYLES=["miter","round","bevel"];var clipCount=0;var maskCount=0;SVGGraphics.prototype={save:function SVGGraphics_save(){this.transformStack.push(this.transformMatrix);var old=this.current;this.extraStack.push(old);this.current=old.clone()},restore:function SVGGraphics_restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix));this.pgrp.appendChild(this.tgrp)},group:function SVGGraphics_group(items){this.save();this.executeOpTree(items);this.restore()},loadDependencies:function SVGGraphics_loadDependencies(operatorList){var fnArray=operatorList.fnArray;var fnArrayLen=fnArray.length;var argsArray=operatorList.argsArray;var self=this;for(var i=0;i<fnArrayLen;i++){if(OPS.dependency===fnArray[i]){var deps=argsArray[i];for(var n=0,nn=deps.length;n<nn;n++){var obj=deps[n];var common=obj.substring(0,2)==="g_";var promise;if(common){promise=new Promise(function(resolve){self.commonObjs.get(obj,resolve)})}else{promise=new Promise(function(resolve){self.objs.get(obj,resolve)})}this.current.dependencies.push(promise)}}}return Promise.all(this.current.dependencies)},transform:function SVGGraphics_transform(a,b,c,d,e,f){var transformMatrix=[a,b,c,d,e,f];this.transformMatrix=PDFJS.Util.transform(this.transformMatrix,transformMatrix);this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix))},getSVG:function SVGGraphics_getSVG(operatorList,viewport){this.svg=createScratchSVG(viewport.width,viewport.height);this.viewport=viewport;return this.loadDependencies(operatorList).then(function(){this.transformMatrix=IDENTITY_MATRIX;this.pgrp=document.createElementNS(NS,"svg:g");this.pgrp.setAttributeNS(null,"transform",pm(viewport.transform));this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix));this.defs=document.createElementNS(NS,"svg:defs");this.pgrp.appendChild(this.defs);this.pgrp.appendChild(this.tgrp);this.svg.appendChild(this.pgrp);var opTree=this.convertOpList(operatorList);this.executeOpTree(opTree);return this.svg}.bind(this))},convertOpList:function SVGGraphics_convertOpList(operatorList){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var fnArrayLen=fnArray.length;var REVOPS=[];var opList=[];for(var op in OPS){REVOPS[OPS[op]]=op}for(var x=0;x<fnArrayLen;x++){var fnId=fnArray[x];opList.push({fnId:fnId,fn:REVOPS[fnId],args:argsArray[x]})}return opListToTree(opList)},executeOpTree:function SVGGraphics_executeOpTree(opTree){var opTreeLen=opTree.length;for(var x=0;x<opTreeLen;x++){var fn=opTree[x].fn;var fnId=opTree[x].fnId;var args=opTree[x].args;switch(fnId|0){case OPS.beginText:this.beginText();break;case OPS.setLeading:this.setLeading(args);break;case OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case OPS.setFont:this.setFont(args);break;case OPS.showText:this.showText(args[0]);break;case OPS.showSpacedText:this.showText(args[0]);break;case OPS.endText:this.endText();break;case OPS.moveText:this.moveText(args[0],args[1]);break;case OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case OPS.setHScale:this.setHScale(args[0]);break;case OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case OPS.setLineWidth:this.setLineWidth(args[0]);break;case OPS.setLineJoin:this.setLineJoin(args[0]);break;case OPS.setLineCap:this.setLineCap(args[0]);break;case OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case OPS.setDash:this.setDash(args[0],args[1]);break;case OPS.setGState:this.setGState(args[0]);break;case OPS.fill:this.fill();break;case OPS.eoFill:this.eoFill();break;case OPS.stroke:this.stroke();break;case OPS.fillStroke:this.fillStroke();break;case OPS.eoFillStroke:this.eoFillStroke();break;case OPS.clip:this.clip("nonzero");break;case OPS.eoClip:this.clip("evenodd");break;case OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case OPS.paintJpegXObject:this.paintJpegXObject(args[0],args[1],args[2]);break;case OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case OPS.closePath:this.closePath();break;case OPS.closeStroke:this.closeStroke();break;case OPS.closeFillStroke:this.closeFillStroke();break;case OPS.nextLine:this.nextLine();break;case OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case OPS.constructPath:this.constructPath(args[0],args[1]);break;case OPS.endPath:this.endPath();break;case 92:this.group(opTree[x].items);break;default:warn("Unimplemented method "+fn);break}}},setWordSpacing:function SVGGraphics_setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing},setCharSpacing:function SVGGraphics_setCharSpacing(charSpacing){this.current.charSpacing=charSpacing},nextLine:function SVGGraphics_nextLine(){this.moveText(0,this.current.leading)},setTextMatrix:function SVGGraphics_setTextMatrix(a,b,c,d,e,f){var current=this.current;this.current.textMatrix=this.current.lineMatrix=[a,b,c,d,e,f];this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;current.xcoords=[];current.tspan=document.createElementNS(NS,"svg:tspan");current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size",pf(current.fontSize)+"px");current.tspan.setAttributeNS(null,"y",pf(-current.y));current.txtElement=document.createElementNS(NS,"svg:text");current.txtElement.appendChild(current.tspan)},beginText:function SVGGraphics_beginText(){this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;this.current.textMatrix=IDENTITY_MATRIX;this.current.lineMatrix=IDENTITY_MATRIX;this.current.tspan=document.createElementNS(NS,"svg:tspan");this.current.txtElement=document.createElementNS(NS,"svg:text");this.current.txtgrp=document.createElementNS(NS,"svg:g");this.current.xcoords=[]},moveText:function SVGGraphics_moveText(x,y){var current=this.current;this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;current.xcoords=[];current.tspan=document.createElementNS(NS,"svg:tspan");current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size",pf(current.fontSize)+"px");current.tspan.setAttributeNS(null,"y",pf(-current.y))},showText:function SVGGraphics_showText(glyphs){var current=this.current;var font=current.font;var fontSize=current.fontSize;if(fontSize===0){return}var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var widthAdvanceScale=fontSize*current.fontMatrix[0];var x=0,i;for(i=0;i<glyphsLength;++i){var glyph=glyphs[i];if(glyph===null){x+=fontDirection*wordSpacing;continue}else if(isNum(glyph)){x+=-glyph*fontSize*.001;continue}current.xcoords.push(current.x+x*textHScale);var width=glyph.width;var character=glyph.fontChar;var charWidth=width*widthAdvanceScale+charSpacing*fontDirection;x+=charWidth;current.tspan.textContent+=character}if(vertical){current.y-=x*textHScale}else{current.x+=x*textHScale}current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" "));current.tspan.setAttributeNS(null,"y",pf(-current.y));current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size",pf(current.fontSize)+"px");if(current.fontStyle!==SVG_DEFAULTS.fontStyle){current.tspan.setAttributeNS(null,"font-style",current.fontStyle)}if(current.fontWeight!==SVG_DEFAULTS.fontWeight){current.tspan.setAttributeNS(null,"font-weight",current.fontWeight)}if(current.fillColor!==SVG_DEFAULTS.fillColor){current.tspan.setAttributeNS(null,"fill",current.fillColor)}current.txtElement.setAttributeNS(null,"transform",pm(current.textMatrix)+" scale(1, -1)");current.txtElement.setAttributeNS(XML_NS,"xml:space","preserve");current.txtElement.appendChild(current.tspan);current.txtgrp.appendChild(current.txtElement);this.tgrp.appendChild(current.txtElement)},setLeadingMoveText:function SVGGraphics_setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y)},addFontStyle:function SVGGraphics_addFontStyle(fontObj){if(!this.cssStyle){this.cssStyle=document.createElementNS(NS,"svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.appendChild(this.cssStyle)}var url=PDFJS.createObjectURL(fontObj.data,fontObj.mimetype);this.cssStyle.textContent+='@font-face { font-family: "'+fontObj.loadedName+'";'+" src: url("+url+"); }\n"},setFont:function SVGGraphics_setFont(details){var current=this.current;var fontObj=this.commonObjs.get(details[0]);var size=details[1];this.current.font=fontObj;if(this.embedFonts&&fontObj.data&&!this.embeddedFonts[fontObj.loadedName]){this.addFontStyle(fontObj);this.embeddedFonts[fontObj.loadedName]=fontObj}current.fontMatrix=fontObj.fontMatrix?fontObj.fontMatrix:FONT_IDENTITY_MATRIX;var bold=fontObj.black?fontObj.bold?"bolder":"bold":fontObj.bold?"bold":"normal";var italic=fontObj.italic?"italic":"normal";

if(size<0){size=-size;current.fontDirection=-1}else{current.fontDirection=1}current.fontSize=size;current.fontFamily=fontObj.loadedName;current.fontWeight=bold;current.fontStyle=italic;current.tspan=document.createElementNS(NS,"svg:tspan");current.tspan.setAttributeNS(null,"y",pf(-current.y));current.xcoords=[]},endText:function SVGGraphics_endText(){if(this.current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix))},setLineWidth:function SVGGraphics_setLineWidth(width){this.current.lineWidth=width},setLineCap:function SVGGraphics_setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style]},setLineJoin:function SVGGraphics_setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style]},setMiterLimit:function SVGGraphics_setMiterLimit(limit){this.current.miterLimit=limit},setStrokeRGBColor:function SVGGraphics_setStrokeRGBColor(r,g,b){var color=Util.makeCssRgb(r,g,b);this.current.strokeColor=color},setFillRGBColor:function SVGGraphics_setFillRGBColor(r,g,b){var color=Util.makeCssRgb(r,g,b);this.current.fillColor=color;this.current.tspan=document.createElementNS(NS,"svg:tspan");this.current.xcoords=[]},setDash:function SVGGraphics_setDash(dashArray,dashPhase){this.current.dashArray=dashArray;this.current.dashPhase=dashPhase},constructPath:function SVGGraphics_constructPath(ops,args){var current=this.current;var x=current.x,y=current.y;current.path=document.createElementNS(NS,"svg:path");var d=[];var opLength=ops.length;for(var i=0,j=0;i<opLength;i++){switch(ops[i]|0){case OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];var xw=x+width;var yh=y+height;d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case OPS.moveTo:x=args[j++];y=args[j++];d.push("M",pf(x),pf(y));break;case OPS.lineTo:x=args[j++];y=args[j++];d.push("L",pf(x),pf(y));break;case OPS.curveTo:x=args[j+4];y=args[j+5];d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y));j+=6;break;case OPS.curveTo2:x=args[j+2];y=args[j+3];d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]));j+=4;break;case OPS.curveTo3:x=args[j+2];y=args[j+3];d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y));j+=4;break;case OPS.closePath:d.push("Z");break}}current.path.setAttributeNS(null,"d",d.join(" "));current.path.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit));current.path.setAttributeNS(null,"stroke-linecap",current.lineCap);current.path.setAttributeNS(null,"stroke-linejoin",current.lineJoin);current.path.setAttributeNS(null,"stroke-width",pf(current.lineWidth)+"px");current.path.setAttributeNS(null,"stroke-dasharray",current.dashArray.map(pf).join(" "));current.path.setAttributeNS(null,"stroke-dashoffset",pf(current.dashPhase)+"px");current.path.setAttributeNS(null,"fill","none");this.tgrp.appendChild(current.path);if(current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}current.element=current.path;current.setCurrentPoint(x,y)},endPath:function SVGGraphics_endPath(){var current=this.current;if(current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix))},clip:function SVGGraphics_clip(type){var current=this.current;current.clipId="clippath"+clipCount;clipCount++;this.clippath=document.createElementNS(NS,"svg:clipPath");this.clippath.setAttributeNS(null,"id",current.clipId);var clipElement=current.element.cloneNode();if(type==="evenodd"){clipElement.setAttributeNS(null,"clip-rule","evenodd")}else{clipElement.setAttributeNS(null,"clip-rule","nonzero")}this.clippath.setAttributeNS(null,"transform",pm(this.transformMatrix));this.clippath.appendChild(clipElement);this.defs.appendChild(this.clippath);current.pendingClip=true;this.cgrp=document.createElementNS(NS,"svg:g");this.cgrp.setAttributeNS(null,"clip-path","url(#"+current.clipId+")");this.pgrp.appendChild(this.cgrp)},closePath:function SVGGraphics_closePath(){var current=this.current;var d=current.path.getAttributeNS(null,"d");d+="Z";current.path.setAttributeNS(null,"d",d)},setLeading:function SVGGraphics_setLeading(leading){this.current.leading=-leading},setTextRise:function SVGGraphics_setTextRise(textRise){this.current.textRise=textRise},setHScale:function SVGGraphics_setHScale(scale){this.current.textHScale=scale/100},setGState:function SVGGraphics_setGState(states){for(var i=0,ii=states.length;i<ii;i++){var state=states[i];var key=state[0];var value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":break;case"FL":break;case"Font":this.setFont(value);break;case"CA":break;case"ca":break;case"BM":break;case"SMask":break}}},fill:function SVGGraphics_fill(){var current=this.current;current.element.setAttributeNS(null,"fill",current.fillColor)},stroke:function SVGGraphics_stroke(){var current=this.current;current.element.setAttributeNS(null,"stroke",current.strokeColor);current.element.setAttributeNS(null,"fill","none")},eoFill:function SVGGraphics_eoFill(){var current=this.current;current.element.setAttributeNS(null,"fill",current.fillColor);current.element.setAttributeNS(null,"fill-rule","evenodd")},fillStroke:function SVGGraphics_fillStroke(){this.stroke();this.fill()},eoFillStroke:function SVGGraphics_eoFillStroke(){this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()},closeStroke:function SVGGraphics_closeStroke(){this.closePath();this.stroke()},closeFillStroke:function SVGGraphics_closeFillStroke(){this.closePath();this.fillStroke()},paintSolidColorImageMask:function SVGGraphics_paintSolidColorImageMask(){var current=this.current;var rect=document.createElementNS(NS,"svg:rect");rect.setAttributeNS(null,"x","0");rect.setAttributeNS(null,"y","0");rect.setAttributeNS(null,"width","1px");rect.setAttributeNS(null,"height","1px");rect.setAttributeNS(null,"fill",current.fillColor);this.tgrp.appendChild(rect)},paintJpegXObject:function SVGGraphics_paintJpegXObject(objId,w,h){var current=this.current;var imgObj=this.objs.get(objId);var imgEl=document.createElementNS(NS,"svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgObj.src);imgEl.setAttributeNS(null,"width",imgObj.width+"px");imgEl.setAttributeNS(null,"height",imgObj.height+"px");imgEl.setAttributeNS(null,"x","0");imgEl.setAttributeNS(null,"y",pf(-h));imgEl.setAttributeNS(null,"transform","scale("+pf(1/w)+" "+pf(-1/h)+")");this.tgrp.appendChild(imgEl);if(current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}},paintImageXObject:function SVGGraphics_paintImageXObject(objId){var imgData=this.objs.get(objId);if(!imgData){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(imgData)},paintInlineImageXObject:function SVGGraphics_paintInlineImageXObject(imgData,mask){var current=this.current;var width=imgData.width;var height=imgData.height;var imgSrc=convertImgDataToPng(imgData);var cliprect=document.createElementNS(NS,"svg:rect");cliprect.setAttributeNS(null,"x","0");cliprect.setAttributeNS(null,"y","0");cliprect.setAttributeNS(null,"width",pf(width));cliprect.setAttributeNS(null,"height",pf(height));current.element=cliprect;this.clip("nonzero");var imgEl=document.createElementNS(NS,"svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgSrc);imgEl.setAttributeNS(null,"x","0");imgEl.setAttributeNS(null,"y",pf(-height));imgEl.setAttributeNS(null,"width",pf(width)+"px");imgEl.setAttributeNS(null,"height",pf(height)+"px");imgEl.setAttributeNS(null,"transform","scale("+pf(1/width)+" "+pf(-1/height)+")");if(mask){mask.appendChild(imgEl)}else{this.tgrp.appendChild(imgEl)}if(current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}},paintImageMaskXObject:function SVGGraphics_paintImageMaskXObject(imgData){var current=this.current;var width=imgData.width;var height=imgData.height;var fillColor=current.fillColor;current.maskId="mask"+maskCount++;var mask=document.createElementNS(NS,"svg:mask");mask.setAttributeNS(null,"id",current.maskId);var rect=document.createElementNS(NS,"svg:rect");rect.setAttributeNS(null,"x","0");rect.setAttributeNS(null,"y","0");rect.setAttributeNS(null,"width",pf(width));rect.setAttributeNS(null,"height",pf(height));rect.setAttributeNS(null,"fill",fillColor);rect.setAttributeNS(null,"mask","url(#"+current.maskId+")");this.defs.appendChild(mask);this.tgrp.appendChild(rect);this.paintInlineImageXObject(imgData,mask)},paintFormXObjectBegin:function SVGGraphics_paintFormXObjectBegin(matrix,bbox){this.save();if(isArray(matrix)&&matrix.length===6){this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5])}if(isArray(bbox)&&bbox.length===4){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];var cliprect=document.createElementNS(NS,"svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]);cliprect.setAttributeNS(null,"y",bbox[1]);cliprect.setAttributeNS(null,"width",pf(width));cliprect.setAttributeNS(null,"height",pf(height));this.current.element=cliprect;this.clip("nonzero");this.endPath()}},paintFormXObjectEnd:function SVGGraphics_paintFormXObjectEnd(){this.restore()}};return SVGGraphics}();PDFJS.SVGGraphics=SVGGraphics;exports.SVGGraphics=SVGGraphics});(function(root,factory){{factory(root.pdfjsDisplayTextLayer={},root.pdfjsSharedUtil,root.pdfjsDisplayDOMUtils,root.pdfjsSharedGlobal)}})(this,function(exports,sharedUtil,displayDOMUtils,sharedGlobal){var Util=sharedUtil.Util;var createPromiseCapability=sharedUtil.createPromiseCapability;var CustomStyle=displayDOMUtils.CustomStyle;var PDFJS=sharedGlobal.PDFJS;var renderTextLayer=function renderTextLayerClosure(){var MAX_TEXT_DIVS_TO_RENDER=1e5;var NonWhitespaceRegexp=/\S/;function isAllWhitespace(str){return!NonWhitespaceRegexp.test(str)}function appendText(textDivs,viewport,geom,styles){var style=styles[geom.fontName];var textDiv=document.createElement("div");textDivs.push(textDiv);if(isAllWhitespace(geom.str)){textDiv.dataset.isWhitespace=true;return}var tx=Util.transform(viewport.transform,geom.transform);var angle=Math.atan2(tx[1],tx[0]);if(style.vertical){angle+=Math.PI/2}var fontHeight=Math.sqrt(tx[2]*tx[2]+tx[3]*tx[3]);var fontAscent=fontHeight;if(style.ascent){fontAscent=style.ascent*fontAscent}else if(style.descent){fontAscent=(1+style.descent)*fontAscent}var left;var top;if(angle===0){left=tx[4];top=tx[5]-fontAscent}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle)}textDiv.style.left=left+"px";textDiv.style.top=top+"px";textDiv.style.fontSize=fontHeight+"px";textDiv.style.fontFamily=style.fontFamily;textDiv.textContent=geom.str;if(PDFJS.pdfBug){textDiv.dataset.fontName=geom.fontName}if(angle!==0){textDiv.dataset.angle=angle*(180/Math.PI)}if(geom.str.length>1){if(style.vertical){textDiv.dataset.canvasWidth=geom.height*viewport.scale}else{textDiv.dataset.canvasWidth=geom.width*viewport.scale}}}function render(task){if(task._canceled){return}var textLayerFrag=task._container;var textDivs=task._textDivs;var capability=task._capability;var textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){capability.resolve();return}var canvas=document.createElement("canvas");canvas.mozOpaque=true;var ctx=canvas.getContext("2d",{alpha:false});var lastFontSize;var lastFontFamily;for(var i=0;i<textDivsLength;i++){var textDiv=textDivs[i];if(textDiv.dataset.isWhitespace!==undefined){continue}var fontSize=textDiv.style.fontSize;var fontFamily=textDiv.style.fontFamily;if(fontSize!==lastFontSize||fontFamily!==lastFontFamily){ctx.font=fontSize+" "+fontFamily;lastFontSize=fontSize;lastFontFamily=fontFamily}var width=ctx.measureText(textDiv.textContent).width;if(width>0){textLayerFrag.appendChild(textDiv);var transform;if(textDiv.dataset.canvasWidth!==undefined){var textScale=textDiv.dataset.canvasWidth/width;transform="scaleX("+textScale+")"}else{transform=""}var rotation=textDiv.dataset.angle;if(rotation){transform="rotate("+rotation+"deg) "+transform}if(transform){CustomStyle.setProp("transform",textDiv,transform)}}}capability.resolve()}function TextLayerRenderTask(textContent,container,viewport,textDivs){this._textContent=textContent;this._container=container;this._viewport=viewport;textDivs=textDivs||[];this._textDivs=textDivs;this._canceled=false;this._capability=createPromiseCapability();this._renderTimer=null}TextLayerRenderTask.prototype={get promise(){return this._capability.promise},cancel:function TextLayer_cancel(){this._canceled=true;if(this._renderTimer!==null){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject("canceled")},_render:function TextLayer_render(timeout){var textItems=this._textContent.items;var styles=this._textContent.styles;var textDivs=this._textDivs;var viewport=this._viewport;for(var i=0,len=textItems.length;i<len;i++){appendText(textDivs,viewport,textItems[i],styles)}if(!timeout){render(this)}else{var self=this;this._renderTimer=setTimeout(function(){render(self);self._renderTimer=null},timeout)}}};function renderTextLayer(renderParameters){var task=new TextLayerRenderTask(renderParameters.textContent,renderParameters.container,renderParameters.viewport,renderParameters.textDivs);task._render(renderParameters.timeout);return task}return renderTextLayer}();PDFJS.renderTextLayer=renderTextLayer;exports.renderTextLayer=renderTextLayer});(function(root,factory){{factory(root.pdfjsDisplayWebGL={},root.pdfjsSharedUtil)}})(this,function(exports,sharedUtil){var shadow=sharedUtil.shadow;var WebGLUtils=function WebGLUtilsClosure(){function loadShader(gl,code,shaderType){var shader=gl.createShader(shaderType);gl.shaderSource(shader,code);gl.compileShader(shader);var compiled=gl.getShaderParameter(shader,gl.COMPILE_STATUS);if(!compiled){var errorMsg=gl.getShaderInfoLog(shader);throw new Error("Error during shader compilation: "+errorMsg)}return shader}function createVertexShader(gl,code){return loadShader(gl,code,gl.VERTEX_SHADER)}function createFragmentShader(gl,code){return loadShader(gl,code,gl.FRAGMENT_SHADER)}function createProgram(gl,shaders){var program=gl.createProgram();for(var i=0,ii=shaders.length;i<ii;++i){gl.attachShader(program,shaders[i])}gl.linkProgram(program);var linked=gl.getProgramParameter(program,gl.LINK_STATUS);if(!linked){var errorMsg=gl.getProgramInfoLog(program);throw new Error("Error during program linking: "+errorMsg)}return program}function createTexture(gl,image,textureId){gl.activeTexture(textureId);var texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,image);return texture}var currentGL,currentCanvas;function generateGL(){if(currentGL){return}currentCanvas=document.createElement("canvas");currentGL=currentCanvas.getContext("webgl",{premultipliedalpha:false})}var smaskVertexShaderCode="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ";var smaskFragmentShaderCode="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ";var smaskCache=null;function initSmaskGL(){var canvas,gl;generateGL();canvas=currentCanvas;currentCanvas=null;gl=currentGL;currentGL=null;var vertexShader=createVertexShader(gl,smaskVertexShaderCode);var fragmentShader=createFragmentShader(gl,smaskFragmentShaderCode);var program=createProgram(gl,[vertexShader,fragmentShader]);gl.useProgram(program);var cache={};cache.gl=gl;cache.canvas=canvas;cache.resolutionLocation=gl.getUniformLocation(program,"u_resolution");cache.positionLocation=gl.getAttribLocation(program,"a_position");cache.backdropLocation=gl.getUniformLocation(program,"u_backdrop");cache.subtypeLocation=gl.getUniformLocation(program,"u_subtype");var texCoordLocation=gl.getAttribLocation(program,"a_texCoord");var texLayerLocation=gl.getUniformLocation(program,"u_image");var texMaskLocation=gl.getUniformLocation(program,"u_mask");var texCoordBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),gl.STATIC_DRAW);gl.enableVertexAttribArray(texCoordLocation);gl.vertexAttribPointer(texCoordLocation,2,gl.FLOAT,false,0,0);gl.uniform1i(texLayerLocation,0);gl.uniform1i(texMaskLocation,1);smaskCache=cache}function composeSMask(layer,mask,properties){var width=layer.width,height=layer.height;if(!smaskCache){initSmaskGL()}var cache=smaskCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width;canvas.height=height;gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);gl.uniform2f(cache.resolutionLocation,width,height);if(properties.backdrop){gl.uniform4f(cache.resolutionLocation,properties.backdrop[0],properties.backdrop[1],properties.backdrop[2],1)}else{gl.uniform4f(cache.resolutionLocation,0,0,0,0)}gl.uniform1i(cache.subtypeLocation,properties.subtype==="Luminosity"?1:0);var texture=createTexture(gl,layer,gl.TEXTURE0);var maskTexture=createTexture(gl,mask,gl.TEXTURE1);var buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,width,0,0,height,0,height,width,0,width,height]),gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.positionLocation);gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,false,0,0);gl.clearColor(0,0,0,0);gl.enable(gl.BLEND);gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA);gl.clear(gl.COLOR_BUFFER_BIT);gl.drawArrays(gl.TRIANGLES,0,6);gl.flush();gl.deleteTexture(texture);gl.deleteTexture(maskTexture);gl.deleteBuffer(buffer);return canvas}var figuresVertexShaderCode="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ";var figuresFragmentShaderCode="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ";var figuresCache=null;function initFiguresGL(){var canvas,gl;generateGL();canvas=currentCanvas;currentCanvas=null;gl=currentGL;currentGL=null;var vertexShader=createVertexShader(gl,figuresVertexShaderCode);var fragmentShader=createFragmentShader(gl,figuresFragmentShaderCode);var program=createProgram(gl,[vertexShader,fragmentShader]);gl.useProgram(program);var cache={};cache.gl=gl;cache.canvas=canvas;cache.resolutionLocation=gl.getUniformLocation(program,"u_resolution");cache.scaleLocation=gl.getUniformLocation(program,"u_scale");cache.offsetLocation=gl.getUniformLocation(program,"u_offset");cache.positionLocation=gl.getAttribLocation(program,"a_position");cache.colorLocation=gl.getAttribLocation(program,"a_color");figuresCache=cache}function drawFigures(width,height,backgroundColor,figures,context){if(!figuresCache){initFiguresGL()}var cache=figuresCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width;canvas.height=height;gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);gl.uniform2f(cache.resolutionLocation,width,height);var count=0;var i,ii,rows;for(i=0,ii=figures.length;i<ii;i++){switch(figures[i].type){case"lattice":rows=figures[i].coords.length/figures[i].verticesPerRow|0;count+=(rows-1)*(figures[i].verticesPerRow-1)*6;break;case"triangles":count+=figures[i].coords.length;break}}var coords=new Float32Array(count*2);var colors=new Uint8Array(count*3);var coordsMap=context.coords,colorsMap=context.colors;var pIndex=0,cIndex=0;for(i=0,ii=figures.length;i<ii;i++){var figure=figures[i],ps=figure.coords,cs=figure.colors;switch(figure.type){case"lattice":var cols=figure.verticesPerRow;rows=ps.length/cols|0;for(var row=1;row<rows;row++){var offset=row*cols+1;for(var col=1;col<cols;col++,offset++){coords[pIndex]=coordsMap[ps[offset-cols-1]];coords[pIndex+1]=coordsMap[ps[offset-cols-1]+1];coords[pIndex+2]=coordsMap[ps[offset-cols]];coords[pIndex+3]=coordsMap[ps[offset-cols]+1];coords[pIndex+4]=coordsMap[ps[offset-1]];coords[pIndex+5]=coordsMap[ps[offset-1]+1];colors[cIndex]=colorsMap[cs[offset-cols-1]];colors[cIndex+1]=colorsMap[cs[offset-cols-1]+1];colors[cIndex+2]=colorsMap[cs[offset-cols-1]+2];colors[cIndex+3]=colorsMap[cs[offset-cols]];colors[cIndex+4]=colorsMap[cs[offset-cols]+1];colors[cIndex+5]=colorsMap[cs[offset-cols]+2];colors[cIndex+6]=colorsMap[cs[offset-1]];colors[cIndex+7]=colorsMap[cs[offset-1]+1];colors[cIndex+8]=colorsMap[cs[offset-1]+2];coords[pIndex+6]=coords[pIndex+2];coords[pIndex+7]=coords[pIndex+3];coords[pIndex+8]=coords[pIndex+4];coords[pIndex+9]=coords[pIndex+5];coords[pIndex+10]=coordsMap[ps[offset]];coords[pIndex+11]=coordsMap[ps[offset]+1];colors[cIndex+9]=colors[cIndex+3];colors[cIndex+10]=colors[cIndex+4];colors[cIndex+11]=colors[cIndex+5];colors[cIndex+12]=colors[cIndex+6];colors[cIndex+13]=colors[cIndex+7];colors[cIndex+14]=colors[cIndex+8];colors[cIndex+15]=colorsMap[cs[offset]];colors[cIndex+16]=colorsMap[cs[offset]+1];colors[cIndex+17]=colorsMap[cs[offset]+2];pIndex+=12;cIndex+=18}}break;case"triangles":for(var j=0,jj=ps.length;j<jj;j++){coords[pIndex]=coordsMap[ps[j]];coords[pIndex+1]=coordsMap[ps[j]+1];colors[cIndex]=colorsMap[cs[j]];colors[cIndex+1]=colorsMap[cs[j]+1];colors[cIndex+2]=colorsMap[cs[j]+2];pIndex+=2;cIndex+=3}break}}if(backgroundColor){gl.clearColor(backgroundColor[0]/255,backgroundColor[1]/255,backgroundColor[2]/255,1)}else{gl.clearColor(0,0,0,0)}gl.clear(gl.COLOR_BUFFER_BIT);var coordsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,coordsBuffer);gl.bufferData(gl.ARRAY_BUFFER,coords,gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.positionLocation);gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,false,0,0);var colorsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,colorsBuffer);gl.bufferData(gl.ARRAY_BUFFER,colors,gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.colorLocation);gl.vertexAttribPointer(cache.colorLocation,3,gl.UNSIGNED_BYTE,false,0,0);gl.uniform2f(cache.scaleLocation,context.scaleX,context.scaleY);gl.uniform2f(cache.offsetLocation,context.offsetX,context.offsetY);gl.drawArrays(gl.TRIANGLES,0,count);gl.flush();gl.deleteBuffer(coordsBuffer);gl.deleteBuffer(colorsBuffer);return canvas}function cleanup(){if(smaskCache&&smaskCache.canvas){smaskCache.canvas.width=0;smaskCache.canvas.height=0}if(figuresCache&&figuresCache.canvas){figuresCache.canvas.width=0;figuresCache.canvas.height=0}smaskCache=null;figuresCache=null}return{get isEnabled(){if(PDFJS.disableWebGL){return false}var enabled=false;try{generateGL();enabled=!!currentGL}catch(e){}return shadow(this,"isEnabled",enabled)},composeSMask:composeSMask,drawFigures:drawFigures,clear:cleanup}}();exports.WebGLUtils=WebGLUtils});(function(root,factory){{factory(root.pdfjsDisplayPatternHelper={},root.pdfjsSharedUtil,root.pdfjsDisplayWebGL)}})(this,function(exports,sharedUtil,displayWebGL){var Util=sharedUtil.Util;var info=sharedUtil.info;var isArray=sharedUtil.isArray;var error=sharedUtil.error;var WebGLUtils=displayWebGL.WebGLUtils;var ShadingIRs={};ShadingIRs.RadialAxial={fromIR:function RadialAxial_fromIR(raw){var type=raw[1];var colorStops=raw[2];var p0=raw[3];var p1=raw[4];var r0=raw[5];var r1=raw[6];return{type:"Pattern",getPattern:function RadialAxial_getPattern(ctx){var grad;if(type==="axial"){grad=ctx.createLinearGradient(p0[0],p0[1],p1[0],p1[1])}else if(type==="radial"){grad=ctx.createRadialGradient(p0[0],p0[1],r0,p1[0],p1[1],r1)}for(var i=0,ii=colorStops.length;i<ii;++i){var c=colorStops[i];grad.addColorStop(c[0],c[1])}return grad}}}};var createMeshCanvas=function createMeshCanvasClosure(){function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){var coords=context.coords,colors=context.colors;var bytes=data.data,rowSize=data.width*4;var tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp}if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp}if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp}var x1=(coords[p1]+context.offsetX)*context.scaleX;var y1=(coords[p1+1]+context.offsetY)*context.scaleY;var x2=(coords[p2]+context.offsetX)*context.scaleX;var y2=(coords[p2+1]+context.offsetY)*context.scaleY;var x3=(coords[p3]+context.offsetX)*context.scaleX;var y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return}var c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];var c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];var c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];var minY=Math.round(y1),maxY=Math.round(y3);var xa,car,cag,cab;var xb,cbr,cbg,cbb;var k;for(var y=minY;y<=maxY;y++){if(y<y2){k=y<y1?0:y1===y2?1:(y1-y)/(y1-y2);xa=x1-(x1-x2)*k;car=c1r-(c1r-c2r)*k;cag=c1g-(c1g-c2g)*k;cab=c1b-(c1b-c2b)*k}else{k=y>y3?1:y2===y3?0:(y2-y)/(y2-y3);xa=x2-(x2-x3)*k;car=c2r-(c2r-c3r)*k;cag=c2g-(c2g-c3g)*k;cab=c2b-(c2b-c3b)*k}k=y<y1?0:y>y3?1:(y1-y)/(y1-y3);xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;var x1_=Math.round(Math.min(xa,xb));var x2_=Math.round(Math.max(xa,xb));var j=rowSize*y+x1_*4;for(var x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);k=k<0?0:k>1?1:k;bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255}}}function drawFigure(data,figure,context){var ps=figure.coords;var cs=figure.colors;var i,ii;switch(figure.type){case"lattice":var verticesPerRow=figure.verticesPerRow;var rows=Math.floor(ps.length/verticesPerRow)-1;var cols=verticesPerRow-1;for(i=0;i<rows;i++){var q=i*verticesPerRow;for(var j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow])}}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2])}break;default:error("illigal figure");break}}function createMeshCanvas(bounds,combinesScale,coords,colors,figures,backgroundColor,cachedCanvases){var EXPECTED_SCALE=1.1;var MAX_PATTERN_SIZE=3e3;var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var boundsWidth=Math.ceil(bounds[2])-offsetX;var boundsHeight=Math.ceil(bounds[3])-offsetY;var width=Math.min(Math.ceil(Math.abs(boundsWidth*combinesScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var height=Math.min(Math.ceil(Math.abs(boundsHeight*combinesScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var scaleX=boundsWidth/width;var scaleY=boundsHeight/height;var context={coords:coords,colors:colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY};var canvas,tmpCanvas,i,ii;if(WebGLUtils.isEnabled){canvas=WebGLUtils.drawFigures(width,height,backgroundColor,figures,context);tmpCanvas=cachedCanvases.getCanvas("mesh",width,height,false);tmpCanvas.context.drawImage(canvas,0,0);canvas=tmpCanvas.canvas}else{tmpCanvas=cachedCanvases.getCanvas("mesh",width,height,false);var tmpCtx=tmpCanvas.context;var data=tmpCtx.createImageData(width,height);if(backgroundColor){var bytes=data.data;for(i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255}}for(i=0;i<figures.length;i++){drawFigure(data,figures[i],context)}tmpCtx.putImageData(data,0,0);canvas=tmpCanvas.canvas}return{canvas:canvas,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY}}return createMeshCanvas}();ShadingIRs.Mesh={fromIR:function Mesh_fromIR(raw){var coords=raw[2];var colors=raw[3];var figures=raw[4];var bounds=raw[5];var matrix=raw[6];var background=raw[8];return{type:"Pattern",getPattern:function Mesh_getPattern(ctx,owner,shadingFill){var scale;if(shadingFill){scale=Util.singularValueDecompose2dScale(ctx.mozCurrentTransform)}else{scale=Util.singularValueDecompose2dScale(owner.baseTransform);if(matrix){var matrixScale=Util.singularValueDecompose2dScale(matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]]}}var temporaryPatternCanvas=createMeshCanvas(bounds,scale,coords,colors,figures,shadingFill?null:background,owner.cachedCanvases);

if(!shadingFill){ctx.setTransform.apply(ctx,owner.baseTransform);if(matrix){ctx.transform.apply(ctx,matrix)}}ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat")}}}};ShadingIRs.Dummy={fromIR:function Dummy_fromIR(){return{type:"Pattern",getPattern:function Dummy_fromIR_getPattern(){return"hotpink"}}}};function getShadingPatternFromIR(raw){var shadingIR=ShadingIRs[raw[0]];if(!shadingIR){error("Unknown IR type: "+raw[0])}return shadingIR.fromIR(raw)}var TilingPattern=function TilingPatternClosure(){var PaintType={COLORED:1,UNCOLORED:2};var MAX_PATTERN_SIZE=3e3;function TilingPattern(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2];this.matrix=IR[3]||[1,0,0,1,0,0];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.canvasGraphicsFactory=canvasGraphicsFactory;this.baseTransform=baseTransform;this.type="Pattern";this.ctx=ctx}TilingPattern.prototype={createPatternCanvas:function TilinPattern_createPatternCanvas(owner){var operatorList=this.operatorList;var bbox=this.bbox;var xstep=this.xstep;var ystep=this.ystep;var paintType=this.paintType;var tilingType=this.tilingType;var color=this.color;var canvasGraphicsFactory=this.canvasGraphicsFactory;info("TilingType: "+tilingType);var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];var topLeft=[x0,y0];var botRight=[x0+xstep,y0+ystep];var width=botRight[0]-topLeft[0];var height=botRight[1]-topLeft[1];var matrixScale=Util.singularValueDecompose2dScale(this.matrix);var curMatrixScale=Util.singularValueDecompose2dScale(this.baseTransform);var combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]];width=Math.min(Math.ceil(Math.abs(width*combinedScale[0])),MAX_PATTERN_SIZE);height=Math.min(Math.ceil(Math.abs(height*combinedScale[1])),MAX_PATTERN_SIZE);var tmpCanvas=owner.cachedCanvases.getCanvas("pattern",width,height,true);var tmpCtx=tmpCanvas.context;var graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(tmpCtx,paintType,color);this.setScale(width,height,xstep,ystep);this.transformToScale(graphics);var tmpTranslate=[1,0,0,1,-topLeft[0],-topLeft[1]];graphics.transform.apply(graphics,tmpTranslate);this.clipBbox(graphics,bbox,x0,y0,x1,y1);graphics.executeOperatorList(operatorList);return tmpCanvas.canvas},setScale:function TilingPattern_setScale(width,height,xstep,ystep){this.scale=[width/xstep,height/ystep]},transformToScale:function TilingPattern_transformToScale(graphics){var scale=this.scale;var tmpScale=[scale[0],0,0,scale[1],0,0];graphics.transform.apply(graphics,tmpScale)},scaleToContext:function TilingPattern_scaleToContext(){var scale=this.scale;this.ctx.scale(1/scale[0],1/scale[1])},clipBbox:function clipBbox(graphics,bbox,x0,y0,x1,y1){if(bbox&&isArray(bbox)&&bbox.length===4){var bboxWidth=x1-x0;var bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.clip();graphics.endPath()}},setFillAndStrokeStyleToContext:function setFillAndStrokeStyleToContext(context,paintType,color){switch(paintType){case PaintType.COLORED:var ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;break;case PaintType.UNCOLORED:var cssColor=Util.makeCssRgb(color[0],color[1],color[2]);context.fillStyle=cssColor;context.strokeStyle=cssColor;break;default:error("Unsupported paint type: "+paintType)}},getPattern:function TilingPattern_getPattern(ctx,owner){var temporaryPatternCanvas=this.createPatternCanvas(owner);ctx=this.ctx;ctx.setTransform.apply(ctx,this.baseTransform);ctx.transform.apply(ctx,this.matrix);this.scaleToContext();return ctx.createPattern(temporaryPatternCanvas,"repeat")}};return TilingPattern}();exports.getShadingPatternFromIR=getShadingPatternFromIR;exports.TilingPattern=TilingPattern});(function(root,factory){{factory(root.pdfjsDisplayCanvas={},root.pdfjsSharedUtil,root.pdfjsDisplayPatternHelper,root.pdfjsDisplayWebGL)}})(this,function(exports,sharedUtil,displayPatternHelper,displayWebGL){var FONT_IDENTITY_MATRIX=sharedUtil.FONT_IDENTITY_MATRIX;var IDENTITY_MATRIX=sharedUtil.IDENTITY_MATRIX;var ImageKind=sharedUtil.ImageKind;var OPS=sharedUtil.OPS;var TextRenderingMode=sharedUtil.TextRenderingMode;var Uint32ArrayView=sharedUtil.Uint32ArrayView;var Util=sharedUtil.Util;var assert=sharedUtil.assert;var info=sharedUtil.info;var isNum=sharedUtil.isNum;var isArray=sharedUtil.isArray;var error=sharedUtil.error;var shadow=sharedUtil.shadow;var warn=sharedUtil.warn;var TilingPattern=displayPatternHelper.TilingPattern;var getShadingPatternFromIR=displayPatternHelper.getShadingPatternFromIR;var WebGLUtils=displayWebGL.WebGLUtils;var MIN_FONT_SIZE=16;var MAX_FONT_SIZE=100;var MAX_GROUP_SIZE=4096;var MIN_WIDTH_FACTOR=.65;var COMPILE_TYPE3_GLYPHS=true;var MAX_SIZE_TO_COMPILE=1e3;var FULL_CHUNK_HEIGHT=16;function createScratchCanvas(width,height){var canvas=document.createElement("canvas");canvas.width=width;canvas.height=height;return canvas}function addContextCurrentTransform(ctx){if(!ctx.mozCurrentTransform){ctx._originalSave=ctx.save;ctx._originalRestore=ctx.restore;ctx._originalRotate=ctx.rotate;ctx._originalScale=ctx.scale;ctx._originalTranslate=ctx.translate;ctx._originalTransform=ctx.transform;ctx._originalSetTransform=ctx.setTransform;ctx._transformMatrix=ctx._transformMatrix||[1,0,0,1,0,0];ctx._transformStack=[];Object.defineProperty(ctx,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}});Object.defineProperty(ctx,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var m=this._transformMatrix;var a=m[0],b=m[1],c=m[2],d=m[3],e=m[4],f=m[5];var ad_bc=a*d-b*c;var bc_ad=b*c-a*d;return[d/ad_bc,b/bc_ad,c/bc_ad,a/ad_bc,(d*e-c*f)/bc_ad,(b*e-a*f)/ad_bc]}});ctx.save=function ctxSave(){var old=this._transformMatrix;this._transformStack.push(old);this._transformMatrix=old.slice(0,6);this._originalSave()};ctx.restore=function ctxRestore(){var prev=this._transformStack.pop();if(prev){this._transformMatrix=prev;this._originalRestore()}};ctx.translate=function ctxTranslate(x,y){var m=this._transformMatrix;m[4]=m[0]*x+m[2]*y+m[4];m[5]=m[1]*x+m[3]*y+m[5];this._originalTranslate(x,y)};ctx.scale=function ctxScale(x,y){var m=this._transformMatrix;m[0]=m[0]*x;m[1]=m[1]*x;m[2]=m[2]*y;m[3]=m[3]*y;this._originalScale(x,y)};ctx.transform=function ctxTransform(a,b,c,d,e,f){var m=this._transformMatrix;this._transformMatrix=[m[0]*a+m[2]*b,m[1]*a+m[3]*b,m[0]*c+m[2]*d,m[1]*c+m[3]*d,m[0]*e+m[2]*f+m[4],m[1]*e+m[3]*f+m[5]];ctx._originalTransform(a,b,c,d,e,f)};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){this._transformMatrix=[a,b,c,d,e,f];ctx._originalSetTransform(a,b,c,d,e,f)};ctx.rotate=function ctxRotate(angle){var cosValue=Math.cos(angle);var sinValue=Math.sin(angle);var m=this._transformMatrix;this._transformMatrix=[m[0]*cosValue+m[2]*sinValue,m[1]*cosValue+m[3]*sinValue,m[0]*-sinValue+m[2]*cosValue,m[1]*-sinValue+m[3]*cosValue,m[4],m[5]];this._originalRotate(angle)}}}var CachedCanvases=function CachedCanvasesClosure(){function CachedCanvases(){this.cache=Object.create(null)}CachedCanvases.prototype={getCanvas:function CachedCanvases_getCanvas(id,width,height,trackTransform){var canvasEntry;if(this.cache[id]!==undefined){canvasEntry=this.cache[id];canvasEntry.canvas.width=width;canvasEntry.canvas.height=height;canvasEntry.context.setTransform(1,0,0,1,0,0)}else{var canvas=createScratchCanvas(width,height);var ctx=canvas.getContext("2d");if(trackTransform){addContextCurrentTransform(ctx)}this.cache[id]=canvasEntry={canvas:canvas,context:ctx}}return canvasEntry},clear:function(){for(var id in this.cache){var canvasEntry=this.cache[id];canvasEntry.canvas.width=0;canvasEntry.canvas.height=0;delete this.cache[id]}}};return CachedCanvases}();function compileType3Glyph(imgData){var POINT_TO_PROCESS_LIMIT=1e3;var width=imgData.width,height=imgData.height;var i,j,j0,width1=width+1;var points=new Uint8Array(width1*(height+1));var POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);var lineSize=width+7&~7,data0=imgData.data;var data=new Uint8Array(lineSize*height),pos=0,ii;for(i=0,ii=data0.length;i<ii;i++){var mask=128,elem=data0[i];while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1}}var count=0;pos=0;if(data[pos]!==0){points[0]=1;++count}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count}pos++}if(data[pos]!==0){points[j]=2;++count}for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count}var sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count}pos++}if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count}if(count>POINT_TO_PROCESS_LIMIT){return null}}pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count}pos++}if(data[pos]!==0){points[j0+j]=4;++count}if(count>POINT_TO_PROCESS_LIMIT){return null}var steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);var outlines=[];for(i=0;count&&i<=height;i++){var p=i*width1;var end=p+width;while(p<end&&!points[p]){p++}if(p===end){continue}var coords=[p%width1,i];var type=points[p],p0=p,pp;do{var step=steps[type];do{p+=step}while(!points[p]);pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0}else{type=pp&51*type>>4;points[p]&=type>>2|type<<2}coords.push(p%width1);coords.push(p/width1|0);--count}while(p0!==p);outlines.push(coords);--i}var drawOutline=function(c){c.save();c.scale(1/width,-1/height);c.translate(0,-height);c.beginPath();for(var i=0,ii=outlines.length;i<ii;i++){var o=outlines[i];c.moveTo(o[0],o[1]);for(var j=2,jj=o.length;j<jj;j+=2){c.lineTo(o[j],o[j+1])}}c.fill();c.beginPath();c.restore()};return drawOutline}var CanvasExtraState=function CanvasExtraStateClosure(){function CanvasExtraState(old){this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.old=old}CanvasExtraState.prototype={clone:function CanvasExtraState_clone(){return Object.create(this)},setCurrentPoint:function CanvasExtraState_setCurrentPoint(x,y){this.x=x;this.y=y}};return CanvasExtraState}();var CanvasGraphics=function CanvasGraphicsClosure(){var EXECUTION_TIME=15;var EXECUTION_STEPS=10;function CanvasGraphics(canvasCtx,commonObjs,objs,imageLayer){this.ctx=canvasCtx;this.current=new CanvasExtraState;this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.imageLayer=imageLayer;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.cachedCanvases=new CachedCanvases;if(canvasCtx){addContextCurrentTransform(canvasCtx)}this.cachedGetSinglePixelWidth=null}function putBinaryImageData(ctx,imgData){if(typeof ImageData!=="undefined"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return}var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0,destPos;var src=imgData.data;var dest=chunkImgData.data;var i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===ImageKind.GRAYSCALE_1BPP){var srcLength=src.byteLength;var dest32=PDFJS.hasCanvasTypedArrays?new Uint32Array(dest.buffer):new Uint32ArrayView(dest);var dest32DataLength=dest32.length;var fullSrcDiff=width+7>>3;var white=4294967295;var black=PDFJS.isLittleEndian||!PDFJS.hasCanvasTypedArrays?4278190080:255;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){var srcDiff=srcLength-srcPos;var k=0;var kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;var kEndUnrolled=kEnd&~7;var mask=0;var srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black}for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128}dest32[destPos++]=srcByte&mask?white:black;mask>>=1}}while(destPos<dest32DataLength){dest32[destPos++]=0}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}else if(imgData.kind===ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=FULL_CHUNK_HEIGHT}if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j)}}else if(imgData.kind===ImageKind.RGB_24BPP){thisChunkHeight=FULL_CHUNK_HEIGHT;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight}destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}else{error("bad image kind: "+imgData.kind)}}function putBinaryImageMask(ctx,imgData){var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0;var src=imgData.data;var dest=chunkImgData.data;for(var i=0;i<totalChunks;i++){var thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;var destPos=3;for(var j=0;j<thisChunkHeight;j++){var mask=0;for(var k=0;k<width;k++){if(!mask){var elem=src[srcPos++];mask=128}dest[destPos]=elem&mask?0:255;destPos+=4;mask>>=1}}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}function copyCtxState(sourceCtx,destCtx){var properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(var i=0,ii=properties.length;i<ii;i++){var property=properties[i];if(sourceCtx[property]!==undefined){destCtx[property]=sourceCtx[property]}}if(sourceCtx.setLineDash!==undefined){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset}else if(sourceCtx.mozDashOffset!==undefined){destCtx.mozDash=sourceCtx.mozDash;destCtx.mozDashOffset=sourceCtx.mozDashOffset}}function composeSMaskBackdrop(bytes,r0,g0,b0){var length=bytes.length;for(var i=3;i<length;i+=4){var alpha=bytes[i];if(alpha===0){bytes[i-3]=r0;bytes[i-2]=g0;bytes[i-1]=b0}else if(alpha<255){var alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8;bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8;bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8}}}function composeSMaskAlpha(maskData,layerData,transferMap){var length=maskData.length;var scale=1/255;for(var i=3;i<length;i+=4){var alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0}}function composeSMaskLuminosity(maskData,layerData,transferMap){var length=maskData.length;for(var i=3;i<length;i+=4){var y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16}}function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap){var hasBackdrop=!!backdrop;var r0=hasBackdrop?backdrop[0]:0;var g0=hasBackdrop?backdrop[1]:0;var b0=hasBackdrop?backdrop[2]:0;var composeFn;if(subtype==="Luminosity"){composeFn=composeSMaskLuminosity}else{composeFn=composeSMaskAlpha}var PIXELS_TO_PROCESS=1048576;var chunkSize=Math.min(height,Math.ceil(PIXELS_TO_PROCESS/width));for(var row=0;row<height;row+=chunkSize){var chunkHeight=Math.min(chunkSize,height-row);var maskData=maskCtx.getImageData(0,row,width,chunkHeight);var layerData=layerCtx.getImageData(0,row,width,chunkHeight);if(hasBackdrop){composeSMaskBackdrop(maskData.data,r0,g0,b0)}composeFn(maskData.data,layerData.data,transferMap);maskCtx.putImageData(layerData,0,row)}}function composeSMask(ctx,smask,layerCtx){var mask=smask.canvas;var maskCtx=smask.context;ctx.setTransform(smask.scaleX,0,0,smask.scaleY,smask.offsetX,smask.offsetY);var backdrop=smask.backdrop||null;if(!smask.transferMap&&WebGLUtils.isEnabled){var composed=WebGLUtils.composeSMask(layerCtx.canvas,mask,{subtype:smask.subtype,backdrop:backdrop});ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(composed,smask.offsetX,smask.offsetY);return}genericComposeSMask(maskCtx,layerCtx,mask.width,mask.height,smask.subtype,backdrop,smask.transferMap);ctx.drawImage(mask,0,0)}var LINE_CAP_STYLES=["butt","round","square"];var LINE_JOIN_STYLES=["miter","round","bevel"];var NORMAL_CLIP={};var EO_CLIP={};CanvasGraphics.prototype={beginDrawing:function CanvasGraphics_beginDrawing(transform,viewport,transparency){var width=this.ctx.canvas.width;var height=this.ctx.canvas.height;this.ctx.save();this.ctx.fillStyle="rgb(255, 255, 255)";this.ctx.fillRect(0,0,width,height);this.ctx.restore();if(transparency){var transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height,true);this.compositeCtx=this.ctx;this.transparentCanvas=transparentCanvas.canvas;this.ctx=transparentCanvas.context;this.ctx.save();this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save();if(transform){this.ctx.transform.apply(this.ctx,transform)}this.ctx.transform.apply(this.ctx,viewport.transform);this.baseTransform=this.ctx.mozCurrentTransform.slice();if(this.imageLayer){this.imageLayer.beginLayout()}},executeOperatorList:function CanvasGraphics_executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var i=executionStartIdx||0;var argsArrayLen=argsArray.length;if(argsArrayLen===i){return i}var chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback==="function";var endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;var steps=0;var commonObjs=this.commonObjs;var objs=this.objs;var fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i}fnId=fnArray[i];if(fnId!==OPS.dependency){this[fnId].apply(this,argsArray[i])}else{var deps=argsArray[i];for(var n=0,nn=deps.length;n<nn;n++){var depObjId=deps[n];var common=depObjId[0]==="g"&&depObjId[1]==="_";var objsPool=common?commonObjs:objs;if(!objsPool.isResolved(depObjId)){objsPool.get(depObjId,continueCallback);return i}}}i++;if(i===argsArrayLen){return i}if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i}steps=0}}},endDrawing:function CanvasGraphics_endDrawing(){this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.drawImage(this.transparentCanvas,0,0);this.transparentCanvas=null}this.cachedCanvases.clear();WebGLUtils.clear();if(this.imageLayer){this.imageLayer.endLayout()}},setLineWidth:function CanvasGraphics_setLineWidth(width){this.current.lineWidth=width;this.ctx.lineWidth=width},setLineCap:function CanvasGraphics_setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style]},setLineJoin:function CanvasGraphics_setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style]},setMiterLimit:function CanvasGraphics_setMiterLimit(limit){this.ctx.miterLimit=limit},setDash:function CanvasGraphics_setDash(dashArray,dashPhase){var ctx=this.ctx;if(ctx.setLineDash!==undefined){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase}else{ctx.mozDash=dashArray;ctx.mozDashOffset=dashPhase}},setRenderingIntent:function CanvasGraphics_setRenderingIntent(intent){},setFlatness:function CanvasGraphics_setFlatness(flatness){},setGState:function CanvasGraphics_setGState(states){for(var i=0,ii=states.length;i<ii;i++){var state=states[i];var key=state[0];var value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=state[1];break;case"ca":this.current.fillAlpha=state[1];this.ctx.globalAlpha=state[1];break;case"BM":if(value&&value.name&&value.name!=="Normal"){var mode=value.name.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()}).substring(1);this.ctx.globalCompositeOperation=mode;if(this.ctx.globalCompositeOperation!==mode){warn('globalCompositeOperation "'+mode+'" is not supported')}}else{this.ctx.globalCompositeOperation="source-over"}break;case"SMask":if(this.current.activeSMask){this.endSMaskGroup()}this.current.activeSMask=value?this.tempSMask:null;if(this.current.activeSMask){this.beginSMaskGroup()}this.tempSMask=null;break}}},beginSMaskGroup:function CanvasGraphics_beginSMaskGroup(){var activeSMask=this.current.activeSMask;var drawnWidth=activeSMask.canvas.width;var drawnHeight=activeSMask.canvas.height;var cacheId="smaskGroupAt"+this.groupLevel;var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,true);var currentCtx=this.ctx;var currentTransform=currentCtx.mozCurrentTransform;this.ctx.save();var groupCtx=scratchCanvas.context;groupCtx.scale(1/activeSMask.scaleX,1/activeSMask.scaleY);groupCtx.translate(-activeSMask.offsetX,-activeSMask.offsetY);groupCtx.transform.apply(groupCtx,currentTransform);copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(currentCtx);this.groupLevel++},endSMaskGroup:function CanvasGraphics_endSMaskGroup(){var groupCtx=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();composeSMask(this.ctx,this.current.activeSMask,groupCtx);this.ctx.restore();copyCtxState(groupCtx,this.ctx)},save:function CanvasGraphics_save(){this.ctx.save();var old=this.current;this.stateStack.push(old);this.current=old.clone();this.current.activeSMask=null},restore:function CanvasGraphics_restore(){if(this.stateStack.length!==0){if(this.current.activeSMask!==null){this.endSMaskGroup()}this.current=this.stateStack.pop();this.ctx.restore();this.pendingClip=null;this.cachedGetSinglePixelWidth=null}},transform:function CanvasGraphics_transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this.cachedGetSinglePixelWidth=null},constructPath:function CanvasGraphics_constructPath(ops,args){var ctx=this.ctx;var current=this.current;var x=current.x,y=current.y;for(var i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];if(width===0){width=this.getSinglePixelWidth()}if(height===0){height=this.getSinglePixelWidth()}var xw=x+width;var yh=y+height;this.ctx.moveTo(x,y);this.ctx.lineTo(xw,y);this.ctx.lineTo(xw,yh);this.ctx.lineTo(x,yh);this.ctx.lineTo(x,y);this.ctx.closePath();break;case OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);break;case OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);break;case OPS.curveTo:x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);j+=6;break;case OPS.curveTo2:ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);x=args[j+2];y=args[j+3];j+=4;break;case OPS.curveTo3:x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);j+=4;break;case OPS.closePath:ctx.closePath();break}}current.setCurrentPoint(x,y)},closePath:function CanvasGraphics_closePath(){this.ctx.closePath()},stroke:function CanvasGraphics_stroke(consumePath){consumePath=typeof consumePath!=="undefined"?consumePath:true;var ctx=this.ctx;var strokeColor=this.current.strokeColor;ctx.lineWidth=Math.max(this.getSinglePixelWidth()*MIN_WIDTH_FACTOR,this.current.lineWidth);ctx.globalAlpha=this.current.strokeAlpha;if(strokeColor&&strokeColor.hasOwnProperty("type")&&strokeColor.type==="Pattern"){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this);ctx.stroke();ctx.restore()}else{ctx.stroke()}if(consumePath){this.consumePath()}ctx.globalAlpha=this.current.fillAlpha},closeStroke:function CanvasGraphics_closeStroke(){this.closePath();this.stroke()},fill:function CanvasGraphics_fill(consumePath){consumePath=typeof consumePath!=="undefined"?consumePath:true;var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var needRestore=false;if(isPatternFill){ctx.save();if(this.baseTransform){ctx.setTransform.apply(ctx,this.baseTransform)}ctx.fillStyle=fillColor.getPattern(ctx,this);needRestore=true}if(this.pendingEOFill){if(ctx.mozFillRule!==undefined){ctx.mozFillRule="evenodd";ctx.fill();ctx.mozFillRule="nonzero"}else{ctx.fill("evenodd")}this.pendingEOFill=false}else{ctx.fill()}if(needRestore){ctx.restore()}if(consumePath){this.consumePath()}},eoFill:function CanvasGraphics_eoFill(){this.pendingEOFill=true;this.fill()},fillStroke:function CanvasGraphics_fillStroke(){this.fill(false);this.stroke(false);this.consumePath()},eoFillStroke:function CanvasGraphics_eoFillStroke(){this.pendingEOFill=true;this.fillStroke()},closeFillStroke:function CanvasGraphics_closeFillStroke(){this.closePath();this.fillStroke()},closeEOFillStroke:function CanvasGraphics_closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke()},endPath:function CanvasGraphics_endPath(){this.consumePath()},clip:function CanvasGraphics_clip(){this.pendingClip=NORMAL_CLIP},eoClip:function CanvasGraphics_eoClip(){this.pendingClip=EO_CLIP},beginText:function CanvasGraphics_beginText(){this.current.textMatrix=IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},endText:function CanvasGraphics_endText(){var paths=this.pendingTextPaths;var ctx=this.ctx;if(paths===undefined){ctx.beginPath();return}ctx.save();ctx.beginPath();for(var i=0;i<paths.length;i++){var path=paths[i];ctx.setTransform.apply(ctx,path.transform);ctx.translate(path.x,path.y);path.addToPath(ctx,path.fontSize)}ctx.restore();ctx.clip();ctx.beginPath();delete this.pendingTextPaths},setCharSpacing:function CanvasGraphics_setCharSpacing(spacing){this.current.charSpacing=spacing},setWordSpacing:function CanvasGraphics_setWordSpacing(spacing){this.current.wordSpacing=spacing},setHScale:function CanvasGraphics_setHScale(scale){this.current.textHScale=scale/100},setLeading:function CanvasGraphics_setLeading(leading){this.current.leading=-leading},setFont:function CanvasGraphics_setFont(fontRefName,size){var fontObj=this.commonObjs.get(fontRefName);var current=this.current;if(!fontObj){error("Can't find font for "+fontRefName)}current.fontMatrix=fontObj.fontMatrix?fontObj.fontMatrix:FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){warn("Invalid font matrix for font "+fontRefName)}if(size<0){size=-size;current.fontDirection=-1}else{current.fontDirection=1}this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return}var name=fontObj.loadedName||"sans-serif";var bold=fontObj.black?fontObj.bold?"900":"bold":fontObj.bold?"bold":"normal";var italic=fontObj.italic?"italic":"normal";var typeface='"'+name+'", '+fontObj.fallbackName;var browserFontSize=size<MIN_FONT_SIZE?MIN_FONT_SIZE:size>MAX_FONT_SIZE?MAX_FONT_SIZE:size;this.current.fontSizeScale=size/browserFontSize;var rule=italic+" "+bold+" "+browserFontSize+"px "+typeface;this.ctx.font=rule},setTextRenderingMode:function CanvasGraphics_setTextRenderingMode(mode){this.current.textRenderingMode=mode},setTextRise:function CanvasGraphics_setTextRise(rise){this.current.textRise=rise},moveText:function CanvasGraphics_moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y},setLeadingMoveText:function CanvasGraphics_setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y)},setTextMatrix:function CanvasGraphics_setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.sqrt(a*a+b*b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},nextLine:function CanvasGraphics_nextLine(){this.moveText(0,this.current.leading)},paintChar:function CanvasGraphics_paintChar(character,x,y){var ctx=this.ctx;var current=this.current;var font=current.font;var textRenderingMode=current.textRenderingMode;var fontSize=current.fontSize/current.fontSizeScale;var fillStrokeMode=textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;var isAddToPathSet=!!(textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG);var addToPath;if(font.disableFontFace||isAddToPathSet){addToPath=font.getPathGenerator(this.commonObjs,character)}if(font.disableFontFace){ctx.save();ctx.translate(x,y);ctx.beginPath();addToPath(ctx,fontSize);if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fill()}if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.stroke()}ctx.restore()}else{if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y)}if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y)}}if(isAddToPathSet){var paths=this.pendingTextPaths||(this.pendingTextPaths=[]);paths.push({transform:ctx.mozCurrentTransform,x:x,y:y,fontSize:fontSize,addToPath:addToPath})}},get isFontSubpixelAAEnabled(){var ctx=document.createElement("canvas").getContext("2d");ctx.scale(1.5,1);ctx.fillText("I",0,10);var data=ctx.getImageData(0,0,10,10).data;var enabled=false;for(var i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break}}return shadow(this,"isFontSubpixelAAEnabled",enabled)},showText:function CanvasGraphics_showText(glyphs){var current=this.current;var font=current.font;if(font.isType3Font){return this.showType3Text(glyphs)}var fontSize=current.fontSize;if(fontSize===0){return}var ctx=this.ctx;var fontSizeScale=current.fontSizeScale;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var spacingDir=vertical?1:-1;var defaultVMetrics=font.defaultVMetrics;var widthAdvanceScale=fontSize*current.fontMatrix[0];var simpleFillText=current.textRenderingMode===TextRenderingMode.FILL&&!font.disableFontFace;ctx.save();ctx.transform.apply(ctx,current.textMatrix);ctx.translate(current.x,current.y+current.textRise);if(current.patternFill){ctx.fillStyle=current.fillColor.getPattern(ctx,this)}if(fontDirection>0){ctx.scale(textHScale,-1)}else{ctx.scale(textHScale,1)}var lineWidth=current.lineWidth;var scale=current.textMatrixScale;if(scale===0||lineWidth===0){var fillStrokeMode=current.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){this.cachedGetSinglePixelWidth=null;lineWidth=this.getSinglePixelWidth()*MIN_WIDTH_FACTOR}}else{lineWidth/=scale}if(fontSizeScale!==1){ctx.scale(fontSizeScale,fontSizeScale);

lineWidth/=fontSizeScale}ctx.lineWidth=lineWidth;var x=0,i;for(i=0;i<glyphsLength;++i){var glyph=glyphs[i];if(isNum(glyph)){x+=spacingDir*glyph*fontSize/1e3;continue}var restoreNeeded=false;var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;var character=glyph.fontChar;var accent=glyph.accent;var scaledX,scaledY,scaledAccentX,scaledAccentY;var width=glyph.width;if(vertical){var vmetric,vx,vy;vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*.5;vx=-vx*widthAdvanceScale;vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale}else{scaledX=x/fontSizeScale;scaledY=0}if(font.remeasure&&width>0){var measuredWidth=ctx.measureText(character).width*1e3/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){var characterScaleX=width/measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX/=characterScaleX}else if(width!==measuredWidth){scaledX+=(width-measuredWidth)/2e3*fontSize/fontSizeScale}}if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY)}else{this.paintChar(character,scaledX,scaledY);if(accent){scaledAccentX=scaledX+accent.offset.x/fontSizeScale;scaledAccentY=scaledY-accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY)}}var charWidth=width*widthAdvanceScale+spacing*fontDirection;x+=charWidth;if(restoreNeeded){ctx.restore()}}if(vertical){current.y-=x*textHScale}else{current.x+=x*textHScale}ctx.restore()},showType3Text:function CanvasGraphics_showType3Text(glyphs){var ctx=this.ctx;var current=this.current;var font=current.font;var fontSize=current.fontSize;var fontDirection=current.fontDirection;var spacingDir=font.vertical?1:-1;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var textHScale=current.textHScale*fontDirection;var fontMatrix=current.fontMatrix||FONT_IDENTITY_MATRIX;var glyphsLength=glyphs.length;var isTextInvisible=current.textRenderingMode===TextRenderingMode.INVISIBLE;var i,glyph,width,spacingLength;if(isTextInvisible||fontSize===0){return}this.cachedGetSinglePixelWidth=null;ctx.save();ctx.transform.apply(ctx,current.textMatrix);ctx.translate(current.x,current.y);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(isNum(glyph)){spacingLength=spacingDir*glyph*fontSize/1e3;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue}var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;var operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){warn('Type3 character "'+glyph.operatorListId+'" is not available');continue}this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform.apply(ctx,fontMatrix);this.executeOperatorList(operatorList);this.restore();var transformed=Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+spacing;ctx.translate(width,0);current.x+=width*textHScale}ctx.restore();this.processingType3=null},setCharWidth:function CanvasGraphics_setCharWidth(xWidth,yWidth){},setCharWidthAndBounds:function CanvasGraphics_setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.clip();this.endPath()},getColorN_Pattern:function CanvasGraphics_getColorN_Pattern(IR){var pattern;if(IR[0]==="TilingPattern"){var color=IR[1];var baseTransform=this.baseTransform||this.ctx.mozCurrentTransform.slice();var self=this;var canvasGraphicsFactory={createCanvasGraphics:function(ctx){return new CanvasGraphics(ctx,self.commonObjs,self.objs)}};pattern=new TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform)}else{pattern=getShadingPatternFromIR(IR)}return pattern},setStrokeColorN:function CanvasGraphics_setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function CanvasGraphics_setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true},setStrokeRGBColor:function CanvasGraphics_setStrokeRGBColor(r,g,b){var color=Util.makeCssRgb(r,g,b);this.ctx.strokeStyle=color;this.current.strokeColor=color},setFillRGBColor:function CanvasGraphics_setFillRGBColor(r,g,b){var color=Util.makeCssRgb(r,g,b);this.ctx.fillStyle=color;this.current.fillColor=color;this.current.patternFill=false},shadingFill:function CanvasGraphics_shadingFill(patternIR){var ctx=this.ctx;this.save();var pattern=getShadingPatternFromIR(patternIR);ctx.fillStyle=pattern.getPattern(ctx,this,true);var inv=ctx.mozCurrentTransformInverse;if(inv){var canvas=ctx.canvas;var width=canvas.width;var height=canvas.height;var bl=Util.applyTransform([0,0],inv);var br=Util.applyTransform([0,height],inv);var ul=Util.applyTransform([width,0],inv);var ur=Util.applyTransform([width,height],inv);var x0=Math.min(bl[0],br[0],ul[0],ur[0]);var y0=Math.min(bl[1],br[1],ul[1],ur[1]);var x1=Math.max(bl[0],br[0],ul[0],ur[0]);var y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10)}this.restore()},beginInlineImage:function CanvasGraphics_beginInlineImage(){error("Should not call beginInlineImage")},beginImageData:function CanvasGraphics_beginImageData(){error("Should not call beginImageData")},paintFormXObjectBegin:function CanvasGraphics_paintFormXObjectBegin(matrix,bbox){this.save();this.baseTransformStack.push(this.baseTransform);if(isArray(matrix)&&6===matrix.length){this.transform.apply(this,matrix)}this.baseTransform=this.ctx.mozCurrentTransform;if(isArray(bbox)&&4===bbox.length){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.clip();this.endPath()}},paintFormXObjectEnd:function CanvasGraphics_paintFormXObjectEnd(){this.restore();this.baseTransform=this.baseTransformStack.pop()},beginGroup:function CanvasGraphics_beginGroup(group){this.save();var currentCtx=this.ctx;if(!group.isolated){info("TODO: Support non-isolated groups.")}if(group.knockout){warn("Knockout groups not supported.")}var currentTransform=currentCtx.mozCurrentTransform;if(group.matrix){currentCtx.transform.apply(currentCtx,group.matrix)}assert(group.bbox,"Bounding box is required.");var bounds=Util.getAxialAlignedBoundingBox(group.bbox,currentCtx.mozCurrentTransform);var canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=Util.intersect(bounds,canvasBounds)||[0,0,0,0];var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);var drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);var scaleX=1,scaleY=1;if(drawnWidth>MAX_GROUP_SIZE){scaleX=drawnWidth/MAX_GROUP_SIZE;drawnWidth=MAX_GROUP_SIZE}if(drawnHeight>MAX_GROUP_SIZE){scaleY=drawnHeight/MAX_GROUP_SIZE;drawnHeight=MAX_GROUP_SIZE}var cacheId="groupAt"+this.groupLevel;if(group.smask){cacheId+="_smask_"+this.smaskCounter++%2}var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,true);var groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY);groupCtx.translate(-offsetX,-offsetY);groupCtx.transform.apply(groupCtx,currentTransform);if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null})}else{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.scale(scaleX,scaleY)}copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(currentCtx);this.groupLevel++},endGroup:function CanvasGraphics_endGroup(group){this.groupLevel--;var groupCtx=this.ctx;this.ctx=this.groupStack.pop();if(this.ctx.imageSmoothingEnabled!==undefined){this.ctx.imageSmoothingEnabled=false}else{this.ctx.mozImageSmoothingEnabled=false}if(group.smask){this.tempSMask=this.smaskStack.pop()}else{this.ctx.drawImage(groupCtx.canvas,0,0)}this.restore()},beginAnnotations:function CanvasGraphics_beginAnnotations(){this.save();this.current=new CanvasExtraState;if(this.baseTransform){this.ctx.setTransform.apply(this.ctx,this.baseTransform)}},endAnnotations:function CanvasGraphics_endAnnotations(){this.restore()},beginAnnotation:function CanvasGraphics_beginAnnotation(rect,transform,matrix){this.save();if(isArray(rect)&&4===rect.length){var width=rect[2]-rect[0];var height=rect[3]-rect[1];this.ctx.rect(rect[0],rect[1],width,height);this.clip();this.endPath()}this.transform.apply(this,transform);this.transform.apply(this,matrix)},endAnnotation:function CanvasGraphics_endAnnotation(){this.restore()},paintJpegXObject:function CanvasGraphics_paintJpegXObject(objId,w,h){var domImage=this.objs.get(objId);if(!domImage){warn("Dependent image isn't ready yet");return}this.save();var ctx=this.ctx;ctx.scale(1/w,-1/h);ctx.drawImage(domImage,0,0,domImage.width,domImage.height,0,-h,w,h);if(this.imageLayer){var currentTransform=ctx.mozCurrentTransformInverse;var position=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:objId,left:position[0],top:position[1],width:w/currentTransform[0],height:h/currentTransform[3]})}this.restore()},paintImageMaskXObject:function CanvasGraphics_paintImageMaskXObject(img){var ctx=this.ctx;var width=img.width,height=img.height;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var glyph=this.processingType3;if(COMPILE_TYPE3_GLYPHS&&glyph&&glyph.compiled===undefined){if(width<=MAX_SIZE_TO_COMPILE&&height<=MAX_SIZE_TO_COMPILE){glyph.compiled=compileType3Glyph({data:img.data,width:width,height:height})}else{glyph.compiled=null}}if(glyph&&glyph.compiled){glyph.compiled(ctx);return}var maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation="source-in";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();this.paintInlineImageXObject(maskCanvas.canvas)},paintImageMaskXObjectRepeat:function CanvasGraphics_paintImageMaskXObjectRepeat(imgData,scaleX,scaleY,positions){var width=imgData.width;var height=imgData.height;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,imgData);maskCtx.globalCompositeOperation="source-in";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();var ctx=this.ctx;for(var i=0,ii=positions.length;i<ii;i+=2){ctx.save();ctx.transform(scaleX,0,0,scaleY,positions[i],positions[i+1]);ctx.scale(1,-1);ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore()}},paintImageMaskXObjectGroup:function CanvasGraphics_paintImageMaskXObjectGroup(images){var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;for(var i=0,ii=images.length;i<ii;i++){var image=images[i];var width=image.width,height=image.height;var maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,image);maskCtx.globalCompositeOperation="source-in";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform.apply(ctx,image.transform);ctx.scale(1,-1);ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore()}},paintImageXObject:function CanvasGraphics_paintImageXObject(objId){var imgData=this.objs.get(objId);if(!imgData){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(imgData)},paintImageXObjectRepeat:function CanvasGraphics_paintImageXObjectRepeat(objId,scaleX,scaleY,positions){var imgData=this.objs.get(objId);if(!imgData){warn("Dependent image isn't ready yet");return}var width=imgData.width;var height=imgData.height;var map=[];for(var i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height})}this.paintInlineImageXObjectGroup(imgData,map)},paintInlineImageXObject:function CanvasGraphics_paintInlineImageXObject(imgData){var width=imgData.width;var height=imgData.height;var ctx=this.ctx;this.save();ctx.scale(1/width,-1/height);var currentTransform=ctx.mozCurrentTransformInverse;var a=currentTransform[0],b=currentTransform[1];var widthScale=Math.max(Math.sqrt(a*a+b*b),1);var c=currentTransform[2],d=currentTransform[3];var heightScale=Math.max(Math.sqrt(c*c+d*d),1);var imgToPaint,tmpCanvas;if(imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData}else{tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=tmpCanvas.canvas}var paintWidth=width,paintHeight=height;var tmpCanvasId="prescale1";while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){var newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=Math.ceil(paintWidth/2);widthScale/=paintWidth/newWidth}if(heightScale>2&&paintHeight>1){newHeight=Math.ceil(paintHeight/2);heightScale/=paintHeight/newHeight}tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);imgToPaint=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId==="prescale1"?"prescale2":"prescale1"}ctx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,-height,width,height);if(this.imageLayer){var position=this.getCanvasPosition(0,-height);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:width/currentTransform[0],height:height/currentTransform[3]})}this.restore()},paintInlineImageXObjectGroup:function CanvasGraphics_paintInlineImageXObjectGroup(imgData,map){var ctx=this.ctx;var w=imgData.width;var h=imgData.height;var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);for(var i=0,ii=map.length;i<ii;i++){var entry=map[i];ctx.save();ctx.transform.apply(ctx,entry.transform);ctx.scale(1,-1);ctx.drawImage(tmpCanvas.canvas,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);if(this.imageLayer){var position=this.getCanvasPosition(entry.x,entry.y);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:w,height:h})}ctx.restore()}},paintSolidColorImageMask:function CanvasGraphics_paintSolidColorImageMask(){this.ctx.fillRect(0,0,1,1)},paintXObject:function CanvasGraphics_paintXObject(){warn("Unsupported 'paintXObject' command.")},markPoint:function CanvasGraphics_markPoint(tag){},markPointProps:function CanvasGraphics_markPointProps(tag,properties){},beginMarkedContent:function CanvasGraphics_beginMarkedContent(tag){},beginMarkedContentProps:function CanvasGraphics_beginMarkedContentProps(tag,properties){},endMarkedContent:function CanvasGraphics_endMarkedContent(){},beginCompat:function CanvasGraphics_beginCompat(){},endCompat:function CanvasGraphics_endCompat(){},consumePath:function CanvasGraphics_consumePath(){var ctx=this.ctx;if(this.pendingClip){if(this.pendingClip===EO_CLIP){if(ctx.mozFillRule!==undefined){ctx.mozFillRule="evenodd";ctx.clip();ctx.mozFillRule="nonzero"}else{ctx.clip("evenodd")}}else{ctx.clip()}this.pendingClip=null}ctx.beginPath()},getSinglePixelWidth:function CanvasGraphics_getSinglePixelWidth(scale){if(this.cachedGetSinglePixelWidth===null){var inverse=this.ctx.mozCurrentTransformInverse;this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(inverse[0]*inverse[0]+inverse[1]*inverse[1],inverse[2]*inverse[2]+inverse[3]*inverse[3]))}return this.cachedGetSinglePixelWidth},getCanvasPosition:function CanvasGraphics_getCanvasPosition(x,y){var transform=this.ctx.mozCurrentTransform;return[transform[0]*x+transform[2]*y+transform[4],transform[1]*x+transform[3]*y+transform[5]]}};for(var op in OPS){CanvasGraphics.prototype[OPS[op]]=CanvasGraphics.prototype[op]}return CanvasGraphics}();exports.CanvasGraphics=CanvasGraphics;exports.createScratchCanvas=createScratchCanvas});(function(root,factory){{factory(root.pdfjsDisplayAPI={},root.pdfjsSharedUtil,root.pdfjsDisplayFontLoader,root.pdfjsDisplayCanvas,root.pdfjsDisplayMetadata,root.pdfjsSharedGlobal)}})(this,function(exports,sharedUtil,displayFontLoader,displayCanvas,displayMetadata,sharedGlobal,amdRequire){var InvalidPDFException=sharedUtil.InvalidPDFException;var MessageHandler=sharedUtil.MessageHandler;var MissingPDFException=sharedUtil.MissingPDFException;var PasswordResponses=sharedUtil.PasswordResponses;var PasswordException=sharedUtil.PasswordException;var StatTimer=sharedUtil.StatTimer;var UnexpectedResponseException=sharedUtil.UnexpectedResponseException;var UnknownErrorException=sharedUtil.UnknownErrorException;var Util=sharedUtil.Util;var createPromiseCapability=sharedUtil.createPromiseCapability;var combineUrl=sharedUtil.combineUrl;var error=sharedUtil.error;var deprecated=sharedUtil.deprecated;var info=sharedUtil.info;var isArrayBuffer=sharedUtil.isArrayBuffer;var loadJpegStream=sharedUtil.loadJpegStream;var stringToBytes=sharedUtil.stringToBytes;var warn=sharedUtil.warn;var FontFaceObject=displayFontLoader.FontFaceObject;var FontLoader=displayFontLoader.FontLoader;var CanvasGraphics=displayCanvas.CanvasGraphics;var createScratchCanvas=displayCanvas.createScratchCanvas;var Metadata=displayMetadata.Metadata;var PDFJS=sharedGlobal.PDFJS;var globalScope=sharedGlobal.globalScope;var DEFAULT_RANGE_CHUNK_SIZE=65536;var useRequireEnsure=false;if(typeof module!=="undefined"&&module.require){PDFJS.disableWorker=true;if(typeof require.ensure==="undefined"){require.ensure=require("node-ensure")}useRequireEnsure=true}if(typeof __webpack_require__!=="undefined"){PDFJS.workerSrc=require("entry?name=[hash]-worker.js!./pdf.worker.js");useRequireEnsure=true}if(typeof requirejs!=="undefined"&&requirejs.toUrl){PDFJS.workerSrc=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js")}var fakeWorkerFilesLoader=useRequireEnsure?function(callback){require.ensure([],function(){require("./pdf.worker.js");callback()})}:typeof requirejs!=="undefined"?function(callback){requirejs(["pdfjs-dist/build/pdf.worker"],function(worker){callback()})}:null;PDFJS.maxImageSize=PDFJS.maxImageSize===undefined?-1:PDFJS.maxImageSize;PDFJS.cMapUrl=PDFJS.cMapUrl===undefined?null:PDFJS.cMapUrl;PDFJS.cMapPacked=PDFJS.cMapPacked===undefined?false:PDFJS.cMapPacked;PDFJS.disableFontFace=PDFJS.disableFontFace===undefined?false:PDFJS.disableFontFace;PDFJS.imageResourcesPath=PDFJS.imageResourcesPath===undefined?"":PDFJS.imageResourcesPath;PDFJS.disableWorker=PDFJS.disableWorker===undefined?false:PDFJS.disableWorker;PDFJS.workerSrc=PDFJS.workerSrc===undefined?null:PDFJS.workerSrc;PDFJS.disableRange=PDFJS.disableRange===undefined?false:PDFJS.disableRange;PDFJS.disableStream=PDFJS.disableStream===undefined?false:PDFJS.disableStream;PDFJS.disableAutoFetch=PDFJS.disableAutoFetch===undefined?false:PDFJS.disableAutoFetch;PDFJS.pdfBug=PDFJS.pdfBug===undefined?false:PDFJS.pdfBug;PDFJS.postMessageTransfers=PDFJS.postMessageTransfers===undefined?true:PDFJS.postMessageTransfers;PDFJS.disableCreateObjectURL=PDFJS.disableCreateObjectURL===undefined?false:PDFJS.disableCreateObjectURL;PDFJS.disableWebGL=PDFJS.disableWebGL===undefined?true:PDFJS.disableWebGL;PDFJS.disableFullscreen=PDFJS.disableFullscreen===undefined?false:PDFJS.disableFullscreen;PDFJS.useOnlyCssZoom=PDFJS.useOnlyCssZoom===undefined?false:PDFJS.useOnlyCssZoom;PDFJS.verbosity=PDFJS.verbosity===undefined?PDFJS.VERBOSITY_LEVELS.warnings:PDFJS.verbosity;PDFJS.maxCanvasPixels=PDFJS.maxCanvasPixels===undefined?16777216:PDFJS.maxCanvasPixels;PDFJS.openExternalLinksInNewWindow=PDFJS.openExternalLinksInNewWindow===undefined?false:PDFJS.openExternalLinksInNewWindow;PDFJS.externalLinkTarget=PDFJS.externalLinkTarget===undefined?PDFJS.LinkTarget.NONE:PDFJS.externalLinkTarget;PDFJS.externalLinkRel=PDFJS.externalLinkRel===undefined?"noreferrer":PDFJS.externalLinkRel;PDFJS.isEvalSupported=PDFJS.isEvalSupported===undefined?true:PDFJS.isEvalSupported;PDFJS.getDocument=function getDocument(src,pdfDataRangeTransport,passwordCallback,progressCallback){var task=new PDFDocumentLoadingTask;if(arguments.length>1){deprecated("getDocument is called with pdfDataRangeTransport, "+"passwordCallback or progressCallback argument")}if(pdfDataRangeTransport){if(!(pdfDataRangeTransport instanceof PDFDataRangeTransport)){pdfDataRangeTransport=Object.create(pdfDataRangeTransport);pdfDataRangeTransport.length=src.length;pdfDataRangeTransport.initialData=src.initialData;if(!pdfDataRangeTransport.abort){pdfDataRangeTransport.abort=function(){}}}src=Object.create(src);src.range=pdfDataRangeTransport}task.onPassword=passwordCallback||null;task.onProgress=progressCallback||null;var source;if(typeof src==="string"){source={url:src}}else if(isArrayBuffer(src)){source={data:src}}else if(src instanceof PDFDataRangeTransport){source={range:src}}else{if(typeof src!=="object"){error("Invalid parameter in getDocument, need either Uint8Array, "+"string or a parameter object")}if(!src.url&&!src.data&&!src.range){error("Invalid parameter object: need either .data, .range or .url")}source=src}var params={};var rangeTransport=null;var worker=null;for(var key in source){if(key==="url"&&typeof window!=="undefined"){params[key]=combineUrl(window.location.href,source[key]);continue}else if(key==="range"){rangeTransport=source[key];continue}else if(key==="worker"){worker=source[key];continue}else if(key==="data"&&!(source[key]instanceof Uint8Array)){var pdfBytes=source[key];if(typeof pdfBytes==="string"){params[key]=stringToBytes(pdfBytes)}else if(typeof pdfBytes==="object"&&pdfBytes!==null&&!isNaN(pdfBytes.length)){params[key]=new Uint8Array(pdfBytes)}else if(isArrayBuffer(pdfBytes)){params[key]=new Uint8Array(pdfBytes)}else{error("Invalid PDF binary data: either typed array, string or "+"array-like object is expected in the data property.")}continue}params[key]=source[key]}params.rangeChunkSize=params.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE;if(!worker){worker=new PDFWorker;task._worker=worker}var docId=task.docId;worker.promise.then(function(){if(task.destroyed){throw new Error("Loading aborted")}return _fetchDocument(worker,params,rangeTransport,docId).then(function(workerId){if(task.destroyed){throw new Error("Loading aborted")}var messageHandler=new MessageHandler(docId,workerId,worker.port);messageHandler.send("Ready",null);var transport=new WorkerTransport(messageHandler,task,rangeTransport);task._transport=transport})}).catch(task._capability.reject);return task};function _fetchDocument(worker,source,pdfDataRangeTransport,docId){if(worker.destroyed){return Promise.reject(new Error("Worker was destroyed"))}source.disableAutoFetch=PDFJS.disableAutoFetch;source.disableStream=PDFJS.disableStream;source.chunkedViewerLoading=!!pdfDataRangeTransport;if(pdfDataRangeTransport){source.length=pdfDataRangeTransport.length;source.initialData=pdfDataRangeTransport.initialData}return worker.messageHandler.sendWithPromise("GetDocRequest",{docId:docId,source:source,disableRange:PDFJS.disableRange,maxImageSize:PDFJS.maxImageSize,cMapUrl:PDFJS.cMapUrl,cMapPacked:PDFJS.cMapPacked,disableFontFace:PDFJS.disableFontFace,disableCreateObjectURL:PDFJS.disableCreateObjectURL,verbosity:PDFJS.verbosity}).then(function(workerId){if(worker.destroyed){throw new Error("Worker was destroyed")}return workerId})}var PDFDocumentLoadingTask=function PDFDocumentLoadingTaskClosure(){var nextDocumentId=0;function PDFDocumentLoadingTask(){this._capability=createPromiseCapability();this._transport=null;this._worker=null;this.docId="d"+nextDocumentId++;this.destroyed=false;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}PDFDocumentLoadingTask.prototype={get promise(){return this._capability.promise},destroy:function(){this.destroyed=true;var transportDestroyed=!this._transport?Promise.resolve():this._transport.destroy();return transportDestroyed.then(function(){this._transport=null;if(this._worker){this._worker.destroy();this._worker=null}}.bind(this))},then:function PDFDocumentLoadingTask_then(onFulfilled,onRejected){return this.promise.then.apply(this.promise,arguments)}};return PDFDocumentLoadingTask}();var PDFDataRangeTransport=function pdfDataRangeTransportClosure(){function PDFDataRangeTransport(length,initialData){this.length=length;this.initialData=initialData;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._readyCapability=createPromiseCapability()}PDFDataRangeTransport.prototype={addRangeListener:function PDFDataRangeTransport_addRangeListener(listener){this._rangeListeners.push(listener)},addProgressListener:function PDFDataRangeTransport_addProgressListener(listener){this._progressListeners.push(listener)},addProgressiveReadListener:function PDFDataRangeTransport_addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener)},onDataRange:function PDFDataRangeTransport_onDataRange(begin,chunk){var listeners=this._rangeListeners;for(var i=0,n=listeners.length;i<n;++i){listeners[i](begin,chunk)}},onDataProgress:function PDFDataRangeTransport_onDataProgress(loaded){this._readyCapability.promise.then(function(){var listeners=this._progressListeners;for(var i=0,n=listeners.length;i<n;++i){listeners[i](loaded)}}.bind(this))},onDataProgressiveRead:function PDFDataRangeTransport_onDataProgress(chunk){this._readyCapability.promise.then(function(){var listeners=this._progressiveReadListeners;for(var i=0,n=listeners.length;i<n;++i){listeners[i](chunk)}}.bind(this))},transportReady:function PDFDataRangeTransport_transportReady(){this._readyCapability.resolve()},requestDataRange:function PDFDataRangeTransport_requestDataRange(begin,end){throw new Error("Abstract method PDFDataRangeTransport.requestDataRange")},abort:function PDFDataRangeTransport_abort(){}};return PDFDataRangeTransport}();PDFJS.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function PDFDocumentProxyClosure(){function PDFDocumentProxy(pdfInfo,transport,loadingTask){this.pdfInfo=pdfInfo;this.transport=transport;this.loadingTask=loadingTask}PDFDocumentProxy.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function PDFDocumentProxy_getPage(pageNumber){return this.transport.getPage(pageNumber)},getPageIndex:function PDFDocumentProxy_getPageIndex(ref){return this.transport.getPageIndex(ref)},getDestinations:function PDFDocumentProxy_getDestinations(){return this.transport.getDestinations()},getDestination:function PDFDocumentProxy_getDestination(id){return this.transport.getDestination(id)},getAttachments:function PDFDocumentProxy_getAttachments(){return this.transport.getAttachments()},getJavaScript:function PDFDocumentProxy_getJavaScript(){return this.transport.getJavaScript()},getOutline:function PDFDocumentProxy_getOutline(){return this.transport.getOutline()},getMetadata:function PDFDocumentProxy_getMetadata(){return this.transport.getMetadata()},getData:function PDFDocumentProxy_getData(){return this.transport.getData()},getDownloadInfo:function PDFDocumentProxy_getDownloadInfo(){return this.transport.downloadInfoCapability.promise},getStats:function PDFDocumentProxy_getStats(){return this.transport.getStats()},cleanup:function PDFDocumentProxy_cleanup(){this.transport.startCleanup()},destroy:function PDFDocumentProxy_destroy(){return this.loadingTask.destroy()}};return PDFDocumentProxy}();var PDFPageProxy=function PDFPageProxyClosure(){function PDFPageProxy(pageIndex,pageInfo,transport){this.pageIndex=pageIndex;this.pageInfo=pageInfo;this.transport=transport;this.stats=new StatTimer;this.stats.enabled=!!globalScope.PDFJS.enableStats;this.commonObjs=transport.commonObjs;this.objs=new PDFObjects;this.cleanupAfterRender=false;this.pendingCleanup=false;this.intentStates={};this.destroyed=false}PDFPageProxy.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get view(){return this.pageInfo.view},getViewport:function PDFPageProxy_getViewport(scale,rotate){if(arguments.length<2){rotate=this.rotate}return new PDFJS.PageViewport(this.view,scale,rotate,0,0)},getAnnotations:function PDFPageProxy_getAnnotations(params){var intent=params&&params.intent||null;if(!this.annotationsPromise||this.annotationsIntent!==intent){this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,intent);this.annotationsIntent=intent}return this.annotationsPromise},render:function PDFPageProxy_render(params){var stats=this.stats;stats.time("Overall");this.pendingCleanup=false;var renderingIntent=params.intent==="print"?"print":"display";if(!this.intentStates[renderingIntent]){this.intentStates[renderingIntent]={}}var intentState=this.intentStates[renderingIntent];if(!intentState.displayReadyCapability){intentState.receivingOperatorList=true;intentState.displayReadyCapability=createPromiseCapability();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false};this.stats.time("Page Request");this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:renderingIntent})}var internalRenderTask=new InternalRenderTask(complete,params,this.objs,this.commonObjs,intentState.operatorList,this.pageNumber);internalRenderTask.useRequestAnimationFrame=renderingIntent!=="print";if(!intentState.renderTasks){intentState.renderTasks=[]}intentState.renderTasks.push(internalRenderTask);var renderTask=internalRenderTask.task;if(params.continueCallback){deprecated("render is used with continueCallback parameter");renderTask.onContinue=params.continueCallback}var self=this;intentState.displayReadyCapability.promise.then(function pageDisplayReadyPromise(transparency){if(self.pendingCleanup){complete();return}stats.time("Rendering");internalRenderTask.initalizeGraphics(transparency);internalRenderTask.operatorListChanged()},function pageDisplayReadPromiseError(reason){complete(reason)});function complete(error){var i=intentState.renderTasks.indexOf(internalRenderTask);if(i>=0){intentState.renderTasks.splice(i,1)}if(self.cleanupAfterRender){self.pendingCleanup=true}self._tryCleanup();if(error){internalRenderTask.capability.reject(error)}else{internalRenderTask.capability.resolve()}stats.timeEnd("Rendering");stats.timeEnd("Overall")}return renderTask},getOperatorList:function PDFPageProxy_getOperatorList(){function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList)}}var renderingIntent="oplist";if(!this.intentStates[renderingIntent]){this.intentStates[renderingIntent]={}}var intentState=this.intentStates[renderingIntent];if(!intentState.opListReadCapability){var opListTask={};opListTask.operatorListChanged=operatorListChanged;intentState.receivingOperatorList=true;intentState.opListReadCapability=createPromiseCapability();intentState.renderTasks=[];intentState.renderTasks.push(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false};this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:renderingIntent})}return intentState.opListReadCapability.promise},getTextContent:function PDFPageProxy_getTextContent(params){var normalizeWhitespace=params&&params.normalizeWhitespace||false;return this.transport.messageHandler.sendWithPromise("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:normalizeWhitespace})},_destroy:function PDFPageProxy_destroy(){this.destroyed=true;this.transport.pageCache[this.pageIndex]=null;var waitOn=[];Object.keys(this.intentStates).forEach(function(intent){var intentState=this.intentStates[intent];intentState.renderTasks.forEach(function(renderTask){
var renderCompleted=renderTask.capability.promise.catch(function(){});waitOn.push(renderCompleted);renderTask.cancel()})},this);this.objs.clear();this.annotationsPromise=null;this.pendingCleanup=false;return Promise.all(waitOn)},destroy:function(){deprecated("page destroy method, use cleanup() instead");this.cleanup()},cleanup:function PDFPageProxy_cleanup(){this.pendingCleanup=true;this._tryCleanup()},_tryCleanup:function PDFPageProxy_tryCleanup(){if(!this.pendingCleanup||Object.keys(this.intentStates).some(function(intent){var intentState=this.intentStates[intent];return intentState.renderTasks.length!==0||intentState.receivingOperatorList},this)){return}Object.keys(this.intentStates).forEach(function(intent){delete this.intentStates[intent]},this);this.objs.clear();this.annotationsPromise=null;this.pendingCleanup=false},_startRenderPage:function PDFPageProxy_startRenderPage(transparency,intent){var intentState=this.intentStates[intent];if(intentState.displayReadyCapability){intentState.displayReadyCapability.resolve(transparency)}},_renderPageChunk:function PDFPageProxy_renderPageChunk(operatorListChunk,intent){var intentState=this.intentStates[intent];var i,ii;for(i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i])}intentState.operatorList.lastChunk=operatorListChunk.lastChunk;for(i=0;i<intentState.renderTasks.length;i++){intentState.renderTasks[i].operatorListChanged()}if(operatorListChunk.lastChunk){intentState.receivingOperatorList=false;this._tryCleanup()}}};return PDFPageProxy}();var PDFWorker=function PDFWorkerClosure(){var nextFakeWorkerId=0;function getWorkerSrc(){if(PDFJS.workerSrc){return PDFJS.workerSrc}if(pdfjsFilePath){return pdfjsFilePath.replace(/\.js$/i,".worker.js")}error("No PDFJS.workerSrc specified")}function setupFakeWorkerGlobal(){if(!PDFJS.fakeWorkerFilesLoadedCapability){PDFJS.fakeWorkerFilesLoadedCapability=createPromiseCapability();var loader=fakeWorkerFilesLoader||function(callback){Util.loadScript(getWorkerSrc(),callback)};loader(function(){PDFJS.fakeWorkerFilesLoadedCapability.resolve()})}return PDFJS.fakeWorkerFilesLoadedCapability.promise}function PDFWorker(name){this.name=name;this.destroyed=false;this._readyCapability=createPromiseCapability();this._port=null;this._webWorker=null;this._messageHandler=null;this._initialize()}PDFWorker.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initialize:function PDFWorker_initialize(){if(!globalScope.PDFJS.disableWorker&&typeof Worker!=="undefined"){var workerSrc=getWorkerSrc();try{var worker=new Worker(workerSrc);var messageHandler=new MessageHandler("main","worker",worker);messageHandler.on("test",function PDFWorker_test(data){if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));messageHandler.destroy();worker.terminate();return}var supportTypedArray=data&&data.supportTypedArray;if(supportTypedArray){this._messageHandler=messageHandler;this._port=worker;this._webWorker=worker;if(!data.supportTransfers){PDFJS.postMessageTransfers=false}this._readyCapability.resolve()}else{this._setupFakeWorker();messageHandler.destroy();worker.terminate()}}.bind(this));messageHandler.on("console_log",function(data){console.log.apply(console,data)});messageHandler.on("console_error",function(data){console.error.apply(console,data)});messageHandler.on("ready",function(data){if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));messageHandler.destroy();worker.terminate();return}try{sendTest()}catch(e){this._setupFakeWorker()}}.bind(this));var sendTest=function(){var testObj=new Uint8Array([PDFJS.postMessageTransfers?255:0]);try{messageHandler.send("test",testObj,[testObj.buffer])}catch(ex){info("Cannot use postMessage transfers");testObj[0]=0;messageHandler.send("test",testObj)}};sendTest();return}catch(e){info("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function PDFWorker_setupFakeWorker(){if(!globalScope.PDFJS.disableWorker){warn("Setting up fake worker.");globalScope.PDFJS.disableWorker=true}setupFakeWorkerGlobal().then(function(){if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}var port={_listeners:[],postMessage:function(obj){var e={data:obj};this._listeners.forEach(function(listener){listener.call(this,e)},this)},addEventListener:function(name,listener){this._listeners.push(listener)},removeEventListener:function(name,listener){var i=this._listeners.indexOf(listener);this._listeners.splice(i,1)},terminate:function(){}};this._port=port;var id="fake"+nextFakeWorkerId++;var workerHandler=new MessageHandler(id+"_worker",id,port);PDFJS.WorkerMessageHandler.setup(workerHandler,port);var messageHandler=new MessageHandler(id,id+"_worker",port);this._messageHandler=messageHandler;this._readyCapability.resolve()}.bind(this))},destroy:function PDFWorker_destroy(){this.destroyed=true;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}};return PDFWorker}();PDFJS.PDFWorker=PDFWorker;var WorkerTransport=function WorkerTransportClosure(){function WorkerTransport(messageHandler,loadingTask,pdfDataRangeTransport){this.messageHandler=messageHandler;this.loadingTask=loadingTask;this.pdfDataRangeTransport=pdfDataRangeTransport;this.commonObjs=new PDFObjects;this.fontLoader=new FontLoader(loadingTask.docId);this.destroyed=false;this.destroyCapability=null;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=createPromiseCapability();this.setupMessageHandler()}WorkerTransport.prototype={destroy:function WorkerTransport_destroy(){if(this.destroyCapability){return this.destroyCapability.promise}this.destroyed=true;this.destroyCapability=createPromiseCapability();var waitOn=[];this.pageCache.forEach(function(page){if(page){waitOn.push(page._destroy())}});this.pageCache=[];this.pagePromises=[];var self=this;var terminated=this.messageHandler.sendWithPromise("Terminate",null);waitOn.push(terminated);Promise.all(waitOn).then(function(){self.fontLoader.clear();if(self.pdfDataRangeTransport){self.pdfDataRangeTransport.abort();self.pdfDataRangeTransport=null}if(self.messageHandler){self.messageHandler.destroy();self.messageHandler=null}self.destroyCapability.resolve()},this.destroyCapability.reject);return this.destroyCapability.promise},setupMessageHandler:function WorkerTransport_setupMessageHandler(){var messageHandler=this.messageHandler;function updatePassword(password){messageHandler.send("UpdatePassword",password)}var pdfDataRangeTransport=this.pdfDataRangeTransport;if(pdfDataRangeTransport){pdfDataRangeTransport.addRangeListener(function(begin,chunk){messageHandler.send("OnDataRange",{begin:begin,chunk:chunk})});pdfDataRangeTransport.addProgressListener(function(loaded){messageHandler.send("OnDataProgress",{loaded:loaded})});pdfDataRangeTransport.addProgressiveReadListener(function(chunk){messageHandler.send("OnDataRange",{chunk:chunk})});messageHandler.on("RequestDataRange",function transportDataRange(data){pdfDataRangeTransport.requestDataRange(data.begin,data.end)},this)}messageHandler.on("GetDoc",function transportDoc(data){var pdfInfo=data.pdfInfo;this.numPages=data.pdfInfo.numPages;var loadingTask=this.loadingTask;var pdfDocument=new PDFDocumentProxy(pdfInfo,this,loadingTask);this.pdfDocument=pdfDocument;loadingTask._capability.resolve(pdfDocument)},this);messageHandler.on("NeedPassword",function transportNeedPassword(exception){var loadingTask=this.loadingTask;if(loadingTask.onPassword){return loadingTask.onPassword(updatePassword,PasswordResponses.NEED_PASSWORD)}loadingTask._capability.reject(new PasswordException(exception.message,exception.code))},this);messageHandler.on("IncorrectPassword",function transportIncorrectPassword(exception){var loadingTask=this.loadingTask;if(loadingTask.onPassword){return loadingTask.onPassword(updatePassword,PasswordResponses.INCORRECT_PASSWORD)}loadingTask._capability.reject(new PasswordException(exception.message,exception.code))},this);messageHandler.on("InvalidPDF",function transportInvalidPDF(exception){this.loadingTask._capability.reject(new InvalidPDFException(exception.message))},this);messageHandler.on("MissingPDF",function transportMissingPDF(exception){this.loadingTask._capability.reject(new MissingPDFException(exception.message))},this);messageHandler.on("UnexpectedResponse",function transportUnexpectedResponse(exception){this.loadingTask._capability.reject(new UnexpectedResponseException(exception.message,exception.status))},this);messageHandler.on("UnknownError",function transportUnknownError(exception){this.loadingTask._capability.reject(new UnknownErrorException(exception.message,exception.details))},this);messageHandler.on("DataLoaded",function transportPage(data){this.downloadInfoCapability.resolve(data)},this);messageHandler.on("PDFManagerReady",function transportPage(data){if(this.pdfDataRangeTransport){this.pdfDataRangeTransport.transportReady()}},this);messageHandler.on("StartRenderPage",function transportRender(data){if(this.destroyed){return}var page=this.pageCache[data.pageIndex];page.stats.timeEnd("Page Request");page._startRenderPage(data.transparency,data.intent)},this);messageHandler.on("RenderPageChunk",function transportRender(data){if(this.destroyed){return}var page=this.pageCache[data.pageIndex];page._renderPageChunk(data.operatorList,data.intent)},this);messageHandler.on("commonobj",function transportObj(data){if(this.destroyed){return}var id=data[0];var type=data[1];if(this.commonObjs.hasData(id)){return}switch(type){case"Font":var exportedData=data[2];var font;if("error"in exportedData){var error=exportedData.error;warn("Error during font loading: "+error);this.commonObjs.resolve(id,error);break}else{font=new FontFaceObject(exportedData)}this.fontLoader.bind([font],function fontReady(fontObjs){this.commonObjs.resolve(id,font)}.bind(this));break;case"FontPath":this.commonObjs.resolve(id,data[2]);break;default:error("Got unknown common object type "+type)}},this);messageHandler.on("obj",function transportObj(data){if(this.destroyed){return}var id=data[0];var pageIndex=data[1];var type=data[2];var pageProxy=this.pageCache[pageIndex];var imageData;if(pageProxy.objs.hasData(id)){return}switch(type){case"JpegStream":imageData=data[3];loadJpegStream(id,imageData,pageProxy.objs);break;case"Image":imageData=data[3];pageProxy.objs.resolve(id,imageData);var MAX_IMAGE_SIZE_TO_STORE=8e6;if(imageData&&"data"in imageData&&imageData.data.length>MAX_IMAGE_SIZE_TO_STORE){pageProxy.cleanupAfterRender=true}break;default:error("Got unknown object type "+type)}},this);messageHandler.on("DocProgress",function transportDocProgress(data){if(this.destroyed){return}var loadingTask=this.loadingTask;if(loadingTask.onProgress){loadingTask.onProgress({loaded:data.loaded,total:data.total})}},this);messageHandler.on("PageError",function transportError(data){if(this.destroyed){return}var page=this.pageCache[data.pageNum-1];var intentState=page.intentStates[data.intent];if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(data.error)}else{error(data.error)}},this);messageHandler.on("UnsupportedFeature",function transportUnsupportedFeature(data){if(this.destroyed){return}var featureId=data.featureId;var loadingTask=this.loadingTask;if(loadingTask.onUnsupportedFeature){loadingTask.onUnsupportedFeature(featureId)}PDFJS.UnsupportedManager.notify(featureId)},this);messageHandler.on("JpegDecode",function(data){if(this.destroyed){return Promise.reject("Worker was terminated")}var imageUrl=data[0];var components=data[1];if(components!==3&&components!==1){return Promise.reject(new Error("Only 3 components or 1 component can be returned"))}return new Promise(function(resolve,reject){var img=new Image;img.onload=function(){var width=img.width;var height=img.height;var size=width*height;var rgbaLength=size*4;var buf=new Uint8Array(size*components);var tmpCanvas=createScratchCanvas(width,height);var tmpCtx=tmpCanvas.getContext("2d");tmpCtx.drawImage(img,0,0);var data=tmpCtx.getImageData(0,0,width,height).data;var i,j;if(components===3){for(i=0,j=0;i<rgbaLength;i+=4,j+=3){buf[j]=data[i];buf[j+1]=data[i+1];buf[j+2]=data[i+2]}}else if(components===1){for(i=0,j=0;i<rgbaLength;i+=4,j++){buf[j]=data[i]}}resolve({data:buf,width:width,height:height})};img.onerror=function(){reject(new Error("JpegDecode failed to load image"))};img.src=imageUrl})},this)},getData:function WorkerTransport_getData(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function WorkerTransport_getPage(pageNumber,capability){if(pageNumber<=0||pageNumber>this.numPages||(pageNumber|0)!==pageNumber){return Promise.reject(new Error("Invalid page request"))}var pageIndex=pageNumber-1;if(pageIndex in this.pagePromises){return this.pagePromises[pageIndex]}var promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex:pageIndex}).then(function(pageInfo){if(this.destroyed){throw new Error("Transport destroyed")}var page=new PDFPageProxy(pageIndex,pageInfo,this);this.pageCache[pageIndex]=page;return page}.bind(this));this.pagePromises[pageIndex]=promise;return promise},getPageIndex:function WorkerTransport_getPageIndexByRef(ref){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:ref})},getAnnotations:function WorkerTransport_getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pageIndex,intent:intent})},getDestinations:function WorkerTransport_getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function WorkerTransport_getDestination(id){return this.messageHandler.sendWithPromise("GetDestination",{id:id})},getAttachments:function WorkerTransport_getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function WorkerTransport_getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function WorkerTransport_getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function WorkerTransport_getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function transportMetadata(results){return{info:results[0],metadata:results[1]?new Metadata(results[1]):null}})},getStats:function WorkerTransport_getStats(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function WorkerTransport_startCleanup(){this.messageHandler.sendWithPromise("Cleanup",null).then(function endCleanup(){for(var i=0,ii=this.pageCache.length;i<ii;i++){var page=this.pageCache[i];if(page){page.cleanup()}}this.commonObjs.clear();this.fontLoader.clear()}.bind(this))}};return WorkerTransport}();var PDFObjects=function PDFObjectsClosure(){function PDFObjects(){this.objs={}}PDFObjects.prototype={ensureObj:function PDFObjects_ensureObj(objId){if(this.objs[objId]){return this.objs[objId]}var obj={capability:createPromiseCapability(),data:null,resolved:false};this.objs[objId]=obj;return obj},get:function PDFObjects_get(objId,callback){if(callback){this.ensureObj(objId).capability.promise.then(callback);return null}var obj=this.objs[objId];if(!obj||!obj.resolved){error("Requesting object that isn't resolved yet "+objId)}return obj.data},resolve:function PDFObjects_resolve(objId,data){var obj=this.ensureObj(objId);obj.resolved=true;obj.data=data;obj.capability.resolve(data)},isResolved:function PDFObjects_isResolved(objId){var objs=this.objs;if(!objs[objId]){return false}else{return objs[objId].resolved}},hasData:function PDFObjects_hasData(objId){return this.isResolved(objId)},getData:function PDFObjects_getData(objId){var objs=this.objs;if(!objs[objId]||!objs[objId].resolved){return null}else{return objs[objId].data}},clear:function PDFObjects_clear(){this.objs={}}};return PDFObjects}();var RenderTask=function RenderTaskClosure(){function RenderTask(internalRenderTask){this._internalRenderTask=internalRenderTask;this.onContinue=null}RenderTask.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function RenderTask_cancel(){this._internalRenderTask.cancel()},then:function RenderTask_then(onFulfilled,onRejected){return this.promise.then.apply(this.promise,arguments)}};return RenderTask}();var InternalRenderTask=function InternalRenderTaskClosure(){function InternalRenderTask(callback,params,objs,commonObjs,operatorList,pageNumber){this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.operatorListIdx=null;this.operatorList=operatorList;this.pageNumber=pageNumber;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this.useRequestAnimationFrame=false;this.cancelled=false;this.capability=createPromiseCapability();this.task=new RenderTask(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this)}InternalRenderTask.prototype={initalizeGraphics:function InternalRenderTask_initalizeGraphics(transparency){if(this.cancelled){return}if(PDFJS.pdfBug&&"StepperManager"in globalScope&&globalScope.StepperManager.enabled){this.stepper=globalScope.StepperManager.create(this.pageNumber-1);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}var params=this.params;this.gfx=new CanvasGraphics(params.canvasContext,this.commonObjs,this.objs,params.imageLayer);this.gfx.beginDrawing(params.transform,params.viewport,transparency);this.operatorListIdx=0;this.graphicsReady=true;if(this.graphicsReadyCallback){this.graphicsReadyCallback()}},cancel:function InternalRenderTask_cancel(){this.running=false;this.cancelled=true;this.callback("cancelled")},operatorListChanged:function InternalRenderTask_operatorListChanged(){if(!this.graphicsReady){if(!this.graphicsReadyCallback){this.graphicsReadyCallback=this._continueBound}return}if(this.stepper){this.stepper.updateOperatorList(this.operatorList)}if(this.running){return}this._continue()},_continue:function InternalRenderTask__continue(){this.running=true;if(this.cancelled){return}if(this.task.onContinue){this.task.onContinue.call(this.task,this._scheduleNextBound)}else{this._scheduleNext()}},_scheduleNext:function InternalRenderTask__scheduleNext(){if(this.useRequestAnimationFrame){window.requestAnimationFrame(this._nextBound)}else{Promise.resolve(undefined).then(this._nextBound)}},_next:function InternalRenderTask__next(){if(this.cancelled){return}this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing();this.callback()}}}};return InternalRenderTask}();PDFJS.UnsupportedManager=function UnsupportedManagerClosure(){var listeners=[];return{listen:function(cb){deprecated("Global UnsupportedManager.listen is used: "+" use PDFDocumentLoadingTask.onUnsupportedFeature instead");listeners.push(cb)},notify:function(featureId){for(var i=0,ii=listeners.length;i<ii;i++){listeners[i](featureId)}}}}();exports.getDocument=PDFJS.getDocument;exports.PDFDataRangeTransport=PDFDataRangeTransport;exports.PDFDocumentProxy=PDFDocumentProxy;exports.PDFPageProxy=PDFPageProxy})}).call(pdfjsLibs);exports.PDFJS=pdfjsLibs.pdfjsSharedGlobal.PDFJS;exports.getDocument=pdfjsLibs.pdfjsDisplayAPI.getDocument;exports.PDFDataRangeTransport=pdfjsLibs.pdfjsDisplayAPI.PDFDataRangeTransport;exports.renderTextLayer=pdfjsLibs.pdfjsDisplayTextLayer.renderTextLayer;exports.AnnotationLayer=pdfjsLibs.pdfjsDisplayAnnotationLayer.AnnotationLayer;exports.CustomStyle=pdfjsLibs.pdfjsDisplayDOMUtils.CustomStyle;exports.PasswordResponses=pdfjsLibs.pdfjsSharedUtil.PasswordResponses;exports.InvalidPDFException=pdfjsLibs.pdfjsSharedUtil.InvalidPDFException;exports.MissingPDFException=pdfjsLibs.pdfjsSharedUtil.MissingPDFException;exports.UnexpectedResponseException=pdfjsLibs.pdfjsSharedUtil.UnexpectedResponseException});"use strict";var DEFAULT_URL="compressed.tracemonkey-pldi-09.pdf";var DEFAULT_SCALE_DELTA=1.1;var MIN_SCALE=.25;var MAX_SCALE=10;var SCALE_SELECT_CONTAINER_PADDING=8;var SCALE_SELECT_PADDING=22;var PAGE_NUMBER_LOADING_INDICATOR="visiblePageIsLoading";var DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT=5e3;function configure(PDFJS){PDFJS.imageResourcesPath="./images/";PDFJS.workerSrc="../build/pdf.worker.js";PDFJS.cMapUrl="../web/cmaps/";PDFJS.cMapPacked=true}var mozL10n=document.mozL10n||document.webL10n;var CSS_UNITS=96/72;var DEFAULT_SCALE_VALUE="auto";var DEFAULT_SCALE=1;var UNKNOWN_SCALE=0;var MAX_AUTO_SCALE=1.25;var SCROLLBAR_PADDING=40;var VERTICAL_PADDING=5;function getFileName(url){var anchor=url.indexOf("#");var query=url.indexOf("?");var end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf("/",end)+1,end)}function getOutputScale(ctx){var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;var pixelRatio=devicePixelRatio/backingStoreRatio;return{sx:pixelRatio,sy:pixelRatio,scaled:pixelRatio!==1}}function scrollIntoView(element,spot,skipOverflowHiddenElements){var parent=element.offsetParent;if(!parent){console.error("offsetParent is not set -- cannot scroll");return}var checkOverflow=skipOverflowHiddenElements||false;var offsetY=element.offsetTop+element.clientTop;var offsetX=element.offsetLeft+element.clientLeft;while(parent.clientHeight===parent.scrollHeight||checkOverflow&&getComputedStyle(parent).overflow==="hidden"){if(parent.dataset._scaleY){offsetY/=parent.dataset._scaleY;offsetX/=parent.dataset._scaleX}offsetY+=parent.offsetTop;offsetX+=parent.offsetLeft;parent=parent.offsetParent;if(!parent){return}}if(spot){if(spot.top!==undefined){offsetY+=spot.top}if(spot.left!==undefined){offsetX+=spot.left;parent.scrollLeft=offsetX}}parent.scrollTop=offsetY}function watchScroll(viewAreaElement,callback){var debounceScroll=function debounceScroll(evt){if(rAF){return}rAF=window.requestAnimationFrame(function viewAreaElementScrolled(){rAF=null;var currentY=viewAreaElement.scrollTop;var lastY=state.lastY;if(currentY!==lastY){state.down=currentY>lastY}state.lastY=currentY;callback(state)})};var state={down:true,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll};var rAF=null;viewAreaElement.addEventListener("scroll",debounceScroll,true);return state}function parseQueryString(query){var parts=query.split("&");var params={};for(var i=0,ii=parts.length;i<ii;++i){var param=parts[i].split("=");var key=param[0].toLowerCase();var value=param.length>1?param[1]:null;params[decodeURIComponent(key)]=decodeURIComponent(value)}return params}function binarySearchFirstItem(items,condition){var minIndex=0;var maxIndex=items.length-1;if(items.length===0||!condition(items[maxIndex])){return items.length}if(condition(items[minIndex])){return minIndex}while(minIndex<maxIndex){var currentIndex=minIndex+maxIndex>>1;var currentItem=items[currentIndex];if(condition(currentItem)){maxIndex=currentIndex}else{minIndex=currentIndex+1}}return minIndex}function approximateFraction(x){if(Math.floor(x)===x){return[x,1]}var xinv=1/x;var limit=8;if(xinv>limit){return[1,limit]}else if(Math.floor(xinv)===xinv){return[1,xinv]}var x_=x>1?xinv:x;var a=0,b=1,c=1,d=1;while(true){var p=a+c,q=b+d;if(q>limit){break}if(x_<=p/q){c=p;d=q}else{a=p;b=q}}if(x_-a/b<c/d-x_){return x_===x?[a,b]:[b,a]}else{return x_===x?[c,d]:[d,c]}}function roundToDivide(x,div){var r=x%div;return r===0?x:Math.round(x-r+div)}function getVisibleElements(scrollEl,views,sortByVisibility){var top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight;var left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth;function isElementBottomBelowViewTop(view){var element=view.div;var elementBottom=element.offsetTop+element.clientTop+element.clientHeight;return elementBottom>top}var visible=[],view,element;var currentHeight,viewHeight,hiddenHeight,percentHeight;var currentWidth,viewWidth;var firstVisibleElementInd=views.length===0?0:binarySearchFirstItem(views,isElementBottomBelowViewTop);for(var i=firstVisibleElementInd,ii=views.length;i<ii;i++){view=views[i];element=view.div;currentHeight=element.offsetTop+element.clientTop;viewHeight=element.clientHeight;if(currentHeight>bottom){break}currentWidth=element.offsetLeft+element.clientLeft;viewWidth=element.clientWidth;if(currentWidth+viewWidth<left||currentWidth>right){continue}hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,currentHeight+viewHeight-bottom);percentHeight=(viewHeight-hiddenHeight)*100/viewHeight|0;visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percentHeight})}var first=visible[0];var last=visible[visible.length-1];if(sortByVisibility){visible.sort(function(a,b){var pc=a.percent-b.percent;if(Math.abs(pc)>.001){return-pc}return a.id-b.id})}return{first:first,last:last,views:visible}}function noContextMenuHandler(e){e.preventDefault()}function getPDFFileNameFromURL(url){var reURI=/^(?:([^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;var reFilename=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i;var splitURI=reURI.exec(url);var suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.indexOf("%")!==-1){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch(e){}}}return suggestedFilename||"document.pdf"}var ProgressBar=function ProgressBarClosure(){function clamp(v,min,max){return Math.min(Math.max(v,min),max)}function ProgressBar(id,opts){this.visible=true;this.div=document.querySelector(id+" .progress");this.bar=this.div.parentNode;this.height=opts.height||100;this.width=opts.width||100;this.units=opts.units||"%";this.div.style.height=this.height+this.units;this.percent=0}ProgressBar.prototype={updateBar:function ProgressBar_updateBar(){if(this._indeterminate){this.div.classList.add("indeterminate");this.div.style.width=this.width+this.units;return}this.div.classList.remove("indeterminate");var progressSize=this.width*this._percent/100;this.div.style.width=progressSize+this.units},get percent(){return this._percent},set percent(val){this._indeterminate=isNaN(val);this._percent=clamp(val,0,100);this.updateBar()},setWidth:function ProgressBar_setWidth(viewer){if(viewer){var container=viewer.parentNode;var scrollbarWidth=container.offsetWidth-viewer.offsetWidth;if(scrollbarWidth>0){this.bar.setAttribute("style","width: calc(100% - "+scrollbarWidth+"px);")}}},hide:function ProgressBar_hide(){if(!this.visible){return}this.visible=false;this.bar.classList.add("hidden");document.body.classList.remove("loadingInProgress")},show:function ProgressBar_show(){if(this.visible){return}this.visible=true;document.body.classList.add("loadingInProgress");this.bar.classList.remove("hidden")}};return ProgressBar}();var DEFAULT_PREFERENCES={showPreviousViewOnLoad:true,defaultZoomValue:"",sidebarViewOnLoad:0,enableHandToolOnLoad:false,enableWebGL:false,pdfBugEnabled:false,disableRange:false,disableStream:false,disableAutoFetch:false,disableFontFace:false,disableTextLayer:false,useOnlyCssZoom:false,externalLinkTarget:0};var SidebarView={NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3};var Preferences={prefs:Object.create(DEFAULT_PREFERENCES),isInitializedPromiseResolved:false,initializedPromise:null,initialize:function preferencesInitialize(){return this.initializedPromise=this._readFromStorage(DEFAULT_PREFERENCES).then(function(prefObj){this.isInitializedPromiseResolved=true;if(prefObj){this.prefs=prefObj}}.bind(this))},_writeToStorage:function preferences_writeToStorage(prefObj){return Promise.resolve()},_readFromStorage:function preferences_readFromStorage(prefObj){return Promise.resolve()},reset:function preferencesReset(){return this.initializedPromise.then(function(){this.prefs=Object.create(DEFAULT_PREFERENCES);return this._writeToStorage(DEFAULT_PREFERENCES)}.bind(this))},reload:function preferencesReload(){return this.initializedPromise.then(function(){this._readFromStorage(DEFAULT_PREFERENCES).then(function(prefObj){if(prefObj){this.prefs=prefObj}}.bind(this))}.bind(this))},set:function preferencesSet(name,value){return this.initializedPromise.then(function(){if(DEFAULT_PREFERENCES[name]===undefined){throw new Error("preferencesSet: '"+name+"' is undefined.")}else if(value===undefined){throw new Error("preferencesSet: no value is specified.")}var valueType=typeof value;var defaultType=typeof DEFAULT_PREFERENCES[name];if(valueType!==defaultType){if(valueType==="number"&&defaultType==="string"){value=value.toString()}else{throw new Error("Preferences_set: '"+value+"' is a \""+valueType+'", expected "'+defaultType+'".')}}else{if(valueType==="number"&&(value|0)!==value){throw new Error("Preferences_set: '"+value+'\' must be an "integer".')}}this.prefs[name]=value;return this._writeToStorage(this.prefs)}.bind(this))},get:function preferencesGet(name){return this.initializedPromise.then(function(){var defaultValue=DEFAULT_PREFERENCES[name];if(defaultValue===undefined){throw new Error("preferencesGet: '"+name+"' is undefined.")}else{var prefValue=this.prefs[name];if(prefValue!==undefined){return prefValue}}return defaultValue}.bind(this))}};Preferences._writeToStorage=function(prefObj){return new Promise(function(resolve){localStorage.setItem("pdfjs.preferences",JSON.stringify(prefObj));resolve()})};Preferences._readFromStorage=function(prefObj){return new Promise(function(resolve){var readPrefs=JSON.parse(localStorage.getItem("pdfjs.preferences"));resolve(readPrefs)})};(function mozPrintCallbackPolyfillClosure(){if("mozPrintCallback"in document.createElement("canvas")){return}HTMLCanvasElement.prototype.mozPrintCallback=undefined;var canvases;var index;var print=window.print;window.print=function print(){if(canvases){console.warn("Ignored window.print() because of a pending print job.");return}try{dispatchEvent("beforeprint")}finally{canvases=document.querySelectorAll("canvas");index=-1;next()}};function dispatchEvent(eventType){var event=document.createEvent("CustomEvent");event.initCustomEvent(eventType,false,false,"custom");window.dispatchEvent(event)}function next(){if(!canvases){return}renderProgress();if(++index<canvases.length){var canvas=canvases[index];if(typeof canvas.mozPrintCallback==="function"){canvas.mozPrintCallback({context:canvas.getContext("2d"),abort:abort,done:next})}else{next()}}else{renderProgress();print.call(window);setTimeout(abort,20)}}function abort(){if(canvases){canvases=null;renderProgress();dispatchEvent("afterprint")}}function renderProgress(){var progressContainer=document.getElementById("mozPrintCallback-shim");if(canvases&&canvases.length){var progress=Math.round(100*index/canvases.length);var progressBar=progressContainer.querySelector("progress");var progressPerc=progressContainer.querySelector(".relative-progress");progressBar.value=progress;progressPerc.textContent=progress+"%";progressContainer.removeAttribute("hidden");progressContainer.onclick=abort}else{progressContainer.setAttribute("hidden","")}}var hasAttachEvent=!!document.attachEvent;window.addEventListener("keydown",function(event){if(event.keyCode===80&&(event.ctrlKey||event.metaKey)&&!event.altKey&&(!event.shiftKey||window.chrome||window.opera)){window.print();if(hasAttachEvent){return}event.preventDefault();if(event.stopImmediatePropagation){event.stopImmediatePropagation()}else{event.stopPropagation()}return}if(event.keyCode===27&&canvases){abort()}},true);if(hasAttachEvent){document.attachEvent("onkeydown",function(event){event=event||window.event;if(event.keyCode===80&&event.ctrlKey){
event.keyCode=0;return false}})}if("onbeforeprint"in window){var stopPropagationIfNeeded=function(event){if(event.detail!=="custom"&&event.stopImmediatePropagation){event.stopImmediatePropagation()}};window.addEventListener("beforeprint",stopPropagationIfNeeded,false);window.addEventListener("afterprint",stopPropagationIfNeeded,false)}})();var DownloadManager=function DownloadManagerClosure(){function download(blobUrl,filename){var a=document.createElement("a");if(a.click){a.href=blobUrl;a.target="_parent";if("download"in a){a.download=filename}(document.body||document.documentElement).appendChild(a);a.click();a.parentNode.removeChild(a)}else{if(window.top===window&&blobUrl.split("#")[0]===window.location.href.split("#")[0]){var padCharacter=blobUrl.indexOf("?")===-1?"?":"&";blobUrl=blobUrl.replace(/#|$/,padCharacter+"$&")}window.open(blobUrl,"_parent")}}function DownloadManager(){}DownloadManager.prototype={downloadUrl:function DownloadManager_downloadUrl(url,filename){if(!PDFJS.isValidUrl(url,true)){return}download(url+"#pdfjs.action=download",filename)},downloadData:function DownloadManager_downloadData(data,filename,contentType){if(navigator.msSaveBlob){return navigator.msSaveBlob(new Blob([data],{type:contentType}),filename)}var blobUrl=PDFJS.createObjectURL(data,contentType);download(blobUrl,filename)},download:function DownloadManager_download(blob,url,filename){if(!URL){this.downloadUrl(url,filename);return}if(navigator.msSaveBlob){if(!navigator.msSaveBlob(blob,filename)){this.downloadUrl(url,filename)}return}var blobUrl=URL.createObjectURL(blob);download(blobUrl,filename)}};return DownloadManager}();var DEFAULT_VIEW_HISTORY_CACHE_SIZE=20;var ViewHistory=function ViewHistoryClosure(){function ViewHistory(fingerprint,cacheSize){this.fingerprint=fingerprint;this.cacheSize=cacheSize||DEFAULT_VIEW_HISTORY_CACHE_SIZE;this.isInitializedPromiseResolved=false;this.initializedPromise=this._readFromStorage().then(function(databaseStr){this.isInitializedPromiseResolved=true;var database=JSON.parse(databaseStr||"{}");if(!("files"in database)){database.files=[]}if(database.files.length>=this.cacheSize){database.files.shift()}var index;for(var i=0,length=database.files.length;i<length;i++){var branch=database.files[i];if(branch.fingerprint===this.fingerprint){index=i;break}}if(typeof index!=="number"){index=database.files.push({fingerprint:this.fingerprint})-1}this.file=database.files[index];this.database=database}.bind(this))}ViewHistory.prototype={_writeToStorage:function ViewHistory_writeToStorage(){return new Promise(function(resolve){var databaseStr=JSON.stringify(this.database);localStorage.setItem("database",databaseStr);resolve()}.bind(this))},_readFromStorage:function ViewHistory_readFromStorage(){return new Promise(function(resolve){resolve(localStorage.getItem("database"))})},set:function ViewHistory_set(name,val){if(!this.isInitializedPromiseResolved){return}this.file[name]=val;return this._writeToStorage()},setMultiple:function ViewHistory_setMultiple(properties){if(!this.isInitializedPromiseResolved){return}for(var name in properties){this.file[name]=properties[name]}return this._writeToStorage()},get:function ViewHistory_get(name,defaultValue){if(!this.isInitializedPromiseResolved){return defaultValue}return this.file[name]||defaultValue}};return ViewHistory}();var PDFFindBar=function PDFFindBarClosure(){function PDFFindBar(options){this.opened=false;this.bar=options.bar||null;this.toggleButton=options.toggleButton||null;this.findField=options.findField||null;this.highlightAll=options.highlightAllCheckbox||null;this.caseSensitive=options.caseSensitiveCheckbox||null;this.findMsg=options.findMsg||null;this.findResultsCount=options.findResultsCount||null;this.findStatusIcon=options.findStatusIcon||null;this.findPreviousButton=options.findPreviousButton||null;this.findNextButton=options.findNextButton||null;this.findController=options.findController||null;if(this.findController===null){throw new Error("PDFFindBar cannot be used without a "+"PDFFindController instance.")}var self=this;this.toggleButton.addEventListener("click",function(){self.toggle()});this.findField.addEventListener("input",function(){self.dispatchEvent("")});this.bar.addEventListener("keydown",function(evt){switch(evt.keyCode){case 13:if(evt.target===self.findField){self.dispatchEvent("again",evt.shiftKey)}break;case 27:self.close();break}});this.findPreviousButton.addEventListener("click",function(){self.dispatchEvent("again",true)});this.findNextButton.addEventListener("click",function(){self.dispatchEvent("again",false)});this.highlightAll.addEventListener("click",function(){self.dispatchEvent("highlightallchange")});this.caseSensitive.addEventListener("click",function(){self.dispatchEvent("casesensitivitychange")})}PDFFindBar.prototype={dispatchEvent:function PDFFindBar_dispatchEvent(type,findPrev){var event=document.createEvent("CustomEvent");event.initCustomEvent("find"+type,true,true,{query:this.findField.value,caseSensitive:this.caseSensitive.checked,highlightAll:this.highlightAll.checked,findPrevious:findPrev});return window.dispatchEvent(event)},updateUIState:function PDFFindBar_updateUIState(state,previous,matchCount){var notFound=false;var findMsg="";var status="";switch(state){case FindStates.FIND_FOUND:break;case FindStates.FIND_PENDING:status="pending";break;case FindStates.FIND_NOTFOUND:findMsg=mozL10n.get("find_not_found",null,"Phrase not found");notFound=true;break;case FindStates.FIND_WRAPPED:if(previous){findMsg=mozL10n.get("find_reached_top",null,"Reached top of document, continued from bottom")}else{findMsg=mozL10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}break}if(notFound){this.findField.classList.add("notFound")}else{this.findField.classList.remove("notFound")}this.findField.setAttribute("data-status",status);this.findMsg.textContent=findMsg;this.updateResultsCount(matchCount)},updateResultsCount:function(matchCount){if(!this.findResultsCount){return}if(!matchCount){this.findResultsCount.classList.add("hidden");return}this.findResultsCount.textContent=matchCount.toLocaleString();this.findResultsCount.classList.remove("hidden")},open:function PDFFindBar_open(){if(!this.opened){this.opened=true;this.toggleButton.classList.add("toggled");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus()},close:function PDFFindBar_close(){if(!this.opened){return}this.opened=false;this.toggleButton.classList.remove("toggled");this.bar.classList.add("hidden");this.findController.active=false},toggle:function PDFFindBar_toggle(){if(this.opened){this.close()}else{this.open()}}};return PDFFindBar}();var FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3};var FIND_SCROLL_OFFSET_TOP=-50;var FIND_SCROLL_OFFSET_LEFT=-400;var PDFFindController=function PDFFindControllerClosure(){function PDFFindController(options){this.startedTextExtraction=false;this.extractTextPromises=[];this.pendingFindMatches={};this.active=false;this.pageContents=[];this.pageMatches=[];this.matchCount=0;this.selected={pageIdx:-1,matchIdx:-1};this.offset={pageIdx:null,matchIdx:null};this.pagesToSearch=null;this.resumePageIdx=null;this.state=null;this.dirtyMatch=false;this.findTimeout=null;this.pdfViewer=options.pdfViewer||null;this.integratedFind=options.integratedFind||false;this.charactersToNormalize={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"};this.findBar=options.findBar||null;var replace=Object.keys(this.charactersToNormalize).join("");this.normalizationRegex=new RegExp("["+replace+"]","g");var events=["find","findagain","findhighlightallchange","findcasesensitivitychange"];this.firstPagePromise=new Promise(function(resolve){this.resolveFirstPage=resolve}.bind(this));this.handleEvent=this.handleEvent.bind(this);for(var i=0,len=events.length;i<len;i++){window.addEventListener(events[i],this.handleEvent)}}PDFFindController.prototype={setFindBar:function PDFFindController_setFindBar(findBar){this.findBar=findBar},reset:function PDFFindController_reset(){this.startedTextExtraction=false;this.extractTextPromises=[];this.active=false},normalize:function PDFFindController_normalize(text){var self=this;return text.replace(this.normalizationRegex,function(ch){return self.charactersToNormalize[ch]})},calcFindMatch:function PDFFindController_calcFindMatch(pageIndex){var pageContent=this.normalize(this.pageContents[pageIndex]);var query=this.normalize(this.state.query);var caseSensitive=this.state.caseSensitive;var queryLen=query.length;if(queryLen===0){return}if(!caseSensitive){pageContent=pageContent.toLowerCase();query=query.toLowerCase()}var matches=[];var matchIdx=-queryLen;while(true){matchIdx=pageContent.indexOf(query,matchIdx+queryLen);if(matchIdx===-1){break}matches.push(matchIdx)}this.pageMatches[pageIndex]=matches;this.updatePage(pageIndex);if(this.resumePageIdx===pageIndex){this.resumePageIdx=null;this.nextPageMatch()}if(matches.length>0){this.matchCount+=matches.length;this.updateUIResultsCount()}},extractText:function PDFFindController_extractText(){if(this.startedTextExtraction){return}this.startedTextExtraction=true;this.pageContents=[];var extractTextPromisesResolves=[];var numPages=this.pdfViewer.pagesCount;for(var i=0;i<numPages;i++){this.extractTextPromises.push(new Promise(function(resolve){extractTextPromisesResolves.push(resolve)}))}var self=this;function extractPageText(pageIndex){self.pdfViewer.getPageTextContent(pageIndex).then(function textContentResolved(textContent){var textItems=textContent.items;var str=[];for(var i=0,len=textItems.length;i<len;i++){str.push(textItems[i].str)}self.pageContents.push(str.join(""));extractTextPromisesResolves[pageIndex](pageIndex);if(pageIndex+1<self.pdfViewer.pagesCount){extractPageText(pageIndex+1)}})}extractPageText(0)},handleEvent:function PDFFindController_handleEvent(e){if(this.state===null||e.type!=="findagain"){this.dirtyMatch=true}this.state=e.detail;this.updateUIState(FindStates.FIND_PENDING);this.firstPagePromise.then(function(){this.extractText();clearTimeout(this.findTimeout);if(e.type==="find"){this.findTimeout=setTimeout(this.nextMatch.bind(this),250)}else{this.nextMatch()}}.bind(this))},updatePage:function PDFFindController_updatePage(index){if(this.selected.pageIdx===index){this.pdfViewer.scrollPageIntoView(index+1)}var page=this.pdfViewer.getPageView(index);if(page.textLayer){page.textLayer.updateMatches()}},nextMatch:function PDFFindController_nextMatch(){var previous=this.state.findPrevious;var currentPageIndex=this.pdfViewer.currentPageNumber-1;var numPages=this.pdfViewer.pagesCount;this.active=true;if(this.dirtyMatch){this.dirtyMatch=false;this.selected.pageIdx=this.selected.matchIdx=-1;this.offset.pageIdx=currentPageIndex;this.offset.matchIdx=null;this.hadMatch=false;this.resumePageIdx=null;this.pageMatches=[];this.matchCount=0;var self=this;for(var i=0;i<numPages;i++){this.updatePage(i);if(!(i in this.pendingFindMatches)){this.pendingFindMatches[i]=true;this.extractTextPromises[i].then(function(pageIdx){delete self.pendingFindMatches[pageIdx];self.calcFindMatch(pageIdx)})}}}if(this.state.query===""){this.updateUIState(FindStates.FIND_FOUND);return}if(this.resumePageIdx){return}var offset=this.offset;this.pagesToSearch=numPages;if(offset.matchIdx!==null){var numPageMatches=this.pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0){this.hadMatch=true;offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1;this.updateMatch(true);return}this.advanceOffsetPage(previous)}this.nextPageMatch()},matchesReady:function PDFFindController_matchesReady(matches){var offset=this.offset;var numMatches=matches.length;var previous=this.state.findPrevious;if(numMatches){this.hadMatch=true;offset.matchIdx=previous?numMatches-1:0;this.updateMatch(true);return true}else{this.advanceOffsetPage(previous);if(offset.wrapped){offset.matchIdx=null;if(this.pagesToSearch<0){this.updateMatch(false);return true}}return false}},updateMatchPosition:function PDFFindController_updateMatchPosition(pageIndex,index,elements,beginIdx,endIdx){if(this.selected.matchIdx===index&&this.selected.pageIdx===pageIndex){var spot={top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT};scrollIntoView(elements[beginIdx],spot,true)}},nextPageMatch:function PDFFindController_nextPageMatch(){if(this.resumePageIdx!==null){console.error("There can only be one pending page.")}do{var pageIdx=this.offset.pageIdx;var matches=this.pageMatches[pageIdx];if(!matches){this.resumePageIdx=pageIdx;break}}while(!this.matchesReady(matches))},advanceOffsetPage:function PDFFindController_advanceOffsetPage(previous){var offset=this.offset;var numPages=this.extractTextPromises.length;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1;offset.matchIdx=null;this.pagesToSearch--;if(offset.pageIdx>=numPages||offset.pageIdx<0){offset.pageIdx=previous?numPages-1:0;offset.wrapped=true}},updateMatch:function PDFFindController_updateMatch(found){var state=FindStates.FIND_NOTFOUND;var wrapped=this.offset.wrapped;this.offset.wrapped=false;if(found){var previousPage=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx;this.selected.matchIdx=this.offset.matchIdx;state=wrapped?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND;if(previousPage!==-1&&previousPage!==this.selected.pageIdx){this.updatePage(previousPage)}}this.updateUIState(state,this.state.findPrevious);if(this.selected.pageIdx!==-1){this.updatePage(this.selected.pageIdx)}},updateUIResultsCount:function PDFFindController_updateUIResultsCount(){if(this.findBar===null){throw new Error("PDFFindController is not initialized with a "+"PDFFindBar instance.")}this.findBar.updateResultsCount(this.matchCount)},updateUIState:function PDFFindController_updateUIState(state,previous){if(this.integratedFind){FirefoxCom.request("updateFindControlState",{result:state,findPrevious:previous});return}if(this.findBar===null){throw new Error("PDFFindController is not initialized with a "+"PDFFindBar instance.")}this.findBar.updateUIState(state,previous,this.matchCount)}};return PDFFindController}();var PDFLinkService=function(){function PDFLinkService(){this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null;this._pagesRefCache=null}PDFLinkService.prototype={setDocument:function PDFLinkService_setDocument(pdfDocument,baseUrl){this.baseUrl=baseUrl;this.pdfDocument=pdfDocument;this._pagesRefCache=Object.create(null)},setViewer:function PDFLinkService_setViewer(pdfViewer){this.pdfViewer=pdfViewer},setHistory:function PDFLinkService_setHistory(pdfHistory){this.pdfHistory=pdfHistory},get pagesCount(){return this.pdfDocument.numPages},get page(){return this.pdfViewer.currentPageNumber},set page(value){this.pdfViewer.currentPageNumber=value},navigateTo:function PDFLinkService_navigateTo(dest){var destString="";var self=this;var goToDestination=function(destRef){var pageNumber=destRef instanceof Object?self._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){if(pageNumber>self.pagesCount){pageNumber=self.pagesCount}self.pdfViewer.scrollPageIntoView(pageNumber,dest);if(self.pdfHistory){self.pdfHistory.push({dest:dest,hash:destString,page:pageNumber})}}else{self.pdfDocument.getPageIndex(destRef).then(function(pageIndex){var pageNum=pageIndex+1;var cacheKey=destRef.num+" "+destRef.gen+" R";self._pagesRefCache[cacheKey]=pageNum;goToDestination(destRef)})}};var destinationPromise;if(typeof dest==="string"){destString=dest;destinationPromise=this.pdfDocument.getDestination(dest)}else{destinationPromise=Promise.resolve(dest)}destinationPromise.then(function(destination){dest=destination;if(!(destination instanceof Array)){return}goToDestination(destination[0])})},getDestinationHash:function PDFLinkService_getDestinationHash(dest){if(typeof dest==="string"){return this.getAnchorUrl("#"+escape(dest))}if(dest instanceof Array){var destRef=dest[0];var pageNumber=destRef instanceof Object?this._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){var pdfOpenParams=this.getAnchorUrl("#page="+pageNumber);var destKind=dest[1];if(typeof destKind==="object"&&"name"in destKind&&destKind.name==="XYZ"){var scale=dest[4]||this.pdfViewer.currentScaleValue;var scaleNumber=parseFloat(scale);if(scaleNumber){scale=scaleNumber*100}pdfOpenParams+="&zoom="+scale;if(dest[2]||dest[3]){pdfOpenParams+=","+(dest[2]||0)+","+(dest[3]||0)}}return pdfOpenParams}}return this.getAnchorUrl("")},getAnchorUrl:function PDFLinkService_getAnchorUrl(anchor){return(this.baseUrl||"")+anchor},setHash:function PDFLinkService_setHash(hash){if(hash.indexOf("=")>=0){var params=parseQueryString(hash);if("nameddest"in params){if(this.pdfHistory){this.pdfHistory.updateNextHashParam(params.nameddest)}this.navigateTo(params.nameddest);return}var pageNumber,dest;if("page"in params){pageNumber=params.page|0||1}if("zoom"in params){var zoomArgs=params.zoom.split(",");var zoomArg=zoomArgs[0];var zoomArgNumber=parseFloat(zoomArg);if(zoomArg.indexOf("Fit")===-1){dest=[null,{name:"XYZ"},zoomArgs.length>1?zoomArgs[1]|0:null,zoomArgs.length>2?zoomArgs[2]|0:null,zoomArgNumber?zoomArgNumber/100:zoomArg]}else{if(zoomArg==="Fit"||zoomArg==="FitB"){dest=[null,{name:zoomArg}]}else if(zoomArg==="FitH"||zoomArg==="FitBH"||(zoomArg==="FitV"||zoomArg==="FitBV")){dest=[null,{name:zoomArg},zoomArgs.length>1?zoomArgs[1]|0:null]}else if(zoomArg==="FitR"){if(zoomArgs.length!==5){console.error("PDFLinkService_setHash: "+"Not enough parameters for 'FitR'.")}else{dest=[null,{name:zoomArg},zoomArgs[1]|0,zoomArgs[2]|0,zoomArgs[3]|0,zoomArgs[4]|0]}}else{console.error("PDFLinkService_setHash: '"+zoomArg+"' is not a valid zoom value.")}}}if(dest){this.pdfViewer.scrollPageIntoView(pageNumber||this.page,dest)}else if(pageNumber){this.page=pageNumber}if("pagemode"in params){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagemode",true,true,{mode:params.pagemode});this.pdfViewer.container.dispatchEvent(event)}}else if(/^\d+$/.test(hash)){this.page=hash}else{if(this.pdfHistory){this.pdfHistory.updateNextHashParam(unescape(hash))}this.navigateTo(unescape(hash))}},executeNamedAction:function PDFLinkService_executeNamedAction(action){switch(action){case"GoBack":if(this.pdfHistory){this.pdfHistory.back()}break;case"GoForward":if(this.pdfHistory){this.pdfHistory.forward()}break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}var event=document.createEvent("CustomEvent");event.initCustomEvent("namedaction",true,true,{action:action});this.pdfViewer.container.dispatchEvent(event)},cachePageRef:function PDFLinkService_cachePageRef(pageNum,pageRef){var refStr=pageRef.num+" "+pageRef.gen+" R";this._pagesRefCache[refStr]=pageNum}};return PDFLinkService}();var PDFHistory=function(){function PDFHistory(options){this.linkService=options.linkService;this.initialized=false;this.initialDestination=null;this.initialBookmark=null}PDFHistory.prototype={initialize:function pdfHistoryInitialize(fingerprint){this.initialized=true;this.reInitialized=false;this.allowHashChange=true;this.historyUnlocked=true;this.isViewerInPresentationMode=false;this.previousHash=window.location.hash.substring(1);this.currentBookmark="";this.currentPage=0;this.updatePreviousBookmark=false;this.previousBookmark="";this.previousPage=0;this.nextHashParam="";this.fingerprint=fingerprint;this.currentUid=this.uid=0;this.current={};var state=window.history.state;if(this._isStateObjectDefined(state)){if(state.target.dest){this.initialDestination=state.target.dest}else{this.initialBookmark=state.target.hash}this.currentUid=state.uid;this.uid=state.uid+1;this.current=state.target}else{if(state&&state.fingerprint&&this.fingerprint!==state.fingerprint){this.reInitialized=true}this._pushOrReplaceState({fingerprint:this.fingerprint},true)}var self=this;window.addEventListener("popstate",function pdfHistoryPopstate(evt){if(!self.historyUnlocked){return}if(evt.state){self._goTo(evt.state);return}if(self.uid===0){var previousParams=self.previousHash&&self.currentBookmark&&self.previousHash!==self.currentBookmark?{hash:self.currentBookmark,page:self.currentPage}:{page:1};replacePreviousHistoryState(previousParams,function(){updateHistoryWithCurrentHash()})}else{updateHistoryWithCurrentHash()}},false);function updateHistoryWithCurrentHash(){self.previousHash=window.location.hash.slice(1);self._pushToHistory({hash:self.previousHash},false,true);self._updatePreviousBookmark()}function replacePreviousHistoryState(params,callback){self.historyUnlocked=false;self.allowHashChange=false;window.addEventListener("popstate",rewriteHistoryAfterBack);history.back();function rewriteHistoryAfterBack(){window.removeEventListener("popstate",rewriteHistoryAfterBack);window.addEventListener("popstate",rewriteHistoryAfterForward);self._pushToHistory(params,false,true);history.forward()}function rewriteHistoryAfterForward(){window.removeEventListener("popstate",rewriteHistoryAfterForward);self.allowHashChange=true;self.historyUnlocked=true;callback()}}function pdfHistoryBeforeUnload(){var previousParams=self._getPreviousParams(null,true);if(previousParams){var replacePrevious=!self.current.dest&&self.current.hash!==self.previousHash;self._pushToHistory(previousParams,false,replacePrevious);self._updatePreviousBookmark()}window.removeEventListener("beforeunload",pdfHistoryBeforeUnload,false)}window.addEventListener("beforeunload",pdfHistoryBeforeUnload,false);window.addEventListener("pageshow",function pdfHistoryPageShow(evt){window.addEventListener("beforeunload",pdfHistoryBeforeUnload,false)},false);window.addEventListener("presentationmodechanged",function(e){self.isViewerInPresentationMode=!!e.detail.active})},clearHistoryState:function pdfHistory_clearHistoryState(){this._pushOrReplaceState(null,true)},_isStateObjectDefined:function pdfHistory_isStateObjectDefined(state){return state&&state.uid>=0&&state.fingerprint&&this.fingerprint===state.fingerprint&&state.target&&state.target.hash?true:false},_pushOrReplaceState:function pdfHistory_pushOrReplaceState(stateObj,replace){if(replace){window.history.replaceState(stateObj,"",document.URL)}else{window.history.pushState(stateObj,"",document.URL)}},get isHashChangeUnlocked(){if(!this.initialized){return true}return this.allowHashChange},_updatePreviousBookmark:function pdfHistory_updatePreviousBookmark(){if(this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage){this.previousBookmark=this.currentBookmark;this.previousPage=this.currentPage;this.updatePreviousBookmark=false}},updateCurrentBookmark:function pdfHistoryUpdateCurrentBookmark(bookmark,pageNum){if(this.initialized){this.currentBookmark=bookmark.substring(1);this.currentPage=pageNum|0;this._updatePreviousBookmark()}},updateNextHashParam:function pdfHistoryUpdateNextHashParam(param){if(this.initialized){this.nextHashParam=param}},push:function pdfHistoryPush(params,isInitialBookmark){if(!(this.initialized&&this.historyUnlocked)){return}if(params.dest&&!params.hash){params.hash=this.current.hash&&this.current.dest&&this.current.dest===params.dest?this.current.hash:this.linkService.getDestinationHash(params.dest).split("#")[1]}if(params.page){params.page|=0}if(isInitialBookmark){var target=window.history.state.target;if(!target){this._pushToHistory(params,false);this.previousHash=window.location.hash.substring(1)}this.updatePreviousBookmark=this.nextHashParam?false:true;if(target){this._updatePreviousBookmark()}return}if(this.nextHashParam){if(this.nextHashParam===params.hash){this.nextHashParam=null;this.updatePreviousBookmark=true;return}else{this.nextHashParam=null}}if(params.hash){if(this.current.hash){if(this.current.hash!==params.hash){this._pushToHistory(params,true)}else{if(!this.current.page&&params.page){this._pushToHistory(params,false,true)}this.updatePreviousBookmark=true}}else{this._pushToHistory(params,true)}}else if(this.current.page&&params.page&&this.current.page!==params.page){this._pushToHistory(params,true)}},_getPreviousParams:function pdfHistory_getPreviousParams(onlyCheckPage,beforeUnload){if(!(this.currentBookmark&&this.currentPage)){return null}else if(this.updatePreviousBookmark){this.updatePreviousBookmark=false}if(this.uid>0&&!(this.previousBookmark&&this.previousPage)){return null}if(!this.current.dest&&!onlyCheckPage||beforeUnload){if(this.previousBookmark===this.currentBookmark){return null}}else if(this.current.page||onlyCheckPage){if(this.previousPage===this.currentPage){return null}}else{return null}var params={hash:this.currentBookmark,page:this.currentPage};if(this.isViewerInPresentationMode){params.hash=null}return params},_stateObj:function pdfHistory_stateObj(params){return{fingerprint:this.fingerprint,uid:this.uid,target:params}},_pushToHistory:function pdfHistory_pushToHistory(params,addPrevious,overwrite){if(!this.initialized){return}if(!params.hash&&params.page){params.hash="page="+params.page}if(addPrevious&&!overwrite){var previousParams=this._getPreviousParams();if(previousParams){var replacePrevious=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(previousParams,false,replacePrevious)}}this._pushOrReplaceState(this._stateObj(params),overwrite||this.uid===0);this.currentUid=this.uid++;this.current=params;this.updatePreviousBookmark=true},_goTo:function pdfHistory_goTo(state){if(!(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(state))){return}if(!this.reInitialized&&state.uid<this.currentUid){var previousParams=this._getPreviousParams(true);if(previousParams){this._pushToHistory(this.current,false);this._pushToHistory(previousParams,false);this.currentUid=state.uid;window.history.back();return}}this.historyUnlocked=false;if(state.target.dest){this.linkService.navigateTo(state.target.dest)}else{this.linkService.setHash(state.target.hash)}this.currentUid=state.uid;if(state.uid>this.uid){this.uid=state.uid}this.current=state.target;this.updatePreviousBookmark=true;var currentHash=window.location.hash.substring(1);if(this.previousHash!==currentHash){this.allowHashChange=false}this.previousHash=currentHash;this.historyUnlocked=true},back:function pdfHistoryBack(){this.go(-1)},forward:function pdfHistoryForward(){this.go(1)},go:function pdfHistoryGo(direction){if(this.initialized&&this.historyUnlocked){var state=window.history.state;if(direction===-1&&state&&state.uid>0){window.history.back()}else if(direction===1&&state&&state.uid<this.uid-1){window.history.forward()}}}};return PDFHistory}();var SecondaryToolbar={opened:false,previousContainerHeight:null,newContainerHeight:null,initialize:function secondaryToolbarInitialize(options){this.toolbar=options.toolbar;this.buttonContainer=this.toolbar.firstElementChild;this.toggleButton=options.toggleButton;this.presentationModeButton=options.presentationModeButton;this.openFile=options.openFile;this.print=options.print;this.download=options.download;this.viewBookmark=options.viewBookmark;this.firstPage=options.firstPage;this.lastPage=options.lastPage;this.pageRotateCw=options.pageRotateCw;this.pageRotateCcw=options.pageRotateCcw;this.documentPropertiesButton=options.documentPropertiesButton;var elements=[{element:this.toggleButton,handler:this.toggle},{element:this.presentationModeButton,handler:this.presentationModeClick},{element:this.openFile,handler:this.openFileClick},{element:this.print,handler:this.printClick},{element:this.download,handler:this.downloadClick},{element:this.viewBookmark,handler:this.viewBookmarkClick},{element:this.firstPage,handler:this.firstPageClick},{element:this.lastPage,handler:this.lastPageClick},{element:this.pageRotateCw,handler:this.pageRotateCwClick},{element:this.pageRotateCcw,handler:this.pageRotateCcwClick},{element:this.documentPropertiesButton,handler:this.documentPropertiesClick}];for(var item in elements){var element=elements[item].element;if(element){element.addEventListener("click",elements[item].handler.bind(this))}}},presentationModeClick:function secondaryToolbarPresentationModeClick(evt){PDFViewerApplication.requestPresentationMode();this.close()},openFileClick:function secondaryToolbarOpenFileClick(evt){document.getElementById("fileInput").click();this.close()},printClick:function secondaryToolbarPrintClick(evt){window.print();this.close()},downloadClick:function secondaryToolbarDownloadClick(evt){PDFViewerApplication.download();this.close()},viewBookmarkClick:function secondaryToolbarViewBookmarkClick(evt){this.close()},firstPageClick:function secondaryToolbarFirstPageClick(evt){PDFViewerApplication.page=1;this.close()},lastPageClick:function secondaryToolbarLastPageClick(evt){if(PDFViewerApplication.pdfDocument){PDFViewerApplication.page=PDFViewerApplication.pagesCount}this.close()},pageRotateCwClick:function secondaryToolbarPageRotateCwClick(evt){PDFViewerApplication.rotatePages(90)},pageRotateCcwClick:function secondaryToolbarPageRotateCcwClick(evt){PDFViewerApplication.rotatePages(-90)},documentPropertiesClick:function secondaryToolbarDocumentPropsClick(evt){PDFViewerApplication.pdfDocumentProperties.open();this.close()},setMaxHeight:function secondaryToolbarSetMaxHeight(container){if(!container||!this.buttonContainer){return}this.newContainerHeight=container.clientHeight;if(this.previousContainerHeight===this.newContainerHeight){return}this.buttonContainer.setAttribute("style","max-height: "+(this.newContainerHeight-SCROLLBAR_PADDING)+"px;");this.previousContainerHeight=this.newContainerHeight},open:function secondaryToolbarOpen(){if(this.opened){return}this.opened=true;this.toggleButton.classList.add("toggled");this.toolbar.classList.remove("hidden")},close:function secondaryToolbarClose(target){if(!this.opened){return}else if(target&&!this.toolbar.contains(target)){return}this.opened=false;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled")},toggle:function secondaryToolbarToggle(){if(this.opened){this.close()}else{this.open()}}};var DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS=1500;var DELAY_BEFORE_HIDING_CONTROLS=3e3;var ACTIVE_SELECTOR="pdfPresentationMode";var CONTROLS_SELECTOR="pdfPresentationModeControls";var PDFPresentationMode=function PDFPresentationModeClosure(){function PDFPresentationMode(options){this.container=options.container;this.viewer=options.viewer||options.container.firstElementChild;this.pdfViewer=options.pdfViewer;this.pdfThumbnailViewer=options.pdfThumbnailViewer||null;var contextMenuItems=options.contextMenuItems||null;this.active=false;this.args=null;this.contextMenuOpen=false;this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0;if(contextMenuItems){for(var i=0,ii=contextMenuItems.length;i<ii;i++){var item=contextMenuItems[i];item.element.addEventListener("click",function(handler){this.contextMenuOpen=false;handler()}.bind(this,item.handler))}}}PDFPresentationMode.prototype={request:function PDFPresentationMode_request(){if(this.switchInProgress||this.active||!this.viewer.hasChildNodes()){return false}this._addFullscreenChangeListeners();this._setSwitchInProgress();this._notifyStateChange();if(this.container.requestFullscreen){this.container.requestFullscreen()}else if(this.container.mozRequestFullScreen){this.container.mozRequestFullScreen()}else if(this.container.webkitRequestFullscreen){this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else if(this.container.msRequestFullscreen){this.container.msRequestFullscreen()}else{return false}this.args={page:this.pdfViewer.currentPageNumber,previousScale:this.pdfViewer.currentScaleValue};return true},mouseScroll:function PDFPresentationMode_mouseScroll(delta){if(!this.active){return}var MOUSE_SCROLL_COOLDOWN_TIME=50;var PAGE_SWITCH_THRESHOLD=120;var PageSwitchDirection={UP:-1,DOWN:1};var currentTime=(new Date).getTime();var storedTime=this.mouseScrollTimeStamp;if(currentTime>storedTime&&currentTime-storedTime<MOUSE_SCROLL_COOLDOWN_TIME){return}if(this.mouseScrollDelta>0&&delta<0||this.mouseScrollDelta<0&&delta>0){
this._resetMouseScrollState()}this.mouseScrollDelta+=delta;if(Math.abs(this.mouseScrollDelta)>=PAGE_SWITCH_THRESHOLD){var pageSwitchDirection=this.mouseScrollDelta>0?PageSwitchDirection.UP:PageSwitchDirection.DOWN;var page=this.pdfViewer.currentPageNumber;this._resetMouseScrollState();if(page===1&&pageSwitchDirection===PageSwitchDirection.UP||page===this.pdfViewer.pagesCount&&pageSwitchDirection===PageSwitchDirection.DOWN){return}this.pdfViewer.currentPageNumber=page+pageSwitchDirection;this.mouseScrollTimeStamp=currentTime}},get isFullscreen(){return!!(document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement)},_notifyStateChange:function PDFPresentationMode_notifyStateChange(){var event=document.createEvent("CustomEvent");event.initCustomEvent("presentationmodechanged",true,true,{active:this.active,switchInProgress:!!this.switchInProgress});window.dispatchEvent(event)},_setSwitchInProgress:function PDFPresentationMode_setSwitchInProgress(){if(this.switchInProgress){clearTimeout(this.switchInProgress)}this.switchInProgress=setTimeout(function switchInProgressTimeout(){this._removeFullscreenChangeListeners();delete this.switchInProgress;this._notifyStateChange()}.bind(this),DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS)},_resetSwitchInProgress:function PDFPresentationMode_resetSwitchInProgress(){if(this.switchInProgress){clearTimeout(this.switchInProgress);delete this.switchInProgress}},_enter:function PDFPresentationMode_enter(){this.active=true;this._resetSwitchInProgress();this._notifyStateChange();this.container.classList.add(ACTIVE_SELECTOR);setTimeout(function enterPresentationModeTimeout(){this.pdfViewer.currentPageNumber=this.args.page;this.pdfViewer.currentScaleValue="page-fit"}.bind(this),0);this._addWindowListeners();this._showControls();this.contextMenuOpen=false;this.container.setAttribute("contextmenu","viewerContextMenu");window.getSelection().removeAllRanges()},_exit:function PDFPresentationMode_exit(){var page=this.pdfViewer.currentPageNumber;this.container.classList.remove(ACTIVE_SELECTOR);setTimeout(function exitPresentationModeTimeout(){this.active=false;this._removeFullscreenChangeListeners();this._notifyStateChange();this.pdfViewer.currentScaleValue=this.args.previousScale;this.pdfViewer.currentPageNumber=page;this.args=null}.bind(this),0);this._removeWindowListeners();this._hideControls();this._resetMouseScrollState();this.container.removeAttribute("contextmenu");this.contextMenuOpen=false;if(this.pdfThumbnailViewer){this.pdfThumbnailViewer.ensureThumbnailVisible(page)}},_mouseDown:function PDFPresentationMode_mouseDown(evt){if(this.contextMenuOpen){this.contextMenuOpen=false;evt.preventDefault();return}if(evt.button===0){var isInternalLink=evt.target.href&&evt.target.classList.contains("internalLink");if(!isInternalLink){evt.preventDefault();this.pdfViewer.currentPageNumber+=evt.shiftKey?-1:1}}},_contextMenu:function PDFPresentationMode_contextMenu(){this.contextMenuOpen=true},_showControls:function PDFPresentationMode_showControls(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout)}else{this.container.classList.add(CONTROLS_SELECTOR)}this.controlsTimeout=setTimeout(function showControlsTimeout(){this.container.classList.remove(CONTROLS_SELECTOR);delete this.controlsTimeout}.bind(this),DELAY_BEFORE_HIDING_CONTROLS)},_hideControls:function PDFPresentationMode_hideControls(){if(!this.controlsTimeout){return}clearTimeout(this.controlsTimeout);this.container.classList.remove(CONTROLS_SELECTOR);delete this.controlsTimeout},_resetMouseScrollState:function PDFPresentationMode_resetMouseScrollState(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0},_addWindowListeners:function PDFPresentationMode_addWindowListeners(){this.showControlsBind=this._showControls.bind(this);this.mouseDownBind=this._mouseDown.bind(this);this.resetMouseScrollStateBind=this._resetMouseScrollState.bind(this);this.contextMenuBind=this._contextMenu.bind(this);window.addEventListener("mousemove",this.showControlsBind);window.addEventListener("mousedown",this.mouseDownBind);window.addEventListener("keydown",this.resetMouseScrollStateBind);window.addEventListener("contextmenu",this.contextMenuBind)},_removeWindowListeners:function PDFPresentationMode_removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind);window.removeEventListener("mousedown",this.mouseDownBind);window.removeEventListener("keydown",this.resetMouseScrollStateBind);window.removeEventListener("contextmenu",this.contextMenuBind);delete this.showControlsBind;delete this.mouseDownBind;delete this.resetMouseScrollStateBind;delete this.contextMenuBind},_fullscreenChange:function PDFPresentationMode_fullscreenChange(){if(this.isFullscreen){this._enter()}else{this._exit()}},_addFullscreenChangeListeners:function PDFPresentationMode_addFullscreenChangeListeners(){this.fullscreenChangeBind=this._fullscreenChange.bind(this);window.addEventListener("fullscreenchange",this.fullscreenChangeBind);window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind);window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind);window.addEventListener("MSFullscreenChange",this.fullscreenChangeBind)},_removeFullscreenChangeListeners:function PDFPresentationMode_removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind);window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind);window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind);window.removeEventListener("MSFullscreenChange",this.fullscreenChangeBind);delete this.fullscreenChangeBind}};return PDFPresentationMode}();var GrabToPan=function GrabToPanClosure(){function GrabToPan(options){this.element=options.element;this.document=options.element.ownerDocument;if(typeof options.ignoreTarget==="function"){this.ignoreTarget=options.ignoreTarget}this.onActiveChanged=options.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onmousedown=this._onmousedown.bind(this);this._onmousemove=this._onmousemove.bind(this);this._endPan=this._endPan.bind(this);var overlay=this.overlay=document.createElement("div");overlay.className="grab-to-pan-grabbing"}GrabToPan.prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function GrabToPan_activate(){if(!this.active){this.active=true;this.element.addEventListener("mousedown",this._onmousedown,true);this.element.classList.add(this.CSS_CLASS_GRAB);if(this.onActiveChanged){this.onActiveChanged(true)}}},deactivate:function GrabToPan_deactivate(){if(this.active){this.active=false;this.element.removeEventListener("mousedown",this._onmousedown,true);this._endPan();this.element.classList.remove(this.CSS_CLASS_GRAB);if(this.onActiveChanged){this.onActiveChanged(false)}}},toggle:function GrabToPan_toggle(){if(this.active){this.deactivate()}else{this.activate()}},ignoreTarget:function GrabToPan_ignoreTarget(node){return node[matchesSelector]("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function GrabToPan__onmousedown(event){if(event.button!==0||this.ignoreTarget(event.target)){return}if(event.originalTarget){try{event.originalTarget.tagName}catch(e){return}}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=event.clientX;this.clientYStart=event.clientY;this.document.addEventListener("mousemove",this._onmousemove,true);this.document.addEventListener("mouseup",this._endPan,true);this.element.addEventListener("scroll",this._endPan,true);event.preventDefault();event.stopPropagation();this.document.documentElement.classList.add(this.CSS_CLASS_GRABBING);var focusedElement=document.activeElement;if(focusedElement&&!focusedElement.contains(event.target)){focusedElement.blur()}},_onmousemove:function GrabToPan__onmousemove(event){this.element.removeEventListener("scroll",this._endPan,true);if(isLeftMouseReleased(event)){this._endPan();return}var xDiff=event.clientX-this.clientXStart;var yDiff=event.clientY-this.clientYStart;this.element.scrollTop=this.scrollTopStart-yDiff;this.element.scrollLeft=this.scrollLeftStart-xDiff;if(!this.overlay.parentNode){document.body.appendChild(this.overlay)}},_endPan:function GrabToPan__endPan(){this.element.removeEventListener("scroll",this._endPan,true);this.document.removeEventListener("mousemove",this._onmousemove,true);this.document.removeEventListener("mouseup",this._endPan,true);if(this.overlay.parentNode){this.overlay.parentNode.removeChild(this.overlay)}}};var matchesSelector;["webkitM","mozM","msM","oM","m"].some(function(prefix){var name=prefix+"atches";if(name in document.documentElement){matchesSelector=name}name+="Selector";if(name in document.documentElement){matchesSelector=name}return matchesSelector});var isNotIEorIsIE10plus=!document.documentMode||document.documentMode>9;var chrome=window.chrome;var isChrome15OrOpera15plus=chrome&&(chrome.webstore||chrome.app);var isSafari6plus=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent);function isLeftMouseReleased(event){if("buttons"in event&&isNotIEorIsIE10plus){return!(event.buttons|1)}if(isChrome15OrOpera15plus||isSafari6plus){return event.which===0}}return GrabToPan}();var HandTool={initialize:function handToolInitialize(options){var toggleHandTool=options.toggleHandTool;this.handTool=new GrabToPan({element:options.container,onActiveChanged:function(isActive){if(!toggleHandTool){return}if(isActive){toggleHandTool.title=mozL10n.get("hand_tool_disable.title",null,"Disable hand tool");toggleHandTool.firstElementChild.textContent=mozL10n.get("hand_tool_disable_label",null,"Disable hand tool")}else{toggleHandTool.title=mozL10n.get("hand_tool_enable.title",null,"Enable hand tool");toggleHandTool.firstElementChild.textContent=mozL10n.get("hand_tool_enable_label",null,"Enable hand tool")}}});if(toggleHandTool){toggleHandTool.addEventListener("click",this.toggle.bind(this),false);window.addEventListener("localized",function(evt){Preferences.get("enableHandToolOnLoad").then(function resolved(value){if(value){this.handTool.activate()}}.bind(this),function rejected(reason){})}.bind(this));window.addEventListener("presentationmodechanged",function(evt){if(evt.detail.switchInProgress){return}if(evt.detail.active){this.enterPresentationMode()}else{this.exitPresentationMode()}}.bind(this))}},toggle:function handToolToggle(){this.handTool.toggle();SecondaryToolbar.close()},enterPresentationMode:function handToolEnterPresentationMode(){if(this.handTool.active){this.wasActive=true;this.handTool.deactivate()}},exitPresentationMode:function handToolExitPresentationMode(){if(this.wasActive){this.wasActive=null;this.handTool.activate()}}};var OverlayManager={overlays:{},active:null,register:function overlayManagerRegister(name,callerCloseMethod,canForceClose){return new Promise(function(resolve){var element,container;if(!name||!(element=document.getElementById(name))||!(container=element.parentNode)){throw new Error("Not enough parameters.")}else if(this.overlays[name]){throw new Error("The overlay is already registered.")}this.overlays[name]={element:element,container:container,callerCloseMethod:callerCloseMethod||null,canForceClose:canForceClose||false};resolve()}.bind(this))},unregister:function overlayManagerUnregister(name){return new Promise(function(resolve){if(!this.overlays[name]){throw new Error("The overlay does not exist.")}else if(this.active===name){throw new Error("The overlay cannot be removed while it is active.")}delete this.overlays[name];resolve()}.bind(this))},open:function overlayManagerOpen(name){return new Promise(function(resolve){if(!this.overlays[name]){throw new Error("The overlay does not exist.")}else if(this.active){if(this.overlays[name].canForceClose){this._closeThroughCaller()}else if(this.active===name){throw new Error("The overlay is already active.")}else{throw new Error("Another overlay is currently active.")}}this.active=name;this.overlays[this.active].element.classList.remove("hidden");this.overlays[this.active].container.classList.remove("hidden");window.addEventListener("keydown",this._keyDown);resolve()}.bind(this))},close:function overlayManagerClose(name){return new Promise(function(resolve){if(!this.overlays[name]){throw new Error("The overlay does not exist.")}else if(!this.active){throw new Error("The overlay is currently not active.")}else if(this.active!==name){throw new Error("Another overlay is currently active.")}this.overlays[this.active].container.classList.add("hidden");this.overlays[this.active].element.classList.add("hidden");this.active=null;window.removeEventListener("keydown",this._keyDown);resolve()}.bind(this))},_keyDown:function overlayManager_keyDown(evt){var self=OverlayManager;if(self.active&&evt.keyCode===27){self._closeThroughCaller();evt.preventDefault()}},_closeThroughCaller:function overlayManager_closeThroughCaller(){if(this.overlays[this.active].callerCloseMethod){this.overlays[this.active].callerCloseMethod()}if(this.active){this.close(this.active)}}};var PasswordPrompt={overlayName:null,updatePassword:null,reason:null,passwordField:null,passwordText:null,passwordSubmit:null,passwordCancel:null,initialize:function secondaryToolbarInitialize(options){this.overlayName=options.overlayName;this.passwordField=options.passwordField;this.passwordText=options.passwordText;this.passwordSubmit=options.passwordSubmit;this.passwordCancel=options.passwordCancel;this.passwordSubmit.addEventListener("click",this.verifyPassword.bind(this));this.passwordCancel.addEventListener("click",this.close.bind(this));this.passwordField.addEventListener("keydown",function(e){if(e.keyCode===13){this.verifyPassword()}}.bind(this));OverlayManager.register(this.overlayName,this.close.bind(this),true)},open:function passwordPromptOpen(){OverlayManager.open(this.overlayName).then(function(){this.passwordField.focus();var promptString=mozL10n.get("password_label",null,"Enter the password to open this PDF file.");if(this.reason===PDFJS.PasswordResponses.INCORRECT_PASSWORD){promptString=mozL10n.get("password_invalid",null,"Invalid password. Please try again.")}this.passwordText.textContent=promptString}.bind(this))},close:function passwordPromptClose(){OverlayManager.close(this.overlayName).then(function(){this.passwordField.value=""}.bind(this))},verifyPassword:function passwordPromptVerifyPassword(){var password=this.passwordField.value;if(password&&password.length>0){this.close();return this.updatePassword(password)}}};var PDFDocumentProperties=function PDFDocumentPropertiesClosure(){function PDFDocumentProperties(options){this.fields=options.fields;this.overlayName=options.overlayName;this.rawFileSize=0;this.url=null;this.pdfDocument=null;if(options.closeButton){options.closeButton.addEventListener("click",this.close.bind(this))}this.dataAvailablePromise=new Promise(function(resolve){this.resolveDataAvailable=resolve}.bind(this));OverlayManager.register(this.overlayName,this.close.bind(this))}PDFDocumentProperties.prototype={open:function PDFDocumentProperties_open(){Promise.all([OverlayManager.open(this.overlayName),this.dataAvailablePromise]).then(function(){this._getProperties()}.bind(this))},close:function PDFDocumentProperties_close(){OverlayManager.close(this.overlayName)},setFileSize:function PDFDocumentProperties_setFileSize(fileSize){if(fileSize>0){this.rawFileSize=fileSize}},setDocumentAndUrl:function PDFDocumentProperties_setDocumentAndUrl(pdfDocument,url){this.pdfDocument=pdfDocument;this.url=url;this.resolveDataAvailable()},_getProperties:function PDFDocumentProperties_getProperties(){if(!OverlayManager.active){return}this.pdfDocument.getDownloadInfo().then(function(data){if(data.length===this.rawFileSize){return}this.setFileSize(data.length);this._updateUI(this.fields["fileSize"],this._parseFileSize())}.bind(this));this.pdfDocument.getMetadata().then(function(data){var content={fileName:getPDFFileNameFromURL(this.url),fileSize:this._parseFileSize(),title:data.info.Title,author:data.info.Author,subject:data.info.Subject,keywords:data.info.Keywords,creationDate:this._parseDate(data.info.CreationDate),modificationDate:this._parseDate(data.info.ModDate),creator:data.info.Creator,producer:data.info.Producer,version:data.info.PDFFormatVersion,pageCount:this.pdfDocument.numPages};for(var identifier in content){this._updateUI(this.fields[identifier],content[identifier])}}.bind(this))},_updateUI:function PDFDocumentProperties_updateUI(field,content){if(field&&content!==undefined&&content!==""){field.textContent=content}},_parseFileSize:function PDFDocumentProperties_parseFileSize(){var fileSize=this.rawFileSize,kb=fileSize/1024;if(!kb){return}else if(kb<1024){return mozL10n.get("document_properties_kb",{size_kb:(+kb.toPrecision(3)).toLocaleString(),size_b:fileSize.toLocaleString()},"{{size_kb}} KB ({{size_b}} bytes)")}else{return mozL10n.get("document_properties_mb",{size_mb:(+(kb/1024).toPrecision(3)).toLocaleString(),size_b:fileSize.toLocaleString()},"{{size_mb}} MB ({{size_b}} bytes)")}},_parseDate:function PDFDocumentProperties_parseDate(inputDate){var dateToParse=inputDate;if(dateToParse===undefined){return""}if(dateToParse.substring(0,2)==="D:"){dateToParse=dateToParse.substring(2)}var year=parseInt(dateToParse.substring(0,4),10);var month=parseInt(dateToParse.substring(4,6),10)-1;var day=parseInt(dateToParse.substring(6,8),10);var hours=parseInt(dateToParse.substring(8,10),10);var minutes=parseInt(dateToParse.substring(10,12),10);var seconds=parseInt(dateToParse.substring(12,14),10);var utRel=dateToParse.substring(14,15);var offsetHours=parseInt(dateToParse.substring(15,17),10);var offsetMinutes=parseInt(dateToParse.substring(18,20),10);if(utRel==="-"){hours+=offsetHours;minutes+=offsetMinutes}else if(utRel==="+"){hours-=offsetHours;minutes-=offsetMinutes}var date=new Date(Date.UTC(year,month,day,hours,minutes,seconds));var dateString=date.toLocaleDateString();var timeString=date.toLocaleTimeString();return mozL10n.get("document_properties_date_string",{date:dateString,time:timeString},"{{date}}, {{time}}")}};return PDFDocumentProperties}();var PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var IGNORE_CURRENT_POSITION_ON_ZOOM=false;var DEFAULT_CACHE_SIZE=10;var CLEANUP_TIMEOUT=3e4;var RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};var PDFRenderingQueue=function PDFRenderingQueueClosure(){function PDFRenderingQueue(){this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=false;this.isThumbnailViewEnabled=false}PDFRenderingQueue.prototype={setViewer:function PDFRenderingQueue_setViewer(pdfViewer){this.pdfViewer=pdfViewer},setThumbnailViewer:function PDFRenderingQueue_setThumbnailViewer(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer},isHighestPriority:function PDFRenderingQueue_isHighestPriority(view){return this.highestPriorityPage===view.renderingId},renderHighestPriority:function PDFRenderingQueue_renderHighestPriority(currentlyVisiblePages){if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}if(this.pdfViewer.forceRendering(currentlyVisiblePages)){return}if(this.pdfThumbnailViewer&&this.isThumbnailViewEnabled){if(this.pdfThumbnailViewer.forceRendering()){return}}if(this.printing){return}if(this.onIdle){this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT)}},getHighestPriority:function PDFRenderingQueue_getHighestPriority(visible,views,scrolledDown){var visibleViews=visible.views;var numVisible=visibleViews.length;if(numVisible===0){return false}for(var i=0;i<numVisible;++i){var view=visibleViews[i].view;if(!this.isViewFinished(view)){return view}}if(scrolledDown){var nextPageIndex=visible.last.id;if(views[nextPageIndex]&&!this.isViewFinished(views[nextPageIndex])){return views[nextPageIndex]}}else{var previousPageIndex=visible.first.id-2;if(views[previousPageIndex]&&!this.isViewFinished(views[previousPageIndex])){return views[previousPageIndex]}}return null},isViewFinished:function PDFRenderingQueue_isViewFinished(view){return view.renderingState===RenderingStates.FINISHED},renderView:function PDFRenderingQueue_renderView(view){var state=view.renderingState;switch(state){case RenderingStates.FINISHED:return false;case RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId;view.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId;var continueRendering=function(){this.renderHighestPriority()}.bind(this);view.draw().then(continueRendering,continueRendering);break}return true}};return PDFRenderingQueue}();var TEXT_LAYER_RENDER_DELAY=200;var PDFPageView=function PDFPageViewClosure(){function PDFPageView(options){var container=options.container;var id=options.id;var scale=options.scale;var defaultViewport=options.defaultViewport;var renderingQueue=options.renderingQueue;var textLayerFactory=options.textLayerFactory;var annotationLayerFactory=options.annotationLayerFactory;this.id=id;this.renderingId="page"+id;this.rotation=0;this.scale=scale||DEFAULT_SCALE;this.viewport=defaultViewport;this.pdfPageRotate=defaultViewport.rotation;this.hasRestrictedScaling=false;this.renderingQueue=renderingQueue;this.textLayerFactory=textLayerFactory;this.annotationLayerFactory=annotationLayerFactory;this.renderingState=RenderingStates.INITIAL;this.resume=null;this.onBeforeDraw=null;this.onAfterDraw=null;this.textLayer=null;this.zoomLayer=null;this.annotationLayer=null;var div=document.createElement("div");div.id="pageContainer"+this.id;div.className="page";div.style.width=Math.floor(this.viewport.width)+"px";div.style.height=Math.floor(this.viewport.height)+"px";div.setAttribute("data-page-number",this.id);this.div=div;container.appendChild(div)}PDFPageView.prototype={setPdfPage:function PDFPageView_setPdfPage(pdfPage){this.pdfPage=pdfPage;this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport(this.scale*CSS_UNITS,totalRotation);this.stats=pdfPage.stats;this.reset()},destroy:function PDFPageView_destroy(){this.zoomLayer=null;this.reset();if(this.pdfPage){this.pdfPage.cleanup()}},reset:function PDFPageView_reset(keepZoomLayer,keepAnnotations){if(this.renderTask){this.renderTask.cancel()}this.resume=null;this.renderingState=RenderingStates.INITIAL;var div=this.div;div.style.width=Math.floor(this.viewport.width)+"px";div.style.height=Math.floor(this.viewport.height)+"px";var childNodes=div.childNodes;var currentZoomLayerNode=keepZoomLayer&&this.zoomLayer||null;var currentAnnotationNode=keepAnnotations&&this.annotationLayer&&this.annotationLayer.div||null;for(var i=childNodes.length-1;i>=0;i--){var node=childNodes[i];if(currentZoomLayerNode===node||currentAnnotationNode===node){continue}div.removeChild(node)}div.removeAttribute("data-loaded");if(currentAnnotationNode){this.annotationLayer.hide()}else{this.annotationLayer=null}if(this.canvas&&!currentZoomLayerNode){this.canvas.width=0;this.canvas.height=0;delete this.canvas}this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon";div.appendChild(this.loadingIconDiv)},update:function PDFPageView_update(scale,rotation){this.scale=scale||this.scale;if(typeof rotation!=="undefined"){this.rotation=rotation}var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*CSS_UNITS,rotation:totalRotation});var isScalingRestricted=false;if(this.canvas&&PDFJS.maxCanvasPixels>0){var outputScale=this.outputScale;var pixelsInViewport=this.viewport.width*this.viewport.height;var maxScale=Math.sqrt(PDFJS.maxCanvasPixels/pixelsInViewport);if((Math.floor(this.viewport.width)*outputScale.sx|0)*(Math.floor(this.viewport.height)*outputScale.sy|0)>PDFJS.maxCanvasPixels){isScalingRestricted=true}}if(this.canvas){if(PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted){this.cssTransform(this.canvas,true);var event=document.createEvent("CustomEvent");event.initCustomEvent("pagerendered",true,true,{pageNumber:this.id,cssTransform:true});this.div.dispatchEvent(event);return}if(!this.zoomLayer){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}if(this.zoomLayer){this.cssTransform(this.zoomLayer.firstChild)}this.reset(true,true)},updatePosition:function PDFPageView_updatePosition(){if(this.textLayer){this.textLayer.render(TEXT_LAYER_RENDER_DELAY)}},cssTransform:function PDFPageView_transform(canvas,redrawAnnotations){var CustomStyle=PDFJS.CustomStyle;var width=this.viewport.width;var height=this.viewport.height;var div=this.div;canvas.style.width=canvas.parentNode.style.width=div.style.width=Math.floor(width)+"px";canvas.style.height=canvas.parentNode.style.height=div.style.height=Math.floor(height)+"px";var relativeRotation=this.viewport.rotation-canvas._viewport.rotation;var absRotation=Math.abs(relativeRotation);var scaleX=1,scaleY=1;if(absRotation===90||absRotation===270){scaleX=height/width;scaleY=width/height}var cssTransform="rotate("+relativeRotation+"deg) "+"scale("+scaleX+","+scaleY+")";CustomStyle.setProp("transform",canvas,cssTransform);if(this.textLayer){var textLayerViewport=this.textLayer.viewport;var textRelativeRotation=this.viewport.rotation-textLayerViewport.rotation;var textAbsRotation=Math.abs(textRelativeRotation);var scale=width/textLayerViewport.width;if(textAbsRotation===90||textAbsRotation===270){scale=width/textLayerViewport.height}var textLayerDiv=this.textLayer.textLayerDiv;var transX,transY;switch(textAbsRotation){case 0:transX=transY=0;break;case 90:transX=0;transY="-"+textLayerDiv.style.height;break;case 180:transX="-"+textLayerDiv.style.width;transY="-"+textLayerDiv.style.height;break;case 270:transX="-"+textLayerDiv.style.width;transY=0;break;default:console.error("Bad rotation value.");break}CustomStyle.setProp("transform",textLayerDiv,"rotate("+textAbsRotation+"deg) "+"scale("+scale+", "+scale+") "+"translate("+transX+", "+transY+")");CustomStyle.setProp("transformOrigin",textLayerDiv,"0% 0%")}if(redrawAnnotations&&this.annotationLayer){this.annotationLayer.render(this.viewport,"display")}},get width(){return this.viewport.width},get height(){return this.viewport.height},getPagePoint:function PDFPageView_getPagePoint(x,y){return this.viewport.convertToPdfPoint(x,y)},draw:function PDFPageView_draw(){if(this.renderingState!==RenderingStates.INITIAL){console.error("Must be in new state before drawing")}this.renderingState=RenderingStates.RUNNING;var pdfPage=this.pdfPage;var viewport=this.viewport;var div=this.div;var canvasWrapper=document.createElement("div");canvasWrapper.style.width=div.style.width;canvasWrapper.style.height=div.style.height;canvasWrapper.classList.add("canvasWrapper");var canvas=document.createElement("canvas");canvas.id="page"+this.id;canvas.setAttribute("hidden","hidden");var isCanvasHidden=true;canvasWrapper.appendChild(canvas);if(this.annotationLayer&&this.annotationLayer.div){div.insertBefore(canvasWrapper,this.annotationLayer.div)}else{div.appendChild(canvasWrapper)}this.canvas=canvas;canvas.mozOpaque=true;var ctx=canvas.getContext("2d",{alpha:false});var outputScale=getOutputScale(ctx);this.outputScale=outputScale;if(PDFJS.useOnlyCssZoom){var actualSizeViewport=viewport.clone({scale:CSS_UNITS});outputScale.sx*=actualSizeViewport.width/viewport.width;outputScale.sy*=actualSizeViewport.height/viewport.height;outputScale.scaled=true}if(PDFJS.maxCanvasPixels>0){var pixelsInViewport=viewport.width*viewport.height;var maxScale=Math.sqrt(PDFJS.maxCanvasPixels/pixelsInViewport);if(outputScale.sx>maxScale||outputScale.sy>maxScale){outputScale.sx=maxScale;outputScale.sy=maxScale;outputScale.scaled=true;this.hasRestrictedScaling=true}else{this.hasRestrictedScaling=false}}var sfx=approximateFraction(outputScale.sx);var sfy=approximateFraction(outputScale.sy);canvas.width=roundToDivide(viewport.width*outputScale.sx,sfx[0]);canvas.height=roundToDivide(viewport.height*outputScale.sy,sfy[0]);canvas.style.width=roundToDivide(viewport.width,sfx[1])+"px";canvas.style.height=roundToDivide(viewport.height,sfy[1])+"px";canvas._viewport=viewport;var textLayerDiv=null;var textLayer=null;if(this.textLayerFactory){textLayerDiv=document.createElement("div");textLayerDiv.className="textLayer";textLayerDiv.style.width=canvasWrapper.style.width;textLayerDiv.style.height=canvasWrapper.style.height;if(this.annotationLayer&&this.annotationLayer.div){div.insertBefore(textLayerDiv,this.annotationLayer.div)}else{div.appendChild(textLayerDiv)}textLayer=this.textLayerFactory.createTextLayerBuilder(textLayerDiv,this.id-1,this.viewport)}this.textLayer=textLayer;var resolveRenderPromise,rejectRenderPromise;var promise=new Promise(function(resolve,reject){resolveRenderPromise=resolve;rejectRenderPromise=reject});var self=this;function pageViewDrawCallback(error){if(renderTask===self.renderTask){self.renderTask=null}if(error==="cancelled"){rejectRenderPromise(error);return}self.renderingState=RenderingStates.FINISHED;if(isCanvasHidden){self.canvas.removeAttribute("hidden");isCanvasHidden=false}if(self.loadingIconDiv){div.removeChild(self.loadingIconDiv);delete self.loadingIconDiv}if(self.zoomLayer){var zoomLayerCanvas=self.zoomLayer.firstChild;zoomLayerCanvas.width=0;zoomLayerCanvas.height=0;div.removeChild(self.zoomLayer);self.zoomLayer=null}self.error=error;self.stats=pdfPage.stats;if(self.onAfterDraw){self.onAfterDraw()}var event=document.createEvent("CustomEvent");event.initCustomEvent("pagerendered",true,true,{pageNumber:self.id,cssTransform:false});div.dispatchEvent(event);var deprecatedEvent=document.createEvent("CustomEvent");deprecatedEvent.initCustomEvent("pagerender",true,true,{pageNumber:pdfPage.pageNumber});div.dispatchEvent(deprecatedEvent);if(!error){resolveRenderPromise(undefined)}else{rejectRenderPromise(error)}}var renderContinueCallback=null;if(this.renderingQueue){renderContinueCallback=function renderContinueCallback(cont){if(!self.renderingQueue.isHighestPriority(self)){self.renderingState=RenderingStates.PAUSED;self.resume=function resumeCallback(){self.renderingState=RenderingStates.RUNNING;cont()};return}if(isCanvasHidden){self.canvas.removeAttribute("hidden");isCanvasHidden=false}cont()}}var transform=!outputScale.scaled?null:[outputScale.sx,0,0,outputScale.sy,0,0];var renderContext={canvasContext:ctx,transform:transform,viewport:this.viewport};var renderTask=this.renderTask=this.pdfPage.render(renderContext);renderTask.onContinue=renderContinueCallback;this.renderTask.promise.then(function pdfPageRenderCallback(){pageViewDrawCallback(null);if(textLayer){self.pdfPage.getTextContent({normalizeWhitespace:true}).then(function textContentResolved(textContent){textLayer.setTextContent(textContent);textLayer.render(TEXT_LAYER_RENDER_DELAY)})}},function pdfPageRenderError(error){pageViewDrawCallback(error)});if(this.annotationLayerFactory){if(!this.annotationLayer){this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(div,this.pdfPage)}this.annotationLayer.render(this.viewport,"display")}div.setAttribute("data-loaded",true);if(self.onBeforeDraw){self.onBeforeDraw()}return promise},beforePrint:function PDFPageView_beforePrint(){var CustomStyle=PDFJS.CustomStyle;var pdfPage=this.pdfPage;var viewport=pdfPage.getViewport(1);var PRINT_OUTPUT_SCALE=2;var canvas=document.createElement("canvas");canvas.width=Math.floor(viewport.width)*PRINT_OUTPUT_SCALE;canvas.height=Math.floor(viewport.height)*PRINT_OUTPUT_SCALE;canvas.style.width=PRINT_OUTPUT_SCALE*100+"%";canvas.style.height=PRINT_OUTPUT_SCALE*100+"%";var cssScale="scale("+1/PRINT_OUTPUT_SCALE+", "+1/PRINT_OUTPUT_SCALE+")";CustomStyle.setProp("transform",canvas,cssScale);CustomStyle.setProp("transformOrigin",canvas,"0% 0%");var printContainer=document.getElementById("printContainer");

var canvasWrapper=document.createElement("div");canvasWrapper.style.width=viewport.width+"pt";canvasWrapper.style.height=viewport.height+"pt";canvasWrapper.appendChild(canvas);printContainer.appendChild(canvasWrapper);canvas.mozPrintCallback=function(obj){var ctx=obj.context;ctx.save();ctx.fillStyle="rgb(255, 255, 255)";ctx.fillRect(0,0,canvas.width,canvas.height);ctx.restore();ctx._transformMatrix=[PRINT_OUTPUT_SCALE,0,0,PRINT_OUTPUT_SCALE,0,0];ctx.scale(PRINT_OUTPUT_SCALE,PRINT_OUTPUT_SCALE);var renderContext={canvasContext:ctx,viewport:viewport,intent:"print"};pdfPage.render(renderContext).promise.then(function(){obj.done()},function(error){console.error(error);if("abort"in obj){obj.abort()}else{obj.done()}})}}};return PDFPageView}();var TextLayerBuilder=function TextLayerBuilderClosure(){function TextLayerBuilder(options){this.textLayerDiv=options.textLayerDiv;this.renderingDone=false;this.divContentDone=false;this.pageIdx=options.pageIndex;this.pageNumber=this.pageIdx+1;this.matches=[];this.viewport=options.viewport;this.textDivs=[];this.findController=options.findController||null;this.textLayerRenderTask=null;this._bindMouse()}TextLayerBuilder.prototype={_finishRendering:function TextLayerBuilder_finishRendering(){this.renderingDone=true;var endOfContent=document.createElement("div");endOfContent.className="endOfContent";this.textLayerDiv.appendChild(endOfContent);var event=document.createEvent("CustomEvent");event.initCustomEvent("textlayerrendered",true,true,{pageNumber:this.pageNumber});this.textLayerDiv.dispatchEvent(event)},render:function TextLayerBuilder_render(timeout){if(!this.divContentDone||this.renderingDone){return}if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}this.textDivs=[];var textLayerFrag=document.createDocumentFragment();this.textLayerRenderTask=PDFJS.renderTextLayer({textContent:this.textContent,container:textLayerFrag,viewport:this.viewport,textDivs:this.textDivs,timeout:timeout});this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(textLayerFrag);this._finishRendering();this.updateMatches()}.bind(this),function(reason){})},setTextContent:function TextLayerBuilder_setTextContent(textContent){if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}this.textContent=textContent;this.divContentDone=true},convertMatches:function TextLayerBuilder_convertMatches(matches){var i=0;var iIndex=0;var bidiTexts=this.textContent.items;var end=bidiTexts.length-1;var queryLen=this.findController===null?0:this.findController.state.query.length;var ret=[];for(var m=0,len=matches.length;m<len;m++){var matchIdx=matches[m];while(i!==end&&matchIdx>=iIndex+bidiTexts[i].str.length){iIndex+=bidiTexts[i].str.length;i++}if(i===bidiTexts.length){console.error("Could not find a matching mapping")}var match={begin:{divIdx:i,offset:matchIdx-iIndex}};matchIdx+=queryLen;while(i!==end&&matchIdx>iIndex+bidiTexts[i].str.length){iIndex+=bidiTexts[i].str.length;i++}match.end={divIdx:i,offset:matchIdx-iIndex};ret.push(match)}return ret},renderMatches:function TextLayerBuilder_renderMatches(matches){if(matches.length===0){return}var bidiTexts=this.textContent.items;var textDivs=this.textDivs;var prevEnd=null;var pageIdx=this.pageIdx;var isSelectedPage=this.findController===null?false:pageIdx===this.findController.selected.pageIdx;var selectedMatchIdx=this.findController===null?-1:this.findController.selected.matchIdx;var highlightAll=this.findController===null?false:this.findController.state.highlightAll;var infinity={divIdx:-1,offset:undefined};function beginText(begin,className){var divIdx=begin.divIdx;textDivs[divIdx].textContent="";appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){var div=textDivs[divIdx];var content=bidiTexts[divIdx].str.substring(fromOffset,toOffset);var node=document.createTextNode(content);if(className){var span=document.createElement("span");span.className=className;span.appendChild(node);div.appendChild(span);return}div.appendChild(node)}var i0=selectedMatchIdx,i1=i0+1;if(highlightAll){i0=0;i1=matches.length}else if(!isSelectedPage){return}for(var i=i0;i<i1;i++){var match=matches[i];var begin=match.begin;var end=match.end;var isSelected=isSelectedPage&&i===selectedMatchIdx;var highlightSuffix=isSelected?" selected":"";if(this.findController){this.findController.updateMatchPosition(pageIdx,i,textDivs,begin.divIdx,end.divIdx)}if(!prevEnd||begin.divIdx!==prevEnd.divIdx){if(prevEnd!==null){appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}beginText(begin)}else{appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset)}if(begin.divIdx===end.divIdx){appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix)}else{appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(var n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++){textDivs[n0].className="highlight middle"+highlightSuffix}beginText(end,"highlight end"+highlightSuffix)}prevEnd=end}if(prevEnd){appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}},updateMatches:function TextLayerBuilder_updateMatches(){if(!this.renderingDone){return}var matches=this.matches;var textDivs=this.textDivs;var bidiTexts=this.textContent.items;var clearedUntilDivIdx=-1;for(var i=0,len=matches.length;i<len;i++){var match=matches[i];var begin=Math.max(clearedUntilDivIdx,match.begin.divIdx);for(var n=begin,end=match.end.divIdx;n<=end;n++){var div=textDivs[n];div.textContent=bidiTexts[n].str;div.className=""}clearedUntilDivIdx=match.end.divIdx+1}if(this.findController===null||!this.findController.active){return}this.matches=this.convertMatches(this.findController===null?[]:this.findController.pageMatches[this.pageIdx]||[]);this.renderMatches(this.matches)},_bindMouse:function TextLayerBuilder_bindMouse(){var div=this.textLayerDiv;div.addEventListener("mousedown",function(e){var end=div.querySelector(".endOfContent");if(!end){return}var adjustTop=e.target!==div;adjustTop=adjustTop&&window.getComputedStyle(end).getPropertyValue("-moz-user-select")!=="none";if(adjustTop){var divBounds=div.getBoundingClientRect();var r=Math.max(0,(e.pageY-divBounds.top)/divBounds.height);end.style.top=(r*100).toFixed(2)+"%"}end.classList.add("active")});div.addEventListener("mouseup",function(e){var end=div.querySelector(".endOfContent");if(!end){return}end.style.top="";end.classList.remove("active")})}};return TextLayerBuilder}();function DefaultTextLayerFactory(){}DefaultTextLayerFactory.prototype={createTextLayerBuilder:function(textLayerDiv,pageIndex,viewport){return new TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport})}};var AnnotationLayerBuilder=function AnnotationLayerBuilderClosure(){function AnnotationLayerBuilder(options){this.pageDiv=options.pageDiv;this.pdfPage=options.pdfPage;this.linkService=options.linkService;this.div=null}AnnotationLayerBuilder.prototype={render:function AnnotationLayerBuilder_render(viewport,intent){var self=this;var parameters={intent:intent===undefined?"display":intent};this.pdfPage.getAnnotations(parameters).then(function(annotations){viewport=viewport.clone({dontFlip:true});parameters={viewport:viewport,div:self.div,annotations:annotations,page:self.pdfPage,linkService:self.linkService};if(self.div){PDFJS.AnnotationLayer.update(parameters)}else{if(annotations.length===0){return}self.div=document.createElement("div");self.div.className="annotationLayer";self.pageDiv.appendChild(self.div);parameters.div=self.div;PDFJS.AnnotationLayer.render(parameters);if(typeof mozL10n!=="undefined"){mozL10n.translate(self.div)}}})},hide:function AnnotationLayerBuilder_hide(){if(!this.div){return}this.div.setAttribute("hidden","true")}};return AnnotationLayerBuilder}();function DefaultAnnotationLayerFactory(){}DefaultAnnotationLayerFactory.prototype={createAnnotationLayerBuilder:function(pageDiv,pdfPage){return new AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,linkService:new SimpleLinkService})}};var PDFViewer=function pdfViewer(){function PDFPageViewBuffer(size){var data=[];this.push=function cachePush(view){var i=data.indexOf(view);if(i>=0){data.splice(i,1)}data.push(view);if(data.length>size){data.shift().destroy()}};this.resize=function(newSize){size=newSize;while(data.length>size){data.shift().destroy()}}}function isSameScale(oldScale,newScale){if(newScale===oldScale){return true}if(Math.abs(newScale-oldScale)<1e-15){return true}return false}function PDFViewer(options){this.container=options.container;this.viewer=options.viewer||options.container.firstElementChild;this.linkService=options.linkService||new SimpleLinkService;this.removePageBorders=options.removePageBorders||false;this.defaultRenderingQueue=!options.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new PDFRenderingQueue;this.renderingQueue.setViewer(this)}else{this.renderingQueue=options.renderingQueue}this.scroll=watchScroll(this.container,this._scrollUpdate.bind(this));this.updateInProgress=false;this.presentationModeState=PresentationModeState.UNKNOWN;this._resetView();if(this.removePageBorders){this.viewer.classList.add("removePageBorders")}}PDFViewer.prototype={get pagesCount(){return this._pages.length},getPageView:function(index){return this._pages[index]},get currentPageNumber(){return this._currentPageNumber},set currentPageNumber(val){if(!this.pdfDocument){this._currentPageNumber=val;return}var event=document.createEvent("UIEvents");event.initUIEvent("pagechange",true,true,window,0);event.updateInProgress=this.updateInProgress;if(!(0<val&&val<=this.pagesCount)){event.pageNumber=this._currentPageNumber;event.previousPageNumber=val;this.container.dispatchEvent(event);return}event.previousPageNumber=this._currentPageNumber;this._currentPageNumber=val;event.pageNumber=val;this.container.dispatchEvent(event);if(this.updateInProgress){return}this.scrollPageIntoView(val)},get currentScale(){return this._currentScale!==UNKNOWN_SCALE?this._currentScale:DEFAULT_SCALE},set currentScale(val){if(isNaN(val)){throw new Error("Invalid numeric scale")}if(!this.pdfDocument){this._currentScale=val;this._currentScaleValue=val!==UNKNOWN_SCALE?val.toString():null;return}this._setScale(val,false)},get currentScaleValue(){return this._currentScaleValue},set currentScaleValue(val){if(!this.pdfDocument){this._currentScale=isNaN(val)?UNKNOWN_SCALE:val;this._currentScaleValue=val;return}this._setScale(val,false)},get pagesRotation(){return this._pagesRotation},set pagesRotation(rotation){this._pagesRotation=rotation;for(var i=0,l=this._pages.length;i<l;i++){var pageView=this._pages[i];pageView.update(pageView.scale,rotation)}this._setScale(this._currentScaleValue,true);if(this.defaultRenderingQueue){this.update()}},setDocument:function(pdfDocument){if(this.pdfDocument){this._resetView()}this.pdfDocument=pdfDocument;if(!pdfDocument){return}var pagesCount=pdfDocument.numPages;var self=this;var resolvePagesPromise;var pagesPromise=new Promise(function(resolve){resolvePagesPromise=resolve});this.pagesPromise=pagesPromise;pagesPromise.then(function(){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagesloaded",true,true,{pagesCount:pagesCount});self.container.dispatchEvent(event)});var isOnePageRenderedResolved=false;var resolveOnePageRendered=null;var onePageRendered=new Promise(function(resolve){resolveOnePageRendered=resolve});this.onePageRendered=onePageRendered;var bindOnAfterAndBeforeDraw=function(pageView){pageView.onBeforeDraw=function pdfViewLoadOnBeforeDraw(){self._buffer.push(this)};pageView.onAfterDraw=function pdfViewLoadOnAfterDraw(){if(!isOnePageRenderedResolved){isOnePageRenderedResolved=true;resolveOnePageRendered()}}};var firstPagePromise=pdfDocument.getPage(1);this.firstPagePromise=firstPagePromise;return firstPagePromise.then(function(pdfPage){var scale=this.currentScale;var viewport=pdfPage.getViewport(scale*CSS_UNITS);for(var pageNum=1;pageNum<=pagesCount;++pageNum){var textLayerFactory=null;if(!PDFJS.disableTextLayer){textLayerFactory=this}var pageView=new PDFPageView({container:this.viewer,id:pageNum,scale:scale,defaultViewport:viewport.clone(),renderingQueue:this.renderingQueue,textLayerFactory:textLayerFactory,annotationLayerFactory:this});bindOnAfterAndBeforeDraw(pageView);this._pages.push(pageView)}var linkService=this.linkService;onePageRendered.then(function(){if(!PDFJS.disableAutoFetch){var getPagesLeft=pagesCount;for(var pageNum=1;pageNum<=pagesCount;++pageNum){pdfDocument.getPage(pageNum).then(function(pageNum,pdfPage){var pageView=self._pages[pageNum-1];if(!pageView.pdfPage){pageView.setPdfPage(pdfPage)}linkService.cachePageRef(pageNum,pdfPage.ref);getPagesLeft--;if(!getPagesLeft){resolvePagesPromise()}}.bind(null,pageNum))}}else{resolvePagesPromise()}});var event=document.createEvent("CustomEvent");event.initCustomEvent("pagesinit",true,true,null);self.container.dispatchEvent(event);if(this.defaultRenderingQueue){this.update()}if(this.findController){this.findController.resolveFirstPage()}}.bind(this))},_resetView:function(){this._pages=[];this._currentPageNumber=1;this._currentScale=UNKNOWN_SCALE;this._currentScaleValue=null;this._buffer=new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);this._location=null;this._pagesRotation=0;this._pagesRequests=[];var container=this.viewer;while(container.hasChildNodes()){container.removeChild(container.lastChild)}},_scrollUpdate:function PDFViewer_scrollUpdate(){if(this.pagesCount===0){return}this.update();for(var i=0,ii=this._pages.length;i<ii;i++){this._pages[i].updatePosition()}},_setScaleDispatchEvent:function pdfViewer_setScaleDispatchEvent(newScale,newValue,preset){var event=document.createEvent("UIEvents");event.initUIEvent("scalechange",true,true,window,0);event.scale=newScale;if(preset){event.presetValue=newValue}this.container.dispatchEvent(event)},_setScaleUpdatePages:function pdfViewer_setScaleUpdatePages(newScale,newValue,noScroll,preset){this._currentScaleValue=newValue;if(isSameScale(this._currentScale,newScale)){if(preset){this._setScaleDispatchEvent(newScale,newValue,true)}return}for(var i=0,ii=this._pages.length;i<ii;i++){this._pages[i].update(newScale)}this._currentScale=newScale;if(!noScroll){var page=this._currentPageNumber,dest;if(this._location&&!IGNORE_CURRENT_POSITION_ON_ZOOM&&!(this.isInPresentationMode||this.isChangingPresentationMode)){page=this._location.pageNumber;dest=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView(page,dest)}this._setScaleDispatchEvent(newScale,newValue,preset);if(this.defaultRenderingQueue){this.update()}},_setScale:function pdfViewer_setScale(value,noScroll){var scale=parseFloat(value);if(scale>0){this._setScaleUpdatePages(scale,value,noScroll,false)}else{var currentPage=this._pages[this._currentPageNumber-1];if(!currentPage){return}var hPadding=this.isInPresentationMode||this.removePageBorders?0:SCROLLBAR_PADDING;var vPadding=this.isInPresentationMode||this.removePageBorders?0:VERTICAL_PADDING;var pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale;var pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":var isLandscape=currentPage.width>currentPage.height;var horizontalScale=isLandscape?Math.min(pageHeightScale,pageWidthScale):pageWidthScale;scale=Math.min(MAX_AUTO_SCALE,horizontalScale);break;default:console.error("pdfViewSetScale: '"+value+"' is an unknown zoom value.");return}this._setScaleUpdatePages(scale,value,noScroll,true)}},scrollPageIntoView:function PDFViewer_scrollPageIntoView(pageNumber,dest){if(!this.pdfDocument){return}var pageView=this._pages[pageNumber-1];if(this.isInPresentationMode){if(this._currentPageNumber!==pageView.id){this.currentPageNumber=pageView.id;return}dest=null;this._setScale(this._currentScaleValue,true)}if(!dest){scrollIntoView(pageView.div);return}var x=0,y=0;var width=0,height=0,widthScale,heightScale;var changeOrientation=pageView.rotation%180===0?false:true;var pageWidth=(changeOrientation?pageView.height:pageView.width)/pageView.scale/CSS_UNITS;var pageHeight=(changeOrientation?pageView.width:pageView.height)/pageView.scale/CSS_UNITS;var scale=0;switch(dest[1].name){case"XYZ":x=dest[2];y=dest[3];scale=dest[4];x=x!==null?x:0;y=y!==null?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":y=dest[2];scale="page-width";if(y===null&&this._location){x=this._location.left;y=this._location.top}break;case"FitV":case"FitBV":x=dest[2];width=pageWidth;height=pageHeight;scale="page-height";break;case"FitR":x=dest[2];y=dest[3];width=dest[4]-x;height=dest[5]-y;var hPadding=this.removePageBorders?0:SCROLLBAR_PADDING;var vPadding=this.removePageBorders?0:VERTICAL_PADDING;widthScale=(this.container.clientWidth-hPadding)/width/CSS_UNITS;heightScale=(this.container.clientHeight-vPadding)/height/CSS_UNITS;scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:return}if(scale&&scale!==this._currentScale){this.currentScaleValue=scale}else if(this._currentScale===UNKNOWN_SCALE){this.currentScaleValue=DEFAULT_SCALE_VALUE}if(scale==="page-fit"&&!dest[4]){scrollIntoView(pageView.div);return}var boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)];var left=Math.min(boundingRect[0][0],boundingRect[1][0]);var top=Math.min(boundingRect[0][1],boundingRect[1][1]);scrollIntoView(pageView.div,{left:left,top:top})},_updateLocation:function(firstPage){var currentScale=this._currentScale;var currentScaleValue=this._currentScaleValue;var normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(currentScale*1e4)/100:currentScaleValue;var pageNumber=firstPage.id;var pdfOpenParams="#page="+pageNumber;pdfOpenParams+="&zoom="+normalizedScaleValue;var currentPageView=this._pages[pageNumber-1];var container=this.container;var topLeft=currentPageView.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y);var intLeft=Math.round(topLeft[0]);var intTop=Math.round(topLeft[1]);pdfOpenParams+=","+intLeft+","+intTop;this._location={pageNumber:pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,pdfOpenParams:pdfOpenParams}},update:function PDFViewer_update(){var visible=this._getVisiblePages();var visiblePages=visible.views;if(visiblePages.length===0){return}this.updateInProgress=true;var suggestedCacheSize=Math.max(DEFAULT_CACHE_SIZE,2*visiblePages.length+1);this._buffer.resize(suggestedCacheSize);this.renderingQueue.renderHighestPriority(visible);var currentId=this._currentPageNumber;var firstPage=visible.first;for(var i=0,ii=visiblePages.length,stillFullyVisible=false;i<ii;++i){var page=visiblePages[i];if(page.percent<100){break}if(page.id===currentId){stillFullyVisible=true;break}}if(!stillFullyVisible){currentId=visiblePages[0].id}if(!this.isInPresentationMode){this.currentPageNumber=currentId}this._updateLocation(firstPage);this.updateInProgress=false;var event=document.createEvent("UIEvents");event.initUIEvent("updateviewarea",true,true,window,0);event.location=this._location;this.container.dispatchEvent(event)},containsElement:function(element){return this.container.contains(element)},focus:function(){this.container.focus()},get isInPresentationMode(){return this.presentationModeState===PresentationModeState.FULLSCREEN},get isChangingPresentationMode(){return this.presentationModeState===PresentationModeState.CHANGING},get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?false:this.container.scrollWidth>this.container.clientWidth},_getVisiblePages:function(){if(!this.isInPresentationMode){return getVisibleElements(this.container,this._pages,true)}else{var visible=[];var currentPage=this._pages[this._currentPageNumber-1];visible.push({id:currentPage.id,view:currentPage});return{first:currentPage,last:currentPage,views:visible}}},cleanup:function(){for(var i=0,ii=this._pages.length;i<ii;i++){if(this._pages[i]&&this._pages[i].renderingState!==RenderingStates.FINISHED){this._pages[i].reset()}}},_ensurePdfPageLoaded:function(pageView){if(pageView.pdfPage){return Promise.resolve(pageView.pdfPage)}var pageNumber=pageView.id;if(this._pagesRequests[pageNumber]){return this._pagesRequests[pageNumber]}var promise=this.pdfDocument.getPage(pageNumber).then(function(pdfPage){pageView.setPdfPage(pdfPage);this._pagesRequests[pageNumber]=null;return pdfPage}.bind(this));this._pagesRequests[pageNumber]=promise;return promise},forceRendering:function(currentlyVisiblePages){var visiblePages=currentlyVisiblePages||this._getVisiblePages();var pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,this.scroll.down);if(pageView){this._ensurePdfPageLoaded(pageView).then(function(){this.renderingQueue.renderView(pageView)}.bind(this));return true}return false},getPageTextContent:function(pageIndex){return this.pdfDocument.getPage(pageIndex+1).then(function(page){return page.getTextContent({normalizeWhitespace:true})})},createTextLayerBuilder:function(textLayerDiv,pageIndex,viewport){return new TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport,findController:this.isInPresentationMode?null:this.findController})},createAnnotationLayerBuilder:function(pageDiv,pdfPage){return new AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,linkService:this.linkService})},setFindController:function(findController){this.findController=findController}};return PDFViewer}();var SimpleLinkService=function SimpleLinkServiceClosure(){function SimpleLinkService(){}SimpleLinkService.prototype={get page(){return 0},set page(value){},navigateTo:function(dest){},getDestinationHash:function(dest){return"#"},getAnchorUrl:function(hash){return"#"},setHash:function(hash){},executeNamedAction:function(action){},cachePageRef:function(pageNum,pageRef){}};return SimpleLinkService}();var THUMBNAIL_SCROLL_MARGIN=-19;var THUMBNAIL_WIDTH=98;var THUMBNAIL_CANVAS_BORDER_WIDTH=1;var PDFThumbnailView=function PDFThumbnailViewClosure(){function getTempCanvas(width,height){var tempCanvas=PDFThumbnailView.tempImageCache;if(!tempCanvas){tempCanvas=document.createElement("canvas");PDFThumbnailView.tempImageCache=tempCanvas}tempCanvas.width=width;tempCanvas.height=height;tempCanvas.mozOpaque=true;var ctx=tempCanvas.getContext("2d",{alpha:false});ctx.save();ctx.fillStyle="rgb(255, 255, 255)";ctx.fillRect(0,0,width,height);ctx.restore();return tempCanvas}function PDFThumbnailView(options){var container=options.container;var id=options.id;var defaultViewport=options.defaultViewport;var linkService=options.linkService;var renderingQueue=options.renderingQueue;this.id=id;this.renderingId="thumbnail"+id;this.pdfPage=null;this.rotation=0;this.viewport=defaultViewport;this.pdfPageRotate=defaultViewport.rotation;this.linkService=linkService;this.renderingQueue=renderingQueue;this.hasImage=false;this.resume=null;this.renderingState=RenderingStates.INITIAL;this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.canvasWidth=THUMBNAIL_WIDTH;this.canvasHeight=this.canvasWidth/this.pageRatio|0;this.scale=this.canvasWidth/this.pageWidth;var anchor=document.createElement("a");anchor.href=linkService.getAnchorUrl("#page="+id);anchor.title=mozL10n.get("thumb_page_title",{page:id},"Page {{page}}");anchor.onclick=function stopNavigation(){linkService.page=id;return false};var div=document.createElement("div");div.id="thumbnailContainer"+id;div.className="thumbnail";this.div=div;if(id===1){div.classList.add("selected")}var ring=document.createElement("div");ring.className="thumbnailSelectionRing";var borderAdjustment=2*THUMBNAIL_CANVAS_BORDER_WIDTH;ring.style.width=this.canvasWidth+borderAdjustment+"px";ring.style.height=this.canvasHeight+borderAdjustment+"px";this.ring=ring;div.appendChild(ring);anchor.appendChild(div);container.appendChild(anchor)}PDFThumbnailView.prototype={setPdfPage:function PDFThumbnailView_setPdfPage(pdfPage){this.pdfPage=pdfPage;this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport(1,totalRotation);this.reset()},reset:function PDFThumbnailView_reset(){if(this.renderTask){this.renderTask.cancel()}this.hasImage=false;this.resume=null;this.renderingState=RenderingStates.INITIAL;this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.canvasHeight=this.canvasWidth/this.pageRatio|0;this.scale=this.canvasWidth/this.pageWidth;this.div.removeAttribute("data-loaded");var ring=this.ring;var childNodes=ring.childNodes;for(var i=childNodes.length-1;i>=0;i--){ring.removeChild(childNodes[i])}var borderAdjustment=2*THUMBNAIL_CANVAS_BORDER_WIDTH;ring.style.width=this.canvasWidth+borderAdjustment+"px";ring.style.height=this.canvasHeight+borderAdjustment+"px";if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}if(this.image){this.image.removeAttribute("src");delete this.image}},update:function PDFThumbnailView_update(rotation){if(typeof rotation!=="undefined"){this.rotation=rotation}var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:totalRotation});this.reset()},_getPageDrawContext:function PDFThumbnailView_getPageDrawContext(noCtxScale){var canvas=document.createElement("canvas");this.canvas=canvas;canvas.mozOpaque=true;var ctx=canvas.getContext("2d",{alpha:false});var outputScale=getOutputScale(ctx);canvas.width=this.canvasWidth*outputScale.sx|0;canvas.height=this.canvasHeight*outputScale.sy|0;canvas.style.width=this.canvasWidth+"px";canvas.style.height=this.canvasHeight+"px";if(!noCtxScale&&outputScale.scaled){ctx.scale(outputScale.sx,outputScale.sy)}var image=document.createElement("img");this.image=image;image.id=this.renderingId;image.className="thumbnailImage";image.setAttribute("aria-label",mozL10n.get("thumb_page_canvas",{page:this.id},"Thumbnail of Page {{page}}"));image.style.width=canvas.style.width;image.style.height=canvas.style.height;return ctx},_convertCanvasToImage:function PDFThumbnailView_convertCanvasToImage(){if(!this.canvas){return}this.image.src=this.canvas.toDataURL();this.div.setAttribute("data-loaded",true);this.ring.appendChild(this.image);this.canvas.width=0;this.canvas.height=0;delete this.canvas},draw:function PDFThumbnailView_draw(){if(this.renderingState!==RenderingStates.INITIAL){console.error("Must be in new state before drawing")}if(this.hasImage){return Promise.resolve(undefined)}this.hasImage=true;this.renderingState=RenderingStates.RUNNING;var resolveRenderPromise,rejectRenderPromise;var promise=new Promise(function(resolve,reject){resolveRenderPromise=resolve;rejectRenderPromise=reject});var self=this;function thumbnailDrawCallback(error){if(renderTask===self.renderTask){self.renderTask=null}if(error==="cancelled"){rejectRenderPromise(error);return}self.renderingState=RenderingStates.FINISHED;self._convertCanvasToImage();if(!error){resolveRenderPromise(undefined)}else{rejectRenderPromise(error)}}var ctx=this._getPageDrawContext();var drawViewport=this.viewport.clone({scale:this.scale});var renderContinueCallback=function renderContinueCallback(cont){if(!self.renderingQueue.isHighestPriority(self)){self.renderingState=RenderingStates.PAUSED;self.resume=function resumeCallback(){self.renderingState=RenderingStates.RUNNING;cont()};return}cont()};var renderContext={canvasContext:ctx,viewport:drawViewport};var renderTask=this.renderTask=this.pdfPage.render(renderContext);renderTask.onContinue=renderContinueCallback;renderTask.promise.then(function pdfPageRenderCallback(){thumbnailDrawCallback(null)},function pdfPageRenderError(error){thumbnailDrawCallback(error)});return promise},setImage:function PDFThumbnailView_setImage(pageView){var img=pageView.canvas;if(this.hasImage||!img){return}if(!this.pdfPage){this.setPdfPage(pageView.pdfPage)}this.hasImage=true;this.renderingState=RenderingStates.FINISHED;var ctx=this._getPageDrawContext(true);var canvas=ctx.canvas;if(img.width<=2*canvas.width){ctx.drawImage(img,0,0,img.width,img.height,0,0,canvas.width,canvas.height);this._convertCanvasToImage();return}var MAX_NUM_SCALING_STEPS=3;var reducedWidth=canvas.width<<MAX_NUM_SCALING_STEPS;var reducedHeight=canvas.height<<MAX_NUM_SCALING_STEPS;var reducedImage=getTempCanvas(reducedWidth,reducedHeight);var reducedImageCtx=reducedImage.getContext("2d");while(reducedWidth>img.width||reducedHeight>img.height){reducedWidth>>=1;reducedHeight>>=1}reducedImageCtx.drawImage(img,0,0,img.width,img.height,0,0,reducedWidth,reducedHeight);while(reducedWidth>2*canvas.width){reducedImageCtx.drawImage(reducedImage,0,0,reducedWidth,reducedHeight,0,0,reducedWidth>>1,reducedHeight>>1);reducedWidth>>=1;reducedHeight>>=1}ctx.drawImage(reducedImage,0,0,reducedWidth,reducedHeight,0,0,canvas.width,canvas.height);this._convertCanvasToImage()}};return PDFThumbnailView}();PDFThumbnailView.tempImageCache=null;var PDFThumbnailViewer=function PDFThumbnailViewerClosure(){function PDFThumbnailViewer(options){this.container=options.container;this.renderingQueue=options.renderingQueue;this.linkService=options.linkService;this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this));this._resetView()}PDFThumbnailViewer.prototype={_scrollUpdated:function PDFThumbnailViewer_scrollUpdated(){this.renderingQueue.renderHighestPriority()},getThumbnail:function PDFThumbnailViewer_getThumbnail(index){return this.thumbnails[index]},_getVisibleThumbs:function PDFThumbnailViewer_getVisibleThumbs(){return getVisibleElements(this.container,this.thumbnails)},scrollThumbnailIntoView:function PDFThumbnailViewer_scrollThumbnailIntoView(page){var selected=document.querySelector(".thumbnail.selected");if(selected){selected.classList.remove("selected")}var thumbnail=document.getElementById("thumbnailContainer"+page);if(thumbnail){thumbnail.classList.add("selected")}var visibleThumbs=this._getVisibleThumbs();var numVisibleThumbs=visibleThumbs.views.length;if(numVisibleThumbs>0){var first=visibleThumbs.first.id;var last=numVisibleThumbs>1?visibleThumbs.last.id:first;if(page<=first||page>=last){scrollIntoView(thumbnail,{top:THUMBNAIL_SCROLL_MARGIN})}}},get pagesRotation(){return this._pagesRotation},set pagesRotation(rotation){this._pagesRotation=rotation;for(var i=0,l=this.thumbnails.length;i<l;i++){var thumb=this.thumbnails[i];thumb.update(rotation)}},cleanup:function PDFThumbnailViewer_cleanup(){var tempCanvas=PDFThumbnailView.tempImageCache;if(tempCanvas){tempCanvas.width=0;tempCanvas.height=0}PDFThumbnailView.tempImageCache=null},_resetView:function PDFThumbnailViewer_resetView(){this.thumbnails=[];this._pagesRotation=0;this._pagesRequests=[]},setDocument:function PDFThumbnailViewer_setDocument(pdfDocument){if(this.pdfDocument){var thumbsView=this.container;while(thumbsView.hasChildNodes()){thumbsView.removeChild(thumbsView.lastChild)}this._resetView()}this.pdfDocument=pdfDocument;if(!pdfDocument){return Promise.resolve()}return pdfDocument.getPage(1).then(function(firstPage){var pagesCount=pdfDocument.numPages;var viewport=firstPage.getViewport(1);for(var pageNum=1;pageNum<=pagesCount;++pageNum){var thumbnail=new PDFThumbnailView({container:this.container,id:pageNum,defaultViewport:viewport.clone(),linkService:this.linkService,renderingQueue:this.renderingQueue});this.thumbnails.push(thumbnail)}}.bind(this))},_ensurePdfPageLoaded:function PDFThumbnailViewer_ensurePdfPageLoaded(thumbView){if(thumbView.pdfPage){return Promise.resolve(thumbView.pdfPage)}var pageNumber=thumbView.id;if(this._pagesRequests[pageNumber]){return this._pagesRequests[pageNumber]}var promise=this.pdfDocument.getPage(pageNumber).then(function(pdfPage){thumbView.setPdfPage(pdfPage);

this._pagesRequests[pageNumber]=null;return pdfPage}.bind(this));this._pagesRequests[pageNumber]=promise;return promise},ensureThumbnailVisible:function PDFThumbnailViewer_ensureThumbnailVisible(page){scrollIntoView(document.getElementById("thumbnailContainer"+page))},forceRendering:function(){var visibleThumbs=this._getVisibleThumbs();var thumbView=this.renderingQueue.getHighestPriority(visibleThumbs,this.thumbnails,this.scroll.down);if(thumbView){this._ensurePdfPageLoaded(thumbView).then(function(){this.renderingQueue.renderView(thumbView)}.bind(this));return true}return false}};return PDFThumbnailViewer}();var PDFOutlineView=function PDFOutlineViewClosure(){function PDFOutlineView(options){this.container=options.container;this.outline=options.outline;this.linkService=options.linkService;this.lastToggleIsShow=true}PDFOutlineView.prototype={reset:function PDFOutlineView_reset(){var container=this.container;while(container.firstChild){container.removeChild(container.firstChild)}this.lastToggleIsShow=true},_dispatchEvent:function PDFOutlineView_dispatchEvent(outlineCount){var event=document.createEvent("CustomEvent");event.initCustomEvent("outlineloaded",true,true,{outlineCount:outlineCount});this.container.dispatchEvent(event)},_bindLink:function PDFOutlineView_bindLink(element,item){var linkService=this.linkService;element.href=linkService.getDestinationHash(item.dest);element.onclick=function goToDestination(e){linkService.navigateTo(item.dest);return false}},_addToggleButton:function PDFOutlineView_addToggleButton(div){var toggler=document.createElement("div");toggler.className="outlineItemToggler";toggler.onclick=function(event){event.stopPropagation();toggler.classList.toggle("outlineItemsHidden");if(event.shiftKey){var shouldShowAll=!toggler.classList.contains("outlineItemsHidden");this._toggleOutlineItem(div,shouldShowAll)}}.bind(this);div.insertBefore(toggler,div.firstChild)},_toggleOutlineItem:function PDFOutlineView_toggleOutlineItem(root,show){this.lastToggleIsShow=show;var togglers=root.querySelectorAll(".outlineItemToggler");for(var i=0,ii=togglers.length;i<ii;++i){togglers[i].classList[show?"remove":"add"]("outlineItemsHidden")}},toggleOutlineTree:function PDFOutlineView_toggleOutlineTree(){this._toggleOutlineItem(this.container,!this.lastToggleIsShow)},render:function PDFOutlineView_render(){var outline=this.outline;var outlineCount=0;this.reset();if(!outline){this._dispatchEvent(outlineCount);return}var fragment=document.createDocumentFragment();var queue=[{parent:fragment,items:this.outline}];var hasAnyNesting=false;while(queue.length>0){var levelData=queue.shift();for(var i=0,len=levelData.items.length;i<len;i++){var item=levelData.items[i];var div=document.createElement("div");div.className="outlineItem";var element=document.createElement("a");this._bindLink(element,item);element.textContent=PDFJS.removeNullCharacters(item.title);div.appendChild(element);if(item.items.length>0){hasAnyNesting=true;this._addToggleButton(div);var itemsDiv=document.createElement("div");itemsDiv.className="outlineItems";div.appendChild(itemsDiv);queue.push({parent:itemsDiv,items:item.items})}levelData.parent.appendChild(div);outlineCount++}}if(hasAnyNesting){this.container.classList.add("outlineWithDeepNesting")}this.container.appendChild(fragment);this._dispatchEvent(outlineCount)}};return PDFOutlineView}();var PDFAttachmentView=function PDFAttachmentViewClosure(){function PDFAttachmentView(options){this.container=options.container;this.attachments=options.attachments;this.downloadManager=options.downloadManager}PDFAttachmentView.prototype={reset:function PDFAttachmentView_reset(){var container=this.container;while(container.firstChild){container.removeChild(container.firstChild)}},_dispatchEvent:function PDFAttachmentView_dispatchEvent(attachmentsCount){var event=document.createEvent("CustomEvent");event.initCustomEvent("attachmentsloaded",true,true,{attachmentsCount:attachmentsCount});this.container.dispatchEvent(event)},_bindLink:function PDFAttachmentView_bindLink(button,content,filename){button.onclick=function downloadFile(e){this.downloadManager.downloadData(content,filename,"");return false}.bind(this)},render:function PDFAttachmentView_render(){var attachments=this.attachments;var attachmentsCount=0;this.reset();if(!attachments){this._dispatchEvent(attachmentsCount);return}var names=Object.keys(attachments).sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())});attachmentsCount=names.length;for(var i=0;i<attachmentsCount;i++){var item=attachments[names[i]];var filename=getFileName(item.filename);var div=document.createElement("div");div.className="attachmentsItem";var button=document.createElement("button");this._bindLink(button,item.content,filename);button.textContent=PDFJS.removeNullCharacters(filename);div.appendChild(button);this.container.appendChild(div)}this._dispatchEvent(attachmentsCount)}};return PDFAttachmentView}();var PDFViewerApplication={initialBookmark:document.location.hash.substring(1),initialDestination:null,initialized:false,fellback:false,pdfDocument:null,pdfLoadingTask:null,sidebarOpen:false,printing:false,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pageRotation:0,isInitialViewSet:false,animationStartedPromise:null,preferenceSidebarViewOnLoad:SidebarView.NONE,preferencePdfBugEnabled:false,preferenceShowPreviousViewOnLoad:true,preferenceDefaultZoomValue:"",isViewerEmbedded:window.parent!==window,url:"",initialize:function pdfViewInitialize(){var pdfRenderingQueue=new PDFRenderingQueue;pdfRenderingQueue.onIdle=this.cleanup.bind(this);this.pdfRenderingQueue=pdfRenderingQueue;var pdfLinkService=new PDFLinkService;this.pdfLinkService=pdfLinkService;var container=document.getElementById("viewerContainer");var viewer=document.getElementById("viewer");this.pdfViewer=new PDFViewer({container:container,viewer:viewer,renderingQueue:pdfRenderingQueue,linkService:pdfLinkService});pdfRenderingQueue.setViewer(this.pdfViewer);pdfLinkService.setViewer(this.pdfViewer);var thumbnailContainer=document.getElementById("thumbnailView");this.pdfThumbnailViewer=new PDFThumbnailViewer({container:thumbnailContainer,renderingQueue:pdfRenderingQueue,linkService:pdfLinkService});pdfRenderingQueue.setThumbnailViewer(this.pdfThumbnailViewer);Preferences.initialize();this.pdfHistory=new PDFHistory({linkService:pdfLinkService});pdfLinkService.setHistory(this.pdfHistory);this.findController=new PDFFindController({pdfViewer:this.pdfViewer,integratedFind:this.supportsIntegratedFind});this.pdfViewer.setFindController(this.findController);this.findBar=new PDFFindBar({bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findStatusIcon:document.getElementById("findStatusIcon"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext"),findController:this.findController});this.findController.setFindBar(this.findBar);HandTool.initialize({container:container,toggleHandTool:document.getElementById("toggleHandTool")});this.pdfDocumentProperties=new PDFDocumentProperties({overlayName:"documentPropertiesOverlay",closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField")}});SecondaryToolbar.initialize({toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFile:document.getElementById("secondaryOpenFile"),print:document.getElementById("secondaryPrint"),download:document.getElementById("secondaryDownload"),viewBookmark:document.getElementById("secondaryViewBookmark"),firstPage:document.getElementById("firstPage"),lastPage:document.getElementById("lastPage"),pageRotateCw:document.getElementById("pageRotateCw"),pageRotateCcw:document.getElementById("pageRotateCcw"),documentPropertiesButton:document.getElementById("documentProperties")});if(this.supportsFullscreen){var toolbar=SecondaryToolbar;this.pdfPresentationMode=new PDFPresentationMode({container:container,viewer:viewer,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,contextMenuItems:[{element:document.getElementById("contextFirstPage"),handler:toolbar.firstPageClick.bind(toolbar)},{element:document.getElementById("contextLastPage"),handler:toolbar.lastPageClick.bind(toolbar)},{element:document.getElementById("contextPageRotateCw"),handler:toolbar.pageRotateCwClick.bind(toolbar)},{element:document.getElementById("contextPageRotateCcw"),handler:toolbar.pageRotateCcwClick.bind(toolbar)}]})}PasswordPrompt.initialize({overlayName:"passwordOverlay",passwordField:document.getElementById("password"),passwordText:document.getElementById("passwordText"),passwordSubmit:document.getElementById("passwordSubmit"),passwordCancel:document.getElementById("passwordCancel")});var self=this;var initializedPromise=Promise.all([Preferences.get("enableWebGL").then(function resolved(value){PDFJS.disableWebGL=!value}),Preferences.get("sidebarViewOnLoad").then(function resolved(value){self.preferenceSidebarViewOnLoad=value}),Preferences.get("pdfBugEnabled").then(function resolved(value){self.preferencePdfBugEnabled=value}),Preferences.get("showPreviousViewOnLoad").then(function resolved(value){self.preferenceShowPreviousViewOnLoad=value}),Preferences.get("defaultZoomValue").then(function resolved(value){self.preferenceDefaultZoomValue=value}),Preferences.get("disableTextLayer").then(function resolved(value){if(PDFJS.disableTextLayer===true){return}PDFJS.disableTextLayer=value}),Preferences.get("disableRange").then(function resolved(value){if(PDFJS.disableRange===true){return}PDFJS.disableRange=value}),Preferences.get("disableStream").then(function resolved(value){if(PDFJS.disableStream===true){return}PDFJS.disableStream=value}),Preferences.get("disableAutoFetch").then(function resolved(value){PDFJS.disableAutoFetch=value}),Preferences.get("disableFontFace").then(function resolved(value){if(PDFJS.disableFontFace===true){return}PDFJS.disableFontFace=value}),Preferences.get("useOnlyCssZoom").then(function resolved(value){PDFJS.useOnlyCssZoom=value}),Preferences.get("externalLinkTarget").then(function resolved(value){if(PDFJS.isExternalLinkTargetSet()){return}PDFJS.externalLinkTarget=value})]).catch(function(reason){});return initializedPromise.then(function(){if(self.isViewerEmbedded&&!PDFJS.isExternalLinkTargetSet()){PDFJS.externalLinkTarget=PDFJS.LinkTarget.TOP}self.initialized=true})},zoomIn:function pdfViewZoomIn(ticks){var newScale=this.pdfViewer.currentScale;do{newScale=(newScale*DEFAULT_SCALE_DELTA).toFixed(2);newScale=Math.ceil(newScale*10)/10;newScale=Math.min(MAX_SCALE,newScale)}while(--ticks>0&&newScale<MAX_SCALE);this.pdfViewer.currentScaleValue=newScale},zoomOut:function pdfViewZoomOut(ticks){var newScale=this.pdfViewer.currentScale;do{newScale=(newScale/DEFAULT_SCALE_DELTA).toFixed(2);newScale=Math.floor(newScale*10)/10;newScale=Math.max(MIN_SCALE,newScale)}while(--ticks>0&&newScale>MIN_SCALE);this.pdfViewer.currentScaleValue=newScale},get pagesCount(){return this.pdfDocument.numPages},set page(val){this.pdfLinkService.page=val},get page(){return this.pdfLinkService.page},get supportsPrinting(){var canvas=document.createElement("canvas");var value="mozPrintCallback"in canvas;return PDFJS.shadow(this,"supportsPrinting",value)},get supportsFullscreen(){var doc=document.documentElement;var support=!!(doc.requestFullscreen||doc.mozRequestFullScreen||doc.webkitRequestFullScreen||doc.msRequestFullscreen);if(document.fullscreenEnabled===false||document.mozFullScreenEnabled===false||document.webkitFullscreenEnabled===false||document.msFullscreenEnabled===false){support=false}if(support&&PDFJS.disableFullscreen===true){support=false}return PDFJS.shadow(this,"supportsFullscreen",support)},get supportsIntegratedFind(){var support=false;return PDFJS.shadow(this,"supportsIntegratedFind",support)},get supportsDocumentFonts(){var support=true;return PDFJS.shadow(this,"supportsDocumentFonts",support)},get supportsDocumentColors(){var support=true;return PDFJS.shadow(this,"supportsDocumentColors",support)},get loadingBar(){var bar=new ProgressBar("#loadingBar",{});return PDFJS.shadow(this,"loadingBar",bar)},get supportedMouseWheelZoomModifierKeys(){var support={ctrlKey:true,metaKey:true};return PDFJS.shadow(this,"supportedMouseWheelZoomModifierKeys",support)},setTitleUsingUrl:function pdfViewSetTitleUsingUrl(url){this.url=url;try{this.setTitle(decodeURIComponent(getFileName(url))||url)}catch(e){this.setTitle(url)}},setTitle:function pdfViewSetTitle(title){if(this.isViewerEmbedded){return}document.title=title},close:function pdfViewClose(){var errorWrapper=document.getElementById("errorWrapper");errorWrapper.setAttribute("hidden","true");if(!this.pdfLoadingTask){return Promise.resolve()}var promise=this.pdfLoadingTask.destroy();this.pdfLoadingTask=null;if(this.pdfDocument){this.pdfDocument=null;this.pdfThumbnailViewer.setDocument(null);this.pdfViewer.setDocument(null);this.pdfLinkService.setDocument(null,null)}if(typeof PDFBug!=="undefined"){PDFBug.cleanup()}return promise},open:function pdfViewOpen(file,args){var scale=0;if(arguments.length>2||typeof args==="number"){console.warn("Call of open() with obsolete signature.");if(typeof args==="number"){scale=args}args=arguments[4]||null;if(arguments[3]&&typeof arguments[3]==="object"){args=Object.create(args);args.range=arguments[3]}if(typeof arguments[2]==="string"){args=Object.create(args);args.password=arguments[2]}}if(this.pdfLoadingTask){return this.close().then(function(){Preferences.reload();return this.open(file,args)}.bind(this))}var parameters=Object.create(null);if(typeof file==="string"){this.setTitleUsingUrl(file);parameters.url=file}else if(file&&"byteLength"in file){parameters.data=file}else if(file.url&&file.originalUrl){this.setTitleUsingUrl(file.originalUrl);parameters.url=file.url}if(args){for(var prop in args){parameters[prop]=args[prop]}}var self=this;self.downloadComplete=false;var loadingTask=PDFJS.getDocument(parameters);this.pdfLoadingTask=loadingTask;loadingTask.onPassword=function passwordNeeded(updatePassword,reason){PasswordPrompt.updatePassword=updatePassword;PasswordPrompt.reason=reason;PasswordPrompt.open()};loadingTask.onProgress=function getDocumentProgress(progressData){self.progress(progressData.loaded/progressData.total)};loadingTask.onUnsupportedFeature=this.fallback.bind(this);var result=loadingTask.promise.then(function getDocumentCallback(pdfDocument){self.load(pdfDocument,scale)},function getDocumentError(exception){var message=exception&&exception.message;var loadingErrorMessage=mozL10n.get("loading_error",null,"An error occurred while loading the PDF.");if(exception instanceof PDFJS.InvalidPDFException){loadingErrorMessage=mozL10n.get("invalid_file_error",null,"Invalid or corrupted PDF file.")}else if(exception instanceof PDFJS.MissingPDFException){loadingErrorMessage=mozL10n.get("missing_file_error",null,"Missing PDF file.")}else if(exception instanceof PDFJS.UnexpectedResponseException){loadingErrorMessage=mozL10n.get("unexpected_response_error",null,"Unexpected server response.")}var moreInfo={message:message};self.error(loadingErrorMessage,moreInfo);throw new Error(loadingErrorMessage)});if(args&&args.length){PDFViewerApplication.pdfDocumentProperties.setFileSize(args.length)}return result},download:function pdfViewDownload(){function downloadByUrl(){downloadManager.downloadUrl(url,filename)}var url=this.url.split("#")[0];var filename=getPDFFileNameFromURL(url);var downloadManager=new DownloadManager;downloadManager.onerror=function(err){PDFViewerApplication.error("PDF failed to download.")};if(!this.pdfDocument){downloadByUrl();return}if(!this.downloadComplete){downloadByUrl();return}this.pdfDocument.getData().then(function getDataSuccess(data){var blob=PDFJS.createBlob(data,"application/pdf");downloadManager.download(blob,url,filename)},downloadByUrl).then(null,downloadByUrl)},fallback:function pdfViewFallback(featureId){},error:function pdfViewError(message,moreInfo){var moreInfoText=mozL10n.get("error_version_info",{version:PDFJS.version||"?",build:PDFJS.build||"?"},"PDF.js v{{version}} (build: {{build}})")+"\n";if(moreInfo){moreInfoText+=mozL10n.get("error_message",{message:moreInfo.message},"Message: {{message}}");if(moreInfo.stack){moreInfoText+="\n"+mozL10n.get("error_stack",{stack:moreInfo.stack},"Stack: {{stack}}")}else{if(moreInfo.filename){moreInfoText+="\n"+mozL10n.get("error_file",{file:moreInfo.filename},"File: {{file}}")}if(moreInfo.lineNumber){moreInfoText+="\n"+mozL10n.get("error_line",{line:moreInfo.lineNumber},"Line: {{line}}")}}}var errorWrapper=document.getElementById("errorWrapper");errorWrapper.removeAttribute("hidden");var errorMessage=document.getElementById("errorMessage");errorMessage.textContent=message;var closeButton=document.getElementById("errorClose");closeButton.onclick=function(){errorWrapper.setAttribute("hidden","true")};var errorMoreInfo=document.getElementById("errorMoreInfo");var moreInfoButton=document.getElementById("errorShowMore");var lessInfoButton=document.getElementById("errorShowLess");moreInfoButton.onclick=function(){errorMoreInfo.removeAttribute("hidden");moreInfoButton.setAttribute("hidden","true");lessInfoButton.removeAttribute("hidden");errorMoreInfo.style.height=errorMoreInfo.scrollHeight+"px"};lessInfoButton.onclick=function(){errorMoreInfo.setAttribute("hidden","true");moreInfoButton.removeAttribute("hidden");lessInfoButton.setAttribute("hidden","true")};moreInfoButton.oncontextmenu=noContextMenuHandler;lessInfoButton.oncontextmenu=noContextMenuHandler;closeButton.oncontextmenu=noContextMenuHandler;moreInfoButton.removeAttribute("hidden");lessInfoButton.setAttribute("hidden","true");errorMoreInfo.value=moreInfoText},progress:function pdfViewProgress(level){var percent=Math.round(level*100);if(percent>this.loadingBar.percent||isNaN(percent)){this.loadingBar.percent=percent;if(PDFJS.disableAutoFetch&&percent){if(this.disableAutoFetchLoadingBarTimeout){clearTimeout(this.disableAutoFetchLoadingBarTimeout);this.disableAutoFetchLoadingBarTimeout=null}this.loadingBar.show();this.disableAutoFetchLoadingBarTimeout=setTimeout(function(){this.loadingBar.hide();this.disableAutoFetchLoadingBarTimeout=null}.bind(this),DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT)}}},load:function pdfViewLoad(pdfDocument,scale){var self=this;scale=scale||UNKNOWN_SCALE;this.findController.reset();this.pdfDocument=pdfDocument;this.pdfDocumentProperties.setDocumentAndUrl(pdfDocument,this.url);var downloadedPromise=pdfDocument.getDownloadInfo().then(function(){self.downloadComplete=true;self.loadingBar.hide()});var pagesCount=pdfDocument.numPages;document.getElementById("numPages").textContent=mozL10n.get("page_of",{pageCount:pagesCount},"of {{pageCount}}");document.getElementById("pageNumber").max=pagesCount;var id=this.documentFingerprint=pdfDocument.fingerprint;var store=this.store=new ViewHistory(id);var baseDocumentUrl=null;this.pdfLinkService.setDocument(pdfDocument,baseDocumentUrl);var pdfViewer=this.pdfViewer;pdfViewer.currentScale=scale;pdfViewer.setDocument(pdfDocument);var firstPagePromise=pdfViewer.firstPagePromise;var pagesPromise=pdfViewer.pagesPromise;var onePageRendered=pdfViewer.onePageRendered;this.pageRotation=0;this.isInitialViewSet=false;this.pdfThumbnailViewer.setDocument(pdfDocument);firstPagePromise.then(function(pdfPage){downloadedPromise.then(function(){var event=document.createEvent("CustomEvent");event.initCustomEvent("documentload",true,true,{});window.dispatchEvent(event)});self.loadingBar.setWidth(document.getElementById("viewer"));if(!PDFJS.disableHistory&&!self.isViewerEmbedded){if(!self.preferenceShowPreviousViewOnLoad){self.pdfHistory.clearHistoryState()}self.pdfHistory.initialize(self.documentFingerprint);if(self.pdfHistory.initialDestination){self.initialDestination=self.pdfHistory.initialDestination}else if(self.pdfHistory.initialBookmark){self.initialBookmark=self.pdfHistory.initialBookmark}}var initialParams={destination:self.initialDestination,bookmark:self.initialBookmark,hash:null};store.initializedPromise.then(function resolved(){var storedHash=null;if(self.preferenceShowPreviousViewOnLoad&&store.get("exists",false)){var pageNum=store.get("page","1");var zoom=self.preferenceDefaultZoomValue||store.get("zoom",DEFAULT_SCALE_VALUE);var left=store.get("scrollLeft","0");var top=store.get("scrollTop","0");storedHash="page="+pageNum+"&zoom="+zoom+","+left+","+top}else if(self.preferenceDefaultZoomValue){storedHash="page=1&zoom="+self.preferenceDefaultZoomValue}self.setInitialView(storedHash,scale);initialParams.hash=storedHash;if(!self.isViewerEmbedded){self.pdfViewer.focus()}},function rejected(reason){console.error(reason);self.setInitialView(null,scale)});pagesPromise.then(function resolved(){if(!initialParams.destination&&!initialParams.bookmark&&!initialParams.hash){return}if(self.hasEqualPageSizes){return}self.initialDestination=initialParams.destination;self.initialBookmark=initialParams.bookmark;self.pdfViewer.currentScaleValue=self.pdfViewer.currentScaleValue;self.setInitialView(initialParams.hash,scale)})});pagesPromise.then(function(){if(self.supportsPrinting){pdfDocument.getJavaScript().then(function(javaScript){if(javaScript.length){console.warn("Warning: JavaScript is not supported");self.fallback(PDFJS.UNSUPPORTED_FEATURES.javaScript)}var regex=/\bprint\s*\(/;for(var i=0,ii=javaScript.length;i<ii;i++){var js=javaScript[i];if(js&&regex.test(js)){setTimeout(function(){window.print()});return}}})}});var promises=[pagesPromise,this.animationStartedPromise];Promise.all(promises).then(function(){pdfDocument.getOutline().then(function(outline){var container=document.getElementById("outlineView");self.outline=new PDFOutlineView({container:container,outline:outline,linkService:self.pdfLinkService});self.outline.render();document.getElementById("viewOutline").disabled=!outline;if(!outline&&!container.classList.contains("hidden")){self.switchSidebarView("thumbs")}if(outline&&self.preferenceSidebarViewOnLoad===SidebarView.OUTLINE){self.switchSidebarView("outline",true)}});pdfDocument.getAttachments().then(function(attachments){var container=document.getElementById("attachmentsView");self.attachments=new PDFAttachmentView({container:container,attachments:attachments,downloadManager:new DownloadManager});self.attachments.render();document.getElementById("viewAttachments").disabled=!attachments;if(!attachments&&!container.classList.contains("hidden")){self.switchSidebarView("thumbs")}if(attachments&&self.preferenceSidebarViewOnLoad===SidebarView.ATTACHMENTS){self.switchSidebarView("attachments",true)}})});if(self.preferenceSidebarViewOnLoad===SidebarView.THUMBS){Promise.all([firstPagePromise,onePageRendered]).then(function(){self.switchSidebarView("thumbs",true)})}pdfDocument.getMetadata().then(function(data){var info=data.info,metadata=data.metadata;self.documentInfo=info;self.metadata=metadata;console.log("PDF "+pdfDocument.fingerprint+" ["+info.PDFFormatVersion+" "+(info.Producer||"-").trim()+" / "+(info.Creator||"-").trim()+"]"+" (PDF.js: "+(PDFJS.version||"-")+(!PDFJS.disableWebGL?" [WebGL]":"")+")");var pdfTitle;if(metadata&&metadata.has("dc:title")){var title=metadata.get("dc:title");if(title!=="Untitled"){pdfTitle=title}}if(!pdfTitle&&info&&info["Title"]){pdfTitle=info["Title"]}if(pdfTitle){self.setTitle(pdfTitle+" - "+document.title)}if(info.IsAcroFormPresent){console.warn("Warning: AcroForm/XFA is not supported");self.fallback(PDFJS.UNSUPPORTED_FEATURES.forms)}})},setInitialView:function pdfViewSetInitialView(storedHash,scale){this.isInitialViewSet=true;document.getElementById("pageNumber").value=this.pdfViewer.currentPageNumber;if(this.initialDestination){this.pdfLinkService.navigateTo(this.initialDestination);this.initialDestination=null}else if(this.initialBookmark){this.pdfLinkService.setHash(this.initialBookmark);this.pdfHistory.push({hash:this.initialBookmark},true);this.initialBookmark=null}else if(storedHash){this.pdfLinkService.setHash(storedHash)}else if(scale){this.pdfViewer.currentScaleValue=scale;this.page=1}if(!this.pdfViewer.currentScaleValue){this.pdfViewer.currentScaleValue=DEFAULT_SCALE_VALUE}},cleanup:function pdfViewCleanup(){if(!this.pdfDocument){return}this.pdfViewer.cleanup();this.pdfThumbnailViewer.cleanup();this.pdfDocument.cleanup()},forceRendering:function pdfViewForceRendering(){this.pdfRenderingQueue.printing=this.printing;this.pdfRenderingQueue.isThumbnailViewEnabled=this.sidebarOpen;this.pdfRenderingQueue.renderHighestPriority()},refreshThumbnailViewer:function pdfViewRefreshThumbnailViewer(){var pdfViewer=this.pdfViewer;var thumbnailViewer=this.pdfThumbnailViewer;var pagesCount=pdfViewer.pagesCount;for(var pageIndex=0;pageIndex<pagesCount;pageIndex++){var pageView=pdfViewer.getPageView(pageIndex);if(pageView&&pageView.renderingState===RenderingStates.FINISHED){var thumbnailView=thumbnailViewer.getThumbnail(pageIndex);thumbnailView.setImage(pageView)}}thumbnailViewer.scrollThumbnailIntoView(this.page)},switchSidebarView:function pdfViewSwitchSidebarView(view,openSidebar){if(openSidebar&&!this.sidebarOpen){document.getElementById("sidebarToggle").click()}var thumbsView=document.getElementById("thumbnailView");var outlineView=document.getElementById("outlineView");var attachmentsView=document.getElementById("attachmentsView");var thumbsButton=document.getElementById("viewThumbnail");var outlineButton=document.getElementById("viewOutline");var attachmentsButton=document.getElementById("viewAttachments");switch(view){case"thumbs":var wasAnotherViewVisible=thumbsView.classList.contains("hidden");thumbsButton.classList.add("toggled");outlineButton.classList.remove("toggled");attachmentsButton.classList.remove("toggled");thumbsView.classList.remove("hidden");outlineView.classList.add("hidden");attachmentsView.classList.add("hidden");this.forceRendering();if(wasAnotherViewVisible){this.pdfThumbnailViewer.ensureThumbnailVisible(this.page)}break;case"outline":if(outlineButton.disabled){return}thumbsButton.classList.remove("toggled");outlineButton.classList.add("toggled");attachmentsButton.classList.remove("toggled");thumbsView.classList.add("hidden");outlineView.classList.remove("hidden");attachmentsView.classList.add("hidden");break;case"attachments":if(attachmentsButton.disabled){return}thumbsButton.classList.remove("toggled");outlineButton.classList.remove("toggled");attachmentsButton.classList.add("toggled");thumbsView.classList.add("hidden");outlineView.classList.add("hidden");attachmentsView.classList.remove("hidden");break}},beforePrint:function pdfViewSetupBeforePrint(){if(!this.supportsPrinting){var printMessage=mozL10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser.");this.error(printMessage);return}var alertNotReady=false;var i,ii;if(!this.pdfDocument||!this.pagesCount){alertNotReady=true}else{for(i=0,ii=this.pagesCount;i<ii;++i){if(!this.pdfViewer.getPageView(i).pdfPage){alertNotReady=true;break}}}if(alertNotReady){var notReadyMessage=mozL10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing.");window.alert(notReadyMessage);return}this.printing=true;this.forceRendering();var body=document.querySelector("body");body.setAttribute("data-mozPrintCallback",true);if(!this.hasEqualPageSizes){console.warn("Not all pages have the same size. The printed result "+"may be incorrect!")}this.pageStyleSheet=document.createElement("style");var pageSize=this.pdfViewer.getPageView(0).pdfPage.getViewport(1);this.pageStyleSheet.textContent="@supports ((size:A4) and (size:1pt 1pt)) {"+"@page { size: "+pageSize.width+"pt "+pageSize.height+"pt;}"+"#printContainer {height:100%}"+"#printContainer > div {width:100% !important;height:100% !important;}"+"}";body.appendChild(this.pageStyleSheet);for(i=0,ii=this.pagesCount;i<ii;++i){this.pdfViewer.getPageView(i).beforePrint()}},get hasEqualPageSizes(){var firstPage=this.pdfViewer.getPageView(0);for(var i=1,ii=this.pagesCount;i<ii;++i){var pageView=this.pdfViewer.getPageView(i);if(pageView.width!==firstPage.width||pageView.height!==firstPage.height){return false}}return true},afterPrint:function pdfViewSetupAfterPrint(){var div=document.getElementById("printContainer");while(div.hasChildNodes()){div.removeChild(div.lastChild)}if(this.pageStyleSheet&&this.pageStyleSheet.parentNode){this.pageStyleSheet.parentNode.removeChild(this.pageStyleSheet);this.pageStyleSheet=null}this.printing=false;this.forceRendering()},rotatePages:function pdfViewRotatePages(delta){var pageNumber=this.page;this.pageRotation=(this.pageRotation+360+delta)%360;this.pdfViewer.pagesRotation=this.pageRotation;this.pdfThumbnailViewer.pagesRotation=this.pageRotation;this.forceRendering();this.pdfViewer.scrollPageIntoView(pageNumber)},requestPresentationMode:function pdfViewRequestPresentationMode(){if(!this.pdfPresentationMode){return}this.pdfPresentationMode.request()},scrollPresentationMode:function pdfViewScrollPresentationMode(delta){if(!this.pdfPresentationMode){return}this.pdfPresentationMode.mouseScroll(delta)}};window.PDFView=PDFViewerApplication;function webViewerLoad(evt){configure(PDFJS);PDFViewerApplication.initialize().then(webViewerInitialized)}function webViewerInitialized(){var queryString=document.location.search.substring(1);var params=parseQueryString(queryString);var file="file"in params?params.file:DEFAULT_URL;var fileInput=document.createElement("input");fileInput.id="fileInput";fileInput.className="fileInput";fileInput.setAttribute("type","file");fileInput.oncontextmenu=noContextMenuHandler;document.body.appendChild(fileInput);if(!window.File||!window.FileReader||!window.FileList||!window.Blob){document.getElementById("openFile").setAttribute("hidden","true");document.getElementById("secondaryOpenFile").setAttribute("hidden","true")}else{document.getElementById("fileInput").value=null}var locale=PDFJS.locale||navigator.language;if(PDFViewerApplication.preferencePdfBugEnabled){var hash=document.location.hash.substring(1);var hashParams=parseQueryString(hash);if("disableworker"in hashParams){PDFJS.disableWorker=hashParams["disableworker"]==="true"}if("disablerange"in hashParams){PDFJS.disableRange=hashParams["disablerange"]==="true"}if("disablestream"in hashParams){PDFJS.disableStream=hashParams["disablestream"]==="true"}if("disableautofetch"in hashParams){PDFJS.disableAutoFetch=hashParams["disableautofetch"]==="true"}if("disablefontface"in hashParams){PDFJS.disableFontFace=hashParams["disablefontface"]==="true"}if("disablehistory"in hashParams){PDFJS.disableHistory=hashParams["disablehistory"]==="true"}if("webgl"in hashParams){PDFJS.disableWebGL=hashParams["webgl"]!=="true"}if("useonlycsszoom"in hashParams){PDFJS.useOnlyCssZoom=hashParams["useonlycsszoom"]==="true"}if("verbosity"in hashParams){PDFJS.verbosity=hashParams["verbosity"]|0}if("ignorecurrentpositiononzoom"in hashParams){IGNORE_CURRENT_POSITION_ON_ZOOM=hashParams["ignorecurrentpositiononzoom"]==="true";

}if("locale"in hashParams){locale=hashParams["locale"]}if("textlayer"in hashParams){switch(hashParams["textlayer"]){case"off":PDFJS.disableTextLayer=true;break;case"visible":case"shadow":case"hover":var viewer=document.getElementById("viewer");viewer.classList.add("textLayer-"+hashParams["textlayer"]);break}}if("pdfbug"in hashParams){PDFJS.pdfBug=true;var pdfBug=hashParams["pdfbug"];var enabled=pdfBug.split(",");PDFBug.enable(enabled);PDFBug.init()}}mozL10n.setLanguage(locale);if(!PDFViewerApplication.supportsPrinting){document.getElementById("print").classList.add("hidden");document.getElementById("secondaryPrint").classList.add("hidden")}if(!PDFViewerApplication.supportsFullscreen){document.getElementById("presentationMode").classList.add("hidden");document.getElementById("secondaryPresentationMode").classList.add("hidden")}if(PDFViewerApplication.supportsIntegratedFind){document.getElementById("viewFind").classList.add("hidden")}document.getElementById("scaleSelect").oncontextmenu=noContextMenuHandler;var mainContainer=document.getElementById("mainContainer");var outerContainer=document.getElementById("outerContainer");mainContainer.addEventListener("transitionend",function(e){if(e.target===mainContainer){var event=document.createEvent("UIEvents");event.initUIEvent("resize",false,false,window,0);window.dispatchEvent(event);outerContainer.classList.remove("sidebarMoving")}},true);document.getElementById("sidebarToggle").addEventListener("click",function(){this.classList.toggle("toggled");outerContainer.classList.add("sidebarMoving");outerContainer.classList.toggle("sidebarOpen");PDFViewerApplication.sidebarOpen=outerContainer.classList.contains("sidebarOpen");if(PDFViewerApplication.sidebarOpen){PDFViewerApplication.refreshThumbnailViewer()}PDFViewerApplication.forceRendering()});document.getElementById("viewThumbnail").addEventListener("click",function(){PDFViewerApplication.switchSidebarView("thumbs")});document.getElementById("viewOutline").addEventListener("click",function(){PDFViewerApplication.switchSidebarView("outline")});document.getElementById("viewOutline").addEventListener("dblclick",function(){PDFViewerApplication.outline.toggleOutlineTree()});document.getElementById("viewAttachments").addEventListener("click",function(){PDFViewerApplication.switchSidebarView("attachments")});document.getElementById("previous").addEventListener("click",function(){PDFViewerApplication.page--});document.getElementById("next").addEventListener("click",function(){PDFViewerApplication.page++});document.getElementById("zoomIn").addEventListener("click",function(){PDFViewerApplication.zoomIn()});document.getElementById("zoomOut").addEventListener("click",function(){PDFViewerApplication.zoomOut()});document.getElementById("pageNumber").addEventListener("click",function(){this.select()});document.getElementById("pageNumber").addEventListener("change",function(){PDFViewerApplication.page=this.value|0;if(this.value!==(this.value|0).toString()){this.value=PDFViewerApplication.page}});document.getElementById("scaleSelect").addEventListener("change",function(){if(this.value==="custom"){return}PDFViewerApplication.pdfViewer.currentScaleValue=this.value});document.getElementById("presentationMode").addEventListener("click",SecondaryToolbar.presentationModeClick.bind(SecondaryToolbar));document.getElementById("openFile").addEventListener("click",SecondaryToolbar.openFileClick.bind(SecondaryToolbar));document.getElementById("print").addEventListener("click",SecondaryToolbar.printClick.bind(SecondaryToolbar));document.getElementById("download").addEventListener("click",SecondaryToolbar.downloadClick.bind(SecondaryToolbar));if(file&&file.lastIndexOf("file:",0)===0){PDFViewerApplication.setTitleUsingUrl(file);var xhr=new XMLHttpRequest;xhr.onload=function(){PDFViewerApplication.open(new Uint8Array(xhr.response))};try{xhr.open("GET",file);xhr.responseType="arraybuffer";xhr.send()}catch(e){PDFViewerApplication.error(mozL10n.get("loading_error",null,"An error occurred while loading the PDF."),e)}return}if(file){PDFViewerApplication.open(file)}}document.addEventListener("DOMContentLoaded",webViewerLoad,true);document.addEventListener("pagerendered",function(e){var pageNumber=e.detail.pageNumber;var pageIndex=pageNumber-1;var pageView=PDFViewerApplication.pdfViewer.getPageView(pageIndex);if(PDFViewerApplication.sidebarOpen){var thumbnailView=PDFViewerApplication.pdfThumbnailViewer.getThumbnail(pageIndex);thumbnailView.setImage(pageView)}if(PDFJS.pdfBug&&Stats.enabled&&pageView.stats){Stats.add(pageNumber,pageView.stats)}if(pageView.error){PDFViewerApplication.error(mozL10n.get("rendering_error",null,"An error occurred while rendering the page."),pageView.error)}if(pageNumber===PDFViewerApplication.page){var pageNumberInput=document.getElementById("pageNumber");pageNumberInput.classList.remove(PAGE_NUMBER_LOADING_INDICATOR)}},true);document.addEventListener("textlayerrendered",function(e){var pageIndex=e.detail.pageNumber-1;var pageView=PDFViewerApplication.pdfViewer.getPageView(pageIndex)},true);document.addEventListener("pagemode",function(evt){if(!PDFViewerApplication.initialized){return}var mode=evt.detail.mode;switch(mode){case"bookmarks":mode="outline";case"thumbs":case"attachments":PDFViewerApplication.switchSidebarView(mode,true);break;case"none":if(PDFViewerApplication.sidebarOpen){document.getElementById("sidebarToggle").click()}break}},true);document.addEventListener("namedaction",function(e){if(!PDFViewerApplication.initialized){return}var action=e.detail.action;switch(action){case"GoToPage":document.getElementById("pageNumber").focus();break;case"Find":if(!PDFViewerApplication.supportsIntegratedFind){PDFViewerApplication.findBar.toggle()}break}},true);window.addEventListener("presentationmodechanged",function(e){var active=e.detail.active;var switchInProgress=e.detail.switchInProgress;PDFViewerApplication.pdfViewer.presentationModeState=switchInProgress?PresentationModeState.CHANGING:active?PresentationModeState.FULLSCREEN:PresentationModeState.NORMAL});window.addEventListener("updateviewarea",function(evt){if(!PDFViewerApplication.initialized){return}var location=evt.location;PDFViewerApplication.store.initializedPromise.then(function(){PDFViewerApplication.store.setMultiple({exists:true,page:location.pageNumber,zoom:location.scale,scrollLeft:location.left,scrollTop:location.top}).catch(function(){})});var href=PDFViewerApplication.pdfLinkService.getAnchorUrl(location.pdfOpenParams);document.getElementById("viewBookmark").href=href;document.getElementById("secondaryViewBookmark").href=href;PDFViewerApplication.pdfHistory.updateCurrentBookmark(location.pdfOpenParams,location.pageNumber);var pageNumberInput=document.getElementById("pageNumber");var currentPage=PDFViewerApplication.pdfViewer.getPageView(PDFViewerApplication.page-1);if(currentPage.renderingState===RenderingStates.FINISHED){pageNumberInput.classList.remove(PAGE_NUMBER_LOADING_INDICATOR)}else{pageNumberInput.classList.add(PAGE_NUMBER_LOADING_INDICATOR)}},true);window.addEventListener("resize",function webViewerResize(evt){if(PDFViewerApplication.initialized){var currentScaleValue=PDFViewerApplication.pdfViewer.currentScaleValue;if(currentScaleValue==="auto"||currentScaleValue==="page-fit"||currentScaleValue==="page-width"){PDFViewerApplication.pdfViewer.currentScaleValue=currentScaleValue}else if(!currentScaleValue){PDFViewerApplication.pdfViewer.currentScaleValue=DEFAULT_SCALE_VALUE}PDFViewerApplication.pdfViewer.update()}SecondaryToolbar.setMaxHeight(document.getElementById("viewerContainer"))});window.addEventListener("hashchange",function webViewerHashchange(evt){if(PDFViewerApplication.pdfHistory.isHashChangeUnlocked){var hash=document.location.hash.substring(1);if(!hash){return}if(!PDFViewerApplication.isInitialViewSet){PDFViewerApplication.initialBookmark=hash}else{PDFViewerApplication.pdfLinkService.setHash(hash)}}});window.addEventListener("change",function webViewerChange(evt){var files=evt.target.files;if(!files||files.length===0){return}var file=files[0];if(!PDFJS.disableCreateObjectURL&&typeof URL!=="undefined"&&URL.createObjectURL){PDFViewerApplication.open(URL.createObjectURL(file))}else{var fileReader=new FileReader;fileReader.onload=function webViewerChangeFileReaderOnload(evt){var buffer=evt.target.result;var uint8Array=new Uint8Array(buffer);PDFViewerApplication.open(uint8Array)};fileReader.readAsArrayBuffer(file)}PDFViewerApplication.setTitleUsingUrl(file.name);document.getElementById("viewBookmark").setAttribute("hidden","true");document.getElementById("secondaryViewBookmark").setAttribute("hidden","true");document.getElementById("download").setAttribute("hidden","true");document.getElementById("secondaryDownload").setAttribute("hidden","true")},true);function selectScaleOption(value){var options=document.getElementById("scaleSelect").options;var predefinedValueFound=false;for(var i=0,ii=options.length;i<ii;i++){var option=options[i];if(option.value!==value){option.selected=false;continue}option.selected=true;predefinedValueFound=true}return predefinedValueFound}window.addEventListener("localized",function localized(evt){document.getElementsByTagName("html")[0].dir=mozL10n.getDirection();PDFViewerApplication.animationStartedPromise.then(function(){var container=document.getElementById("scaleSelectContainer");if(container.clientWidth===0){container.setAttribute("style","display: inherit;")}if(container.clientWidth>0){var select=document.getElementById("scaleSelect");select.setAttribute("style","min-width: inherit;");var width=select.clientWidth+SCALE_SELECT_CONTAINER_PADDING;select.setAttribute("style","min-width: "+(width+SCALE_SELECT_PADDING)+"px;");container.setAttribute("style","min-width: "+width+"px; "+"max-width: "+width+"px;")}SecondaryToolbar.setMaxHeight(document.getElementById("viewerContainer"))})},true);window.addEventListener("scalechange",function scalechange(evt){document.getElementById("zoomOut").disabled=evt.scale===MIN_SCALE;document.getElementById("zoomIn").disabled=evt.scale===MAX_SCALE;var predefinedValueFound=selectScaleOption(evt.presetValue||""+evt.scale);if(!predefinedValueFound){var customScaleOption=document.getElementById("customScaleOption");var customScale=Math.round(evt.scale*1e4)/100;customScaleOption.textContent=mozL10n.get("page_scale_percent",{scale:customScale},"{{scale}}%");customScaleOption.selected=true}if(!PDFViewerApplication.initialized){return}PDFViewerApplication.pdfViewer.update()},true);window.addEventListener("pagechange",function pagechange(evt){var page=evt.pageNumber;if(evt.previousPageNumber!==page){document.getElementById("pageNumber").value=page;if(PDFViewerApplication.sidebarOpen){PDFViewerApplication.pdfThumbnailViewer.scrollThumbnailIntoView(page)}}var numPages=PDFViewerApplication.pagesCount;document.getElementById("previous").disabled=page<=1;document.getElementById("next").disabled=page>=numPages;document.getElementById("firstPage").disabled=page<=1;document.getElementById("lastPage").disabled=page>=numPages;if(PDFJS.pdfBug&&Stats.enabled){var pageView=PDFViewerApplication.pdfViewer.getPageView(page-1);if(pageView.stats){Stats.add(page,pageView.stats)}}},true);function handleMouseWheel(evt){var MOUSE_WHEEL_DELTA_FACTOR=40;var ticks=evt.type==="DOMMouseScroll"?-evt.detail:evt.wheelDelta/MOUSE_WHEEL_DELTA_FACTOR;var direction=ticks<0?"zoomOut":"zoomIn";var pdfViewer=PDFViewerApplication.pdfViewer;if(pdfViewer.isInPresentationMode){evt.preventDefault();PDFViewerApplication.scrollPresentationMode(ticks*MOUSE_WHEEL_DELTA_FACTOR)}else if(evt.ctrlKey||evt.metaKey){var support=PDFViewerApplication.supportedMouseWheelZoomModifierKeys;if(evt.ctrlKey&&!support.ctrlKey||evt.metaKey&&!support.metaKey){return}evt.preventDefault();var previousScale=pdfViewer.currentScale;PDFViewerApplication[direction](Math.abs(ticks));var currentScale=pdfViewer.currentScale;if(previousScale!==currentScale){var scaleCorrectionFactor=currentScale/previousScale-1;var rect=pdfViewer.container.getBoundingClientRect();var dx=evt.clientX-rect.left;var dy=evt.clientY-rect.top;pdfViewer.container.scrollLeft+=dx*scaleCorrectionFactor;pdfViewer.container.scrollTop+=dy*scaleCorrectionFactor}}}window.addEventListener("DOMMouseScroll",handleMouseWheel);window.addEventListener("mousewheel",handleMouseWheel);window.addEventListener("click",function click(evt){if(SecondaryToolbar.opened&&PDFViewerApplication.pdfViewer.containsElement(evt.target)){SecondaryToolbar.close()}},false);window.addEventListener("keydown",function keydown(evt){if(OverlayManager.active){return}var handled=false;var cmd=(evt.ctrlKey?1:0)|(evt.altKey?2:0)|(evt.shiftKey?4:0)|(evt.metaKey?8:0);var pdfViewer=PDFViewerApplication.pdfViewer;var isViewerInPresentationMode=pdfViewer&&pdfViewer.isInPresentationMode;if(cmd===1||cmd===8||cmd===5||cmd===12){switch(evt.keyCode){case 70:if(!PDFViewerApplication.supportsIntegratedFind){PDFViewerApplication.findBar.open();handled=true}break;case 71:if(!PDFViewerApplication.supportsIntegratedFind){PDFViewerApplication.findBar.dispatchEvent("again",cmd===5||cmd===12);handled=true}break;case 61:case 107:case 187:case 171:if(!isViewerInPresentationMode){PDFViewerApplication.zoomIn()}handled=true;break;case 173:case 109:case 189:if(!isViewerInPresentationMode){PDFViewerApplication.zoomOut()}handled=true;break;case 48:case 96:if(!isViewerInPresentationMode){setTimeout(function(){pdfViewer.currentScaleValue=DEFAULT_SCALE_VALUE});handled=false}break}}if(cmd===1||cmd===8){switch(evt.keyCode){case 83:PDFViewerApplication.download();handled=true;break}}if(cmd===3||cmd===10){switch(evt.keyCode){case 80:PDFViewerApplication.requestPresentationMode();handled=true;break;case 71:document.getElementById("pageNumber").select();handled=true;break}}if(handled){evt.preventDefault();return}var curElement=document.activeElement||document.querySelector(":focus");var curElementTagName=curElement&&curElement.tagName.toUpperCase();if(curElementTagName==="INPUT"||curElementTagName==="TEXTAREA"||curElementTagName==="SELECT"){if(evt.keyCode!==27){return}}var ensureViewerFocused=false;if(cmd===0){switch(evt.keyCode){case 38:case 33:case 8:if(!isViewerInPresentationMode&&pdfViewer.currentScaleValue!=="page-fit"){break}case 37:if(pdfViewer.isHorizontalScrollbarEnabled){break}case 75:case 80:PDFViewerApplication.page--;handled=true;break;case 27:if(SecondaryToolbar.opened){SecondaryToolbar.close();handled=true}if(!PDFViewerApplication.supportsIntegratedFind&&PDFViewerApplication.findBar.opened){PDFViewerApplication.findBar.close();handled=true}break;case 40:case 34:case 32:if(!isViewerInPresentationMode&&pdfViewer.currentScaleValue!=="page-fit"){break}case 39:if(pdfViewer.isHorizontalScrollbarEnabled){break}case 74:case 78:PDFViewerApplication.page++;handled=true;break;case 36:if(isViewerInPresentationMode||PDFViewerApplication.page>1){PDFViewerApplication.page=1;handled=true;ensureViewerFocused=true}break;case 35:if(isViewerInPresentationMode||PDFViewerApplication.pdfDocument&&PDFViewerApplication.page<PDFViewerApplication.pagesCount){PDFViewerApplication.page=PDFViewerApplication.pagesCount;handled=true;ensureViewerFocused=true}break;case 72:if(!isViewerInPresentationMode){HandTool.toggle()}break;case 82:PDFViewerApplication.rotatePages(90);break}}if(cmd===4){switch(evt.keyCode){case 32:if(!isViewerInPresentationMode&&pdfViewer.currentScaleValue!=="page-fit"){break}PDFViewerApplication.page--;handled=true;break;case 82:PDFViewerApplication.rotatePages(-90);break}}if(!handled&&!isViewerInPresentationMode){if(evt.keyCode>=33&&evt.keyCode<=40||evt.keyCode===32&&curElementTagName!=="BUTTON"){ensureViewerFocused=true}}if(cmd===2){switch(evt.keyCode){case 37:if(isViewerInPresentationMode){PDFViewerApplication.pdfHistory.back();handled=true}break;case 39:if(isViewerInPresentationMode){PDFViewerApplication.pdfHistory.forward();handled=true}break}}if(ensureViewerFocused&&!pdfViewer.containsElement(curElement)){pdfViewer.focus()}if(handled){evt.preventDefault()}});window.addEventListener("beforeprint",function beforePrint(evt){PDFViewerApplication.beforePrint()});window.addEventListener("afterprint",function afterPrint(evt){PDFViewerApplication.afterPrint()});(function animationStartedClosure(){PDFViewerApplication.animationStartedPromise=new Promise(function(resolve){window.requestAnimationFrame(resolve)})})();